diff -r u-boot/arch/arm/cpu/arm11/cpu.c u-boot-2016.09-rc2/arch/arm/cpu/arm11/cpu.c
55a56,60
> 
> #ifndef CONFIG_SYS_CACHELINE_SIZE
> #define CONFIG_SYS_CACHELINE_SIZE	32
> #endif
> 
diff -r u-boot/arch/arm/cpu/arm926ejs/cache.c u-boot-2016.09-rc2/arch/arm/cpu/arm926ejs/cache.c
10a11,15
> 
> #ifndef CONFIG_SYS_CACHELINE_SIZE
> #define CONFIG_SYS_CACHELINE_SIZE	32
> #endif
> 
diff -r u-boot/arch/arm/cpu/pxa/cache.c u-boot-2016.09-rc2/arch/arm/cpu/pxa/cache.c
10a11,15
> 
> #ifndef CONFIG_SYS_CACHELINE_SIZE
> #define CONFIG_SYS_CACHELINE_SIZE	32
> #endif
> 
diff -r u-boot/arch/arm/dts/axp209.dtsi u-boot-2016.09-rc2/arch/arm/dts/axp209.dtsi
90d89
< 			status = "disabled";
Only in u-boot/arch/arm/dts: axp809.dtsi
Only in u-boot/arch/arm/dts: Cubieboard4_defconfig
Only in u-boot/arch/arm/dts/include/dt-bindings/clock: sun8i-h3-ccu.h
Only in u-boot/arch/arm/dts/include/dt-bindings/reset: sun8i-h3-ccu.h
diff -r u-boot/arch/arm/dts/Makefile u-boot-2016.09-rc2/arch/arm/dts/Makefile
60d59
< 	tegra124-cei-tk1-som.dtb \
62,63c61,62
< 	tegra186-p2771-0000-000.dtb \
< 	tegra186-p2771-0000-500.dtb \
---
> 	tegra186-p2771-0000-a02.dtb \
> 	tegra186-p2771-0000-b00.dtb \
186d184
< 	sun5i-a13-empire-electronix-m712.dtb \
205d202
< 	sun6i-a31s-inet-q972.dtb \
213d209
< 	sun7i-a20-bananapi-m1-plus.dtb \
228d223
< 	sun7i-a20-olinuxino-lime2-emmc.dtb \
255d249
< 	sun8i-h3-bananapi-m2-plus.dtb \
diff -r u-boot/arch/arm/dts/sun4i-a10-a1000.dts u-boot-2016.09-rc2/arch/arm/dts/sun4i-a10-a1000.dts
75c75
< 			label = "a1000:blue:pwr";
---
> 			label = "a1000:blue:usr";
77d76
< 			default-state = "on";
88d86
< 		startup-delay-us = <20000>;
92,109d89
< 
< 	sound {
< 		compatible = "simple-audio-card";
< 		simple-audio-card,name = "On-board SPDIF";
< 
< 		simple-audio-card,cpu {
< 			sound-dai = <&spdif>;
< 		};
< 
< 		simple-audio-card,codec {
< 			sound-dai = <&spdif_out>;
< 		};
< 	};
< 
< 	spdif_out: spdif-out {
< 		#sound-dai-cells = <0>;
< 		compatible = "linux,spdif-dit";
< 	};
208,213d187
< 	status = "okay";
< };
< 
< &spdif {
< 	pinctrl-names = "default";
< 	pinctrl-0 = <&spdif_tx_pins_a>;
diff -r u-boot/arch/arm/dts/sun4i-a10.dtsi u-boot-2016.09-rc2/arch/arm/dts/sun4i-a10.dtsi
68,70c68,69
< 			clocks = <&ahb_gates 36>, <&ahb_gates 43>,
< 				 <&ahb_gates 44>, <&de_be0_clk>,
< 				 <&tcon0_ch1_clk>, <&dram_gates 26>;
---
> 			clocks = <&pll5 1>, <&ahb_gates 36>, <&ahb_gates 43>,
> 				 <&ahb_gates 44>, <&dram_gates 26>;
78c77
< 			clocks = <&ahb_gates 36>, <&ahb_gates 43>,
---
> 			clocks = <&pll5 1>, <&ahb_gates 36>, <&ahb_gates 43>,
80d78
< 				 <&de_be0_clk>, <&de_fe0_clk>, <&tcon0_ch1_clk>,
89,91c87,89
< 			clocks = <&ahb_gates 36>, <&ahb_gates 44>, <&ahb_gates 46>,
< 				 <&de_be0_clk>, <&de_fe0_clk>, <&tcon0_ch0_clk>,
< 				 <&dram_gates 25>, <&dram_gates 26>;
---
> 			clocks = <&pll5 1>, <&ahb_gates 36>, <&ahb_gates 44>,
> 				 <&ahb_gates 46>, <&dram_gates 25>,
> 				 <&dram_gates 26>;
99c97
< 			clocks = <&ahb_gates 34>, <&ahb_gates 36>,
---
> 			clocks = <&pll5 1>, <&ahb_gates 34>, <&ahb_gates 36>,
101,102d98
< 				 <&de_be0_clk>, <&de_fe0_clk>,
< 				 <&tcon0_ch1_clk>, <&dram_gates 5>,
191,199d186
< 		osc3M: osc3M_clk {
< 			compatible = "fixed-factor-clock";
< 			#clock-cells = <0>;
< 			clock-div = <8>;
< 			clock-mult = <1>;
< 			clocks = <&osc24M>;
< 			clock-output-names = "osc3M";
< 		};
< 
224,240d210
< 		pll3: clk@01c20010 {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-pll3-clk";
< 			reg = <0x01c20010 0x4>;
< 			clocks = <&osc3M>;
< 			clock-output-names = "pll3";
< 		};
< 
< 		pll3x2: pll3x2_clk {
< 			compatible = "fixed-factor-clock";
< 			#clock-cells = <0>;
< 			clock-div = <1>;
< 			clock-mult = <2>;
< 			clocks = <&pll3>;
< 			clock-output-names = "pll3-2x";
< 		};
< 
265,281d234
< 		pll7: clk@01c20030 {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-pll3-clk";
< 			reg = <0x01c20030 0x4>;
< 			clocks = <&osc3M>;
< 			clock-output-names = "pll7";
< 		};
< 
< 		pll7x2: pll7x2_clk {
< 			compatible = "fixed-factor-clock";
< 			#clock-cells = <0>;
< 			clock-div = <1>;
< 			clock-mult = <2>;
< 			clocks = <&pll7>;
< 			clock-output-names = "pll7-2x";
< 		};
< 
527,537d479
< 		spdif_clk: clk@01c200c0 {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-mod1-clk";
< 			reg = <0x01c200c0 0x4>;
< 			clocks = <&pll2 SUN4I_A10_PLL2_8X>,
< 				 <&pll2 SUN4I_A10_PLL2_4X>,
< 				 <&pll2 SUN4I_A10_PLL2_2X>,
< 				 <&pll2 SUN4I_A10_PLL2_1X>;
< 			clock-output-names = "spdif";
< 		};
< 
581,655d522
< 		de_be0_clk: clk@01c20104 {
< 			#clock-cells = <0>;
< 			#reset-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-display-clk";
< 			reg = <0x01c20104 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll5 1>;
< 			clock-output-names = "de-be0";
< 		};
< 
< 		de_be1_clk: clk@01c20108 {
< 			#clock-cells = <0>;
< 			#reset-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-display-clk";
< 			reg = <0x01c20108 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll5 1>;
< 			clock-output-names = "de-be1";
< 		};
< 
< 		de_fe0_clk: clk@01c2010c {
< 			#clock-cells = <0>;
< 			#reset-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-display-clk";
< 			reg = <0x01c2010c 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll5 1>;
< 			clock-output-names = "de-fe0";
< 		};
< 
< 		de_fe1_clk: clk@01c20110 {
< 			#clock-cells = <0>;
< 			#reset-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-display-clk";
< 			reg = <0x01c20110 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll5 1>;
< 			clock-output-names = "de-fe1";
< 		};
< 
< 
< 		tcon0_ch0_clk: clk@01c20118 {
< 			#clock-cells = <0>;
< 			#reset-cells = <1>;
< 			compatible = "allwinner,sun4i-a10-tcon-ch0-clk";
< 			reg = <0x01c20118 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll3x2>, <&pll7x2>;
< 			clock-output-names = "tcon0-ch0-sclk";
< 
< 		};
< 
< 		tcon1_ch0_clk: clk@01c2011c {
< 			#clock-cells = <0>;
< 			#reset-cells = <1>;
< 			compatible = "allwinner,sun4i-a10-tcon-ch1-clk";
< 			reg = <0x01c2011c 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll3x2>, <&pll7x2>;
< 			clock-output-names = "tcon1-ch0-sclk";
< 
< 		};
< 
< 		tcon0_ch1_clk: clk@01c2012c {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-tcon-ch0-clk";
< 			reg = <0x01c2012c 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll3x2>, <&pll7x2>;
< 			clock-output-names = "tcon0-ch1-sclk";
< 
< 		};
< 
< 		tcon1_ch1_clk: clk@01c20130 {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-tcon-ch1-clk";
< 			reg = <0x01c20130 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll3x2>, <&pll7x2>;
< 			clock-output-names = "tcon1-ch1-sclk";
< 
< 		};
< 
724,736d590
< 		nfc: nand@01c03000 {
< 			compatible = "allwinner,sun4i-a10-nand";
< 			reg = <0x01c03000 0x1000>;
< 			interrupts = <37>;
< 			clocks = <&ahb_gates 13>, <&nand_clk>;
< 			clock-names = "ahb", "mod";
< 			dmas = <&dma SUN4I_DMA_DEDICATED 3>;
< 			dma-names = "rxtx";
< 			status = "disabled";
< 			#address-cells = <1>;
< 			#size-cells = <0>;
< 		};
< 
976,982c830,832
< 			emac_pins_a: emac0@0 {
< 				allwinner,pins = "PA0", "PA1", "PA2",
< 						"PA3", "PA4", "PA5", "PA6",
< 						"PA7", "PA8", "PA9", "PA10",
< 						"PA11", "PA12", "PA13", "PA14",
< 						"PA15", "PA16";
< 				allwinner,function = "emac";
---
> 			pwm0_pins_a: pwm0@0 {
> 				allwinner,pins = "PB2";
> 				allwinner,function = "pwm";
987,989c837,839
< 			i2c0_pins_a: i2c0@0 {
< 				allwinner,pins = "PB0", "PB1";
< 				allwinner,function = "i2c0";
---
> 			pwm1_pins_a: pwm1@0 {
> 				allwinner,pins = "PI3";
> 				allwinner,function = "pwm";
994,996c844,846
< 			i2c1_pins_a: i2c1@0 {
< 				allwinner,pins = "PB18", "PB19";
< 				allwinner,function = "i2c1";
---
> 			uart0_pins_a: uart0@0 {
> 				allwinner,pins = "PB22", "PB23";
> 				allwinner,function = "uart0";
1001,1003c851,853
< 			i2c2_pins_a: i2c2@0 {
< 				allwinner,pins = "PB20", "PB21";
< 				allwinner,function = "i2c2";
---
> 			uart0_pins_b: uart0@1 {
> 				allwinner,pins = "PF2", "PF4";
> 				allwinner,function = "uart0";
1008,1010c858,860
< 			ir0_rx_pins_a: ir0@0 {
< 				allwinner,pins = "PB4";
< 				allwinner,function = "ir0";
---
> 			uart1_pins_a: uart1@0 {
> 				allwinner,pins = "PA10", "PA11";
> 				allwinner,function = "uart1";
1015,1017c865,867
< 			ir0_tx_pins_a: ir0@1 {
< 				allwinner,pins = "PB3";
< 				allwinner,function = "ir0";
---
> 			i2c0_pins_a: i2c0@0 {
> 				allwinner,pins = "PB0", "PB1";
> 				allwinner,function = "i2c0";
1022,1024c872,874
< 			ir1_rx_pins_a: ir1@0 {
< 				allwinner,pins = "PB23";
< 				allwinner,function = "ir1";
---
> 			i2c1_pins_a: i2c1@0 {
> 				allwinner,pins = "PB18", "PB19";
> 				allwinner,function = "i2c1";
1029,1031c879,892
< 			ir1_tx_pins_a: ir1@1 {
< 				allwinner,pins = "PB22";
< 				allwinner,function = "ir1";
---
> 			i2c2_pins_a: i2c2@0 {
> 				allwinner,pins = "PB20", "PB21";
> 				allwinner,function = "i2c2";
> 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
> 			};
> 
> 			emac_pins_a: emac0@0 {
> 				allwinner,pins = "PA0", "PA1", "PA2",
> 						"PA3", "PA4", "PA5", "PA6",
> 						"PA7", "PA8", "PA9", "PA10",
> 						"PA11", "PA12", "PA13", "PA14",
> 						"PA15", "PA16";
> 				allwinner,function = "emac";
1051,1053c912,914
< 			ps20_pins_a: ps20@0 {
< 				allwinner,pins = "PI20", "PI21";
< 				allwinner,function = "ps2";
---
> 			ir0_rx_pins_a: ir0@0 {
> 				allwinner,pins = "PB4";
> 				allwinner,function = "ir0";
1058,1060c919,921
< 			ps21_pins_a: ps21@0 {
< 				allwinner,pins = "PH12", "PH13";
< 				allwinner,function = "ps2";
---
> 			ir0_tx_pins_a: ir0@1 {
> 				allwinner,pins = "PB3";
> 				allwinner,function = "ir0";
1065,1067c926,928
< 			pwm0_pins_a: pwm0@0 {
< 				allwinner,pins = "PB2";
< 				allwinner,function = "pwm";
---
> 			ir1_rx_pins_a: ir1@0 {
> 				allwinner,pins = "PB23";
> 				allwinner,function = "ir1";
1072,1074c933,935
< 			pwm1_pins_a: pwm1@0 {
< 				allwinner,pins = "PI3";
< 				allwinner,function = "pwm";
---
> 			ir1_tx_pins_a: ir1@1 {
> 				allwinner,pins = "PB22";
> 				allwinner,function = "ir1";
1079,1085d939
< 			spdif_tx_pins_a: spdif@0 {
< 				allwinner,pins = "PB13";
< 				allwinner,function = "spdif";
< 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 				allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
< 			};
< 
1142,1151c996,998
< 			uart0_pins_a: uart0@0 {
< 				allwinner,pins = "PB22", "PB23";
< 				allwinner,function = "uart0";
< 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
< 			};
< 
< 			uart0_pins_b: uart0@1 {
< 				allwinner,pins = "PF2", "PF4";
< 				allwinner,function = "uart0";
---
> 			ps20_pins_a: ps20@0 {
> 				allwinner,pins = "PI20", "PI21";
> 				allwinner,function = "ps2";
1156,1158c1003,1005
< 			uart1_pins_a: uart1@0 {
< 				allwinner,pins = "PA10", "PA11";
< 				allwinner,function = "uart1";
---
> 			ps21_pins_a: ps21@0 {
> 				allwinner,pins = "PH12", "PH13";
> 				allwinner,function = "ps2";
1187,1199d1033
< 			status = "disabled";
< 		};
< 
< 		spdif: spdif@01c21000 {
< 			#sound-dai-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-spdif";
< 			reg = <0x01c21000 0x400>;
< 			interrupts = <13>;
< 			clocks = <&apb0_gates 1>, <&spdif_clk>;
< 			clock-names = "apb", "spdif";
< 			dmas = <&dma SUN4I_DMA_NORMAL 2>,
< 			       <&dma SUN4I_DMA_NORMAL 2>;
< 			dma-names = "rx", "tx";
diff -r u-boot/arch/arm/dts/sun4i-a10-hackberry.dts u-boot-2016.09-rc2/arch/arm/dts/sun4i-a10-hackberry.dts
69d68
< 		startup-delay-us = <20000>;
diff -r u-boot/arch/arm/dts/sun4i-a10-hyundai-a7hd.dts u-boot-2016.09-rc2/arch/arm/dts/sun4i-a10-hyundai-a7hd.dts
90,113d89
< &otg_sram {
< 	status = "okay";
< };
< 
< &pio {
< 	usb0_id_detect_pin: usb0_id_detect_pin@0 {
< 		allwinner,pins = "PH4";
< 		allwinner,function = "gpio_in";
< 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
< 	};
< 
< 	usb0_vbus_detect_pin: usb0_vbus_detect_pin@0 {
< 		allwinner,pins = "PH5";
< 		allwinner,function = "gpio_in";
< 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 		allwinner,pull = <SUN4I_PINCTRL_PULL_DOWN>;
< 	};
< };
< 
< &reg_usb0_vbus {
< 	status = "okay";
< };
< 
129,133d104
< &usb_otg {
< 	dr_mode = "otg";
< 	status = "okay";
< };
< 
135,139d105
< 	pinctrl-names = "default";
< 	pinctrl-0 = <&usb0_id_detect_pin>, <&usb0_vbus_detect_pin>;
< 	usb0_id_det-gpio = <&pio 7 4 GPIO_ACTIVE_HIGH>; /* PH4 */
< 	usb0_vbus_det-gpio = <&pio 7 5 GPIO_ACTIVE_HIGH>; /* PH5 */
< 	usb0_vbus-supply = <&reg_usb0_vbus>;
diff -r u-boot/arch/arm/dts/sun4i-a10-jesurun-q5.dts u-boot-2016.09-rc2/arch/arm/dts/sun4i-a10-jesurun-q5.dts
83d82
< 		startup-delay-us = <20000>;
diff -r u-boot/arch/arm/dts/sun5i-a10s.dtsi u-boot-2016.09-rc2/arch/arm/dts/sun5i-a10s.dtsi
68,69c68,69
< 			clocks = <&pll3>, <&pll5 1>, <&ahb_gates 36>,
< 				 <&ahb_gates 43>, <&ahb_gates 44>;
---
> 			clocks = <&pll5 1>, <&ahb_gates 36>, <&ahb_gates 43>,
> 				 <&ahb_gates 44>;
77,78c77
< 			clocks = <&pll3>, <&pll5 1>, <&ahb_gates 36>,
< 				 <&ahb_gates 44>;
---
> 			clocks = <&pll5 1>, <&ahb_gates 36>, <&ahb_gates 44>;
86,87c85,86
< 			clocks = <&pll3>, <&pll5 1>, <&ahb_gates 34>,
< 				 <&ahb_gates 36>, <&ahb_gates 44>;
---
> 			clocks = <&pll5 1>, <&ahb_gates 34>, <&ahb_gates 36>,
> 				 <&ahb_gates 44>;
246,250c245,249
< 	spi2_pins_a: spi2@0 {
< 		allwinner,pins = "PB12", "PB13", "PB14";
< 		allwinner,function = "spi2";
< 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
---
> 	nand_cs2_pins_a: nand_cs@2 {
> 		allwinner,pins = "PC17";
> 		allwinner,function = "nand0";
> 		allwinner,drive = <0>;
> 		allwinner,pull = <0>;
253,257c252,256
< 	spi2_cs0_pins_a: spi2_cs0@0 {
< 		allwinner,pins = "PB11";
< 		allwinner,function = "spi2";
< 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
---
> 	nand_cs3_pins_a: nand_cs@3 {
> 		allwinner,pins = "PC18";
> 		allwinner,function = "nand0";
> 		allwinner,drive = <0>;
> 		allwinner,pull = <0>;
diff -r u-boot/arch/arm/dts/sun5i-a10s-mk802.dts u-boot-2016.09-rc2/arch/arm/dts/sun5i-a10s-mk802.dts
76,89d75
< &i2c0 {
< 	pinctrl-names = "default";
< 	pinctrl-0 = <&i2c0_pins_a>;
< 	status = "okay";
< 
< 	axp152: pmic@30 {
< 		compatible = "x-powers,axp152";
< 		reg = <0x30>;
< 		interrupts = <0>;
< 		interrupt-controller;
< 		#interrupt-cells = <1>;
< 	};
< };
< 
100,108d85
< &mmc1 {
< 	pinctrl-names = "default";
< 	pinctrl-0 = <&mmc1_pins_a>;
< 	vmmc-supply = <&reg_vcc3v3>;
< 	bus-width = <4>;
< 	non-removable;
< 	status = "okay";
< };
< 
113,116d89
< &otg_sram {
< 	status = "okay";
< };
< 
149,153d121
< 	status = "okay";
< };
< 
< &usb_otg {
< 	dr_mode = "otg";
diff -r u-boot/arch/arm/dts/sun5i-a10s-olinuxino-micro.dts u-boot-2016.09-rc2/arch/arm/dts/sun5i-a10s-olinuxino-micro.dts
251,257d250
< &spi2 {
< 	pinctrl-names = "default";
< 	pinctrl-0 = <&spi2_pins_a>,
< 		    <&spi2_cs0_pins_a>;
< 	status = "okay";
< };
< 
diff -r u-boot/arch/arm/dts/sun5i-a10s-wobo-i5.dts u-boot-2016.09-rc2/arch/arm/dts/sun5i-a10s-wobo-i5.dts
82d81
< 		startup-delay-us = <20000>;
199,206c198
< 	regulator-name = "vcc-wifi1";
< };
< 
< &reg_ldo4 {
< 	regulator-always-on;
< 	regulator-min-microvolt = <3300000>;
< 	regulator-max-microvolt = <3300000>;
< 	regulator-name = "vcc-wifi2";
---
> 	regulator-name = "vcc-wifi";
diff -r u-boot/arch/arm/dts/sun5i-a13-difrnce-dit4350.dts u-boot-2016.09-rc2/arch/arm/dts/sun5i-a13-difrnce-dit4350.dts
45c45,50
< #include "sun5i-reference-design-tablet.dtsi"
---
> #include "sunxi-common-regulators.dtsi"
> #include <dt-bindings/gpio/gpio.h>
> #include <dt-bindings/input/input.h>
> #include <dt-bindings/interrupt-controller/irq.h>
> #include <dt-bindings/pinctrl/sun4i-a10.h>
> #include <dt-bindings/pwm/pwm.h>
49a55,225
> 
> 	aliases {
> 		serial0 = &uart1;
> 	};
> 
> 	backlight: backlight {
> 		compatible = "pwm-backlight";
> 		pwms = <&pwm 0 50000 PWM_POLARITY_INVERTED>;
> 		brightness-levels = <0 10 20 30 40 50 60 70 80 90 100>;
> 		default-brightness-level = <8>;
> 		/* TODO: backlight uses axp gpio1 as enable pin */
> 	};
> 
> 	chosen {
> 		stdout-path = "serial0:115200n8";
> 	};
> };
> 
> &cpu0 {
> 	cpu-supply = <&reg_dcdc2>;
> };
> 
> &ehci0 {
> 	status = "okay";
> };
> 
> &i2c0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&i2c0_pins_a>;
> 	status = "okay";
> 
> 	axp209: pmic@34 {
> 		reg = <0x34>;
> 		interrupts = <0>;
> 	};
> };
> 
> #include "axp209.dtsi"
> 
> &i2c1 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&i2c1_pins_a>;
> 	status = "okay";
> 
> 	pcf8563: rtc@51 {
> 		compatible = "nxp,pcf8563";
> 		reg = <0x51>;
> 	};
> };
> 
> &lradc {
> 	vref-supply = <&reg_ldo2>;
> 	status = "okay";
> 
> 	button@200 {
> 		label = "Volume Up";
> 		linux,code = <KEY_VOLUMEUP>;
> 		channel = <0>;
> 		voltage = <200000>;
> 	};
> 
> 	button@400 {
> 		label = "Volume Down";
> 		linux,code = <KEY_VOLUMEDOWN>;
> 		channel = <0>;
> 		voltage = <400000>;
> 	};
> };
> 
> &mmc0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&mmc0_pins_a>, <&mmc0_cd_pin_d709>;
> 	vmmc-supply = <&reg_vcc3v3>;
> 	bus-width = <4>;
> 	cd-gpios = <&pio 6 0 GPIO_ACTIVE_HIGH>; /* PG0 */
> 	cd-inverted;
> 	status = "okay";
> };
> 
> &otg_sram {
> 	status = "okay";
> };
> 
> &pio {
> 	mmc0_cd_pin_d709: mmc0_cd_pin@0 {
> 		allwinner,pins = "PG0";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
> 	};
> 
> 	usb0_vbus_detect_pin: usb0_vbus_detect_pin@0 {
> 		allwinner,pins = "PG1";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_DOWN>;
> 	};
> 
> 	usb0_id_detect_pin: usb0_id_detect_pin@0 {
> 		allwinner,pins = "PG2";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
> 	};
> };
> 
> &pwm {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&pwm0_pins>;
> 	status = "okay";
> };
> 
> &reg_dcdc2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <1000000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-cpu";
> };
> 
> &reg_dcdc3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <1250000>;
> 	regulator-max-microvolt = <1250000>;
> 	regulator-name = "vdd-int-pll";
> };
> 
> &reg_ldo1 {
> 	regulator-name = "vdd-rtc";
> };
> 
> &reg_ldo2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
> 	regulator-name = "avcc";
> };
> 
> &reg_ldo3 {
> 	regulator-min-microvolt = <3300000>;
> 	regulator-max-microvolt = <3300000>;
> 	regulator-name = "vcc-wifi";
> };
> 
> &reg_usb0_vbus {
> 	gpio = <&pio 6 12 GPIO_ACTIVE_HIGH>; /* PG12 */
> 	status = "okay";
> };
> 
> &uart1 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&uart1_pins_b>;
> 	status = "okay";
> };
> 
> &usb_otg {
> 	dr_mode = "otg";
> 	status = "okay";
> };
> 
> &usb0_vbus_pin_a {
> 	allwinner,pins = "PG12";
> };
> 
> &usbphy {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&usb0_id_detect_pin>, <&usb0_vbus_detect_pin>;
> 	usb0_id_det-gpio = <&pio 6 2 GPIO_ACTIVE_HIGH>; /* PG2 */
> 	usb0_vbus_det-gpio = <&pio 6 1 GPIO_ACTIVE_HIGH>; /* PG1 */
> 	usb0_vbus-supply = <&reg_usb0_vbus>;
> 	usb1_vbus-supply = <&reg_ldo3>;
> 	status = "okay";
diff -r u-boot/arch/arm/dts/sun5i-a13.dtsi u-boot-2016.09-rc2/arch/arm/dts/sun5i-a13.dtsi
64,65c64
< 			clocks = <&ahb_gates 36>, <&ahb_gates 44>, <&de_be_clk>,
< 				 <&tcon_ch0_clk>, <&dram_gates 26>;
---
> 			clocks = <&pll5 1>, <&ahb_gates 36>, <&ahb_gates 44>;
114,115c113,114
< 					<28>, <32>, <34>,
< 					<36>, <40>, <44>,
---
> 				        <28>, <32>, <36>,
> 				        <40>, <44>,
124,125c123,124
< 					     "ahb_stimer", "ahb_ve", "ahb_tve",
< 					     "ahb_lcd", "ahb_csi", "ahb_de_be",
---
> 					     "ahb_stimer", "ahb_ve", "ahb_lcd",
> 					     "ahb_csi", "ahb_de_be",
153,212d151
< 
< 		dram_gates: clk@01c20100 {
< 			#clock-cells = <1>;
< 			compatible = "allwinner,sun5i-a13-dram-gates-clk",
< 				     "allwinner,sun4i-a10-gates-clk";
< 			reg = <0x01c20100 0x4>;
< 			clocks = <&pll5 0>;
< 			clock-indices = <0>,
< 					<1>,
< 					<25>,
< 					<26>,
< 					<29>,
< 					<31>;
< 			clock-output-names = "dram_ve",
< 					     "dram_csi",
< 					     "dram_de_fe",
< 					     "dram_de_be",
< 					     "dram_ace",
< 					     "dram_iep";
< 		};
< 
< 		de_be_clk: clk@01c20104 {
< 			#clock-cells = <0>;
< 			#reset-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-display-clk";
< 			reg = <0x01c20104 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll5 1>;
< 			clock-output-names = "de-be";
< 		};
< 
< 		de_fe_clk: clk@01c2010c {
< 			#clock-cells = <0>;
< 			#reset-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-display-clk";
< 			reg = <0x01c2010c 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll5 1>;
< 			clock-output-names = "de-fe";
< 		};
< 
< 		tcon_ch0_clk: clk@01c20118 {
< 			#clock-cells = <0>;
< 			#reset-cells = <1>;
< 			compatible = "allwinner,sun4i-a10-tcon-ch0-clk";
< 			reg = <0x01c20118 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll3x2>, <&pll7x2>;
< 			clock-output-names = "tcon-ch0-sclk";
< 		};
< 
< 		tcon_ch1_clk: clk@01c2012c {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-tcon-ch1-clk";
< 			reg = <0x01c2012c 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll3x2>, <&pll7x2>;
< 			clock-output-names = "tcon-ch1-sclk";
< 		};
< 	};
< 
< 	display-engine {
< 		compatible = "allwinner,sun5i-a13-display-engine";
< 		allwinner,pipelines = <&fe0>;
216,253d154
< 		tcon0: lcd-controller@01c0c000 {
< 			compatible = "allwinner,sun5i-a13-tcon";
< 			reg = <0x01c0c000 0x1000>;
< 			interrupts = <44>;
< 			resets = <&tcon_ch0_clk 1>;
< 			reset-names = "lcd";
< 			clocks = <&ahb_gates 36>,
< 				 <&tcon_ch0_clk>,
< 				 <&tcon_ch1_clk>;
< 			clock-names = "ahb",
< 				      "tcon-ch0",
< 				      "tcon-ch1";
< 			clock-output-names = "tcon-pixel-clock";
< 			status = "disabled";
< 
< 			ports {
< 				#address-cells = <1>;
< 				#size-cells = <0>;
< 
< 				tcon0_in: port@0 {
< 					#address-cells = <1>;
< 					#size-cells = <0>;
< 					reg = <0>;
< 
< 					tcon0_in_be0: endpoint@0 {
< 						reg = <0>;
< 						remote-endpoint = <&be0_out_tcon0>;
< 					};
< 				};
< 
< 				tcon0_out: port@1 {
< 					#address-cells = <1>;
< 					#size-cells = <0>;
< 					reg = <1>;
< 				};
< 			};
< 		};
< 
261,329d161
< 
< 		fe0: display-frontend@01e00000 {
< 			compatible = "allwinner,sun5i-a13-display-frontend";
< 			reg = <0x01e00000 0x20000>;
< 			interrupts = <47>;
< 			clocks = <&ahb_gates 46>, <&de_fe_clk>,
< 				 <&dram_gates 25>;
< 			clock-names = "ahb", "mod",
< 				      "ram";
< 			resets = <&de_fe_clk>;
< 			status = "disabled";
< 
< 			ports {
< 				#address-cells = <1>;
< 				#size-cells = <0>;
< 
< 				fe0_out: port@1 {
< 					#address-cells = <1>;
< 					#size-cells = <0>;
< 					reg = <1>;
< 
< 					fe0_out_be0: endpoint@0 {
< 						reg = <0>;
< 						remote-endpoint = <&be0_in_fe0>;
< 					};
< 				};
< 			};
< 		};
< 
< 		be0: display-backend@01e60000 {
< 			compatible = "allwinner,sun5i-a13-display-backend";
< 			reg = <0x01e60000 0x10000>;
< 			clocks = <&ahb_gates 44>, <&de_be_clk>,
< 				 <&dram_gates 26>;
< 			clock-names = "ahb", "mod",
< 				      "ram";
< 			resets = <&de_be_clk>;
< 			status = "disabled";
< 
< 			assigned-clocks = <&de_be_clk>;
< 			assigned-clock-rates = <300000000>;
< 
< 			ports {
< 				#address-cells = <1>;
< 				#size-cells = <0>;
< 
< 				be0_in: port@0 {
< 					#address-cells = <1>;
< 					#size-cells = <0>;
< 					reg = <0>;
< 
< 					be0_in_fe0: endpoint@0 {
< 						reg = <0>;
< 						remote-endpoint = <&fe0_out_be0>;
< 					};
< 				};
< 
< 				be0_out: port@1 {
< 					#address-cells = <1>;
< 					#size-cells = <0>;
< 					reg = <1>;
< 
< 					be0_out_tcon0: endpoint@0 {
< 						reg = <0>;
< 						remote-endpoint = <&tcon0_in_be0>;
< 					};
< 				};
< 			};
< 		};
351,360d182
< 
< 	lcd_rgb666_pins: lcd_rgb666@0 {
< 		allwinner,pins = "PD2", "PD3", "PD4", "PD5", "PD6", "PD7",
< 				 "PD10", "PD11", "PD12", "PD13", "PD14", "PD15",
< 				 "PD18", "PD19", "PD20", "PD21", "PD22", "PD23",
< 				 "PD24", "PD25", "PD26", "PD27";
< 		allwinner,function = "lcd0";
< 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
< 	};
Only in u-boot/arch/arm/dts: sun5i-a13-empire-electronix-m712.dts
diff -r u-boot/arch/arm/dts/sun5i-a13-olinuxino.dts u-boot-2016.09-rc2/arch/arm/dts/sun5i-a13-olinuxino.dts
157a158,172
> &nfc {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&nand_pins_a &nand_cs0_pins_a &nand_rb0_pins_a>;
> 	status = "okay";
> 
> 	nand@0 {
> 		#address-cells = <2>;
> 		#size-cells = <2>;
> 		reg = <0>;
> 		allwinner,rb = <0>;
> 		nand-ecc-mode = "hw";
> 		allwinner,randomize;
> 	};
> };
> 
diff -r u-boot/arch/arm/dts/sun5i-a13-olinuxino-micro.dts u-boot-2016.09-rc2/arch/arm/dts/sun5i-a13-olinuxino-micro.dts
112,115d111
< &otg_sram {
< 	status = "okay";
< };
< 
131,151d126
< 	usb0_id_detect_pin: usb0_id_detect_pin@0 {
< 		allwinner,pins = "PG2";
< 		allwinner,function = "gpio_in";
< 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
< 	};
< 
< 	usb0_vbus_detect_pin: usb0_vbus_detect_pin@0 {
< 		allwinner,pins = "PG1";
< 		allwinner,function = "gpio_in";
< 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 		allwinner,pull = <SUN4I_PINCTRL_PULL_DOWN>;
< 	};
< 
< 	usb0_vbus_pin_olinuxinom: usb0_vbus_pin@0 {
< 		allwinner,pins = "PG12";
< 		allwinner,function = "gpio_out";
< 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
< 	};
< 
160,165d134
< &reg_usb0_vbus {
< 	pinctrl-0 = <&usb0_vbus_pin_olinuxinom>;
< 	gpio = <&pio 6 12 GPIO_ACTIVE_HIGH>;
< 	status = "okay";
< };
< 
178,182d146
< &usb_otg {
< 	dr_mode = "otg";
< 	status = "okay";
< };
< 
184,188d147
< 	pinctrl-names = "default";
< 	pinctrl-0 = <&usb0_id_detect_pin>, <&usb0_vbus_detect_pin>;
< 	usb0_id_det-gpio = <&pio 6 2 GPIO_ACTIVE_HIGH>; /* PG2 */
< 	usb0_vbus_det-gpio = <&pio 6 1 GPIO_ACTIVE_HIGH>; /* PG1 */
< 	usb0_vbus-supply = <&reg_usb0_vbus>;
diff -r u-boot/arch/arm/dts/sun5i-a13-q8-tablet.dts u-boot-2016.09-rc2/arch/arm/dts/sun5i-a13-q8-tablet.dts
45c45
< #include "sun5i-reference-design-tablet.dtsi"
---
> #include "sun5i-q8-common.dtsi"
50,72d49
< 
< 	panel: panel {
< 		compatible = "urt,umsh-8596md-t", "simple-panel";
< 		#address-cells = <1>;
< 		#size-cells = <0>;
< 
< 		port@0 {
< 			reg = <0>;
< 			/* TODO: lcd panel uses axp gpio0 as enable pin */
< 			backlight = <&backlight>;
< 			#address-cells = <1>;
< 			#size-cells = <0>;
< 
< 			panel_input: endpoint@0 {
< 				reg = <0>;
< 				remote-endpoint = <&tcon0_out_lcd>;
< 			};
< 		};
< 	};
< };
< 
< &be0 {
< 	status = "okay";
75,78c52,55
< &tcon0 {
< 	pinctrl-names = "default";
< 	pinctrl-0 = <&lcd_rgb666_pins>;
< 	status = "okay";
---
> &reg_ldo3 {
> 	regulator-min-microvolt = <3300000>;
> 	regulator-max-microvolt = <3300000>;
> 	regulator-name = "vcc-wifi";
81,85c58,59
< &tcon0_out {
< 	tcon0_out_lcd: endpoint@0 {
< 		reg = <0>;
< 		remote-endpoint = <&panel_input>;
< 	};
---
> &usbphy {
> 	usb1_vbus-supply = <&reg_ldo3>;
diff -r u-boot/arch/arm/dts/sun5i-a13-utoo-p66.dts u-boot-2016.09-rc2/arch/arm/dts/sun5i-a13-utoo-p66.dts
45c45,47
< #include "sun5i-reference-design-tablet.dtsi"
---
> #include "sunxi-common-regulators.dtsi"
> #include <dt-bindings/gpio/gpio.h>
> #include <dt-bindings/input/input.h>
46a49,50
> #include <dt-bindings/pinctrl/sun4i-a10.h>
> #include <dt-bindings/pwm/pwm.h>
52,58c56,62
< 	/* The P66 uses the uart pins as gpios */
< 	aliases {
< 		/delete-property/serial0;
< 	};
< 
< 	chosen {
< 		/delete-property/stdout-path;
---
> 	backlight: backlight {
> 		compatible = "pwm-backlight";
> 		pwms = <&pwm 0 50000 PWM_POLARITY_INVERTED>;
> 		/* Note levels of 10 / 20% result in backlight off */
> 		brightness-levels = <0 30 40 50 60 70 80 90 100>;
> 		default-brightness-level = <6>;
> 		/* TODO: backlight uses axp gpio1 as enable pin */
72,77d75
< &backlight {
< 	/* Note levels of 10 / 20% result in backlight off */
< 	brightness-levels = <0 30 40 50 60 70 80 90 100>;
< 	default-brightness-level = <6>;
< };
< 
78a77,78
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&codec_pa_pin>;
79a80
> 	status = "okay";
82,83c83,84
< &codec_pa_pin {
< 	allwinner,pins = "PG3";
---
> &cpu0 {
> 	cpu-supply = <&reg_dcdc2>;
85a87,103
> &ehci0 {
> 	status = "okay";
> };
> 
> &i2c0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&i2c0_pins_a>;
> 	status = "okay";
> 
> 	axp209: pmic@34 {
> 		reg = <0x34>;
> 		interrupts = <0>;
> 	};
> };
> 
> #include "axp209.dtsi"
> 
86a105,108
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&i2c1_pins_a>;
> 	status = "okay";
> 
99a122,155
> 
> 	pcf8563: rtc@51 {
> 		compatible = "nxp,pcf8563";
> 		reg = <0x51>;
> 	};
> };
> 
> &lradc {
> 	vref-supply = <&reg_ldo2>;
> 	status = "okay";
> 
> 	button@200 {
> 		label = "Volume Up";
> 		linux,code = <KEY_VOLUMEUP>;
> 		channel = <0>;
> 		voltage = <200000>;
> 	};
> 
> 	button@400 {
> 		label = "Volume Down";
> 		linux,code = <KEY_VOLUMEDOWN>;
> 		channel = <0>;
> 		voltage = <400000>;
> 	};
> };
> 
> &mmc0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&mmc0_pins_a>, <&mmc0_cd_pin_p66>;
> 	vmmc-supply = <&reg_vcc3v3>;
> 	bus-width = <4>;
> 	cd-gpios = <&pio 6 0 GPIO_ACTIVE_HIGH>; /* PG0 */
> 	cd-inverted;
> 	status = "okay";
116a173,176
> &otg_sram {
> 	status = "okay";
> };
> 
117a178,205
> 	codec_pa_pin: codec_pa_pin@0 {
> 		allwinner,pins = "PG3";
> 		allwinner,function = "gpio_out";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
> 	};
> 
> 	mmc0_cd_pin_p66: mmc0_cd_pin@0 {
> 		allwinner,pins = "PG0";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
> 	};
> 
> 	usb0_vbus_detect_pin: usb0_vbus_detect_pin@0 {
> 		allwinner,pins = "PG1";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_DOWN>;
> 	};
> 
> 	usb0_id_detect_pin: usb0_id_detect_pin@0 {
> 		allwinner,pins = "PG2";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
> 	};
> 
131a220,262
> 	usb0_vbus_pin_a: usb0_vbus_pin@0 {
> 		allwinner,pins = "PB4";
> 		allwinner,function = "gpio_out";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
> 	};
> };
> 
> &pwm {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&pwm0_pins>;
> 	status = "okay";
> };
> 
> &reg_dcdc2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <1000000>;
> 	regulator-max-microvolt = <1500000>;
> 	regulator-name = "vdd-cpu";
> };
> 
> &reg_dcdc3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <1000000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-int-pll";
> };
> 
> &reg_ldo1 {
> 	regulator-name = "vdd-rtc";
> };
> 
> &reg_ldo2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
> 	regulator-name = "avcc";
> };
> 
> &reg_ldo3 {
> 	regulator-min-microvolt = <3300000>;
> 	regulator-max-microvolt = <3300000>;
> 	regulator-name = "vcc-wifi";
135a267
> 	status = "okay";
138,140c270,272
< &uart1 {
< 	/* The P66 uses the uart pins as gpios */
< 	status = "disabled";
---
> &usb_otg {
> 	dr_mode = "otg";
> 	status = "okay";
143,144c275,282
< &usb0_vbus_pin_a {
< 	allwinner,pins = "PB4";
---
> &usbphy {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&usb0_id_detect_pin>, <&usb0_vbus_detect_pin>;
> 	usb0_id_det-gpio = <&pio 6 2 GPIO_ACTIVE_HIGH>; /* PG2 */
> 	usb0_vbus_det-gpio = <&pio 6 1 GPIO_ACTIVE_HIGH>; /* PG1 */
> 	usb0_vbus-supply = <&reg_usb0_vbus>;
> 	usb1_vbus-supply = <&reg_ldo3>;
> 	status = "okay";
diff -r u-boot/arch/arm/dts/sun5i.dtsi u-boot-2016.09-rc2/arch/arm/dts/sun5i.dtsi
91,99d90
< 		osc3M: osc3M_clk {
< 			compatible = "fixed-factor-clock";
< 			#clock-cells = <0>;
< 			clock-div = <8>;
< 			clock-mult = <1>;
< 			clocks = <&osc24M>;
< 			clock-output-names = "osc3M";
< 		};
< 
124,140d114
< 		pll3: clk@01c20010 {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-pll3-clk";
< 			reg = <0x01c20010 0x4>;
< 			clocks = <&osc3M>;
< 			clock-output-names = "pll3";
< 		};
< 
< 		pll3x2: pll3x2_clk {
< 			compatible = "allwinner,sun4i-a10-pll3-2x-clk", "fixed-factor-clock";
< 			#clock-cells = <0>;
< 			clock-div = <1>;
< 			clock-mult = <2>;
< 			clocks = <&pll3>;
< 			clock-output-names = "pll3-2x";
< 		};
< 
165,181d138
< 		pll7: clk@01c20030 {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-pll3-clk";
< 			reg = <0x01c20030 0x4>;
< 			clocks = <&osc3M>;
< 			clock-output-names = "pll7";
< 		};
< 
< 		pll7x2: pll7x2_clk {
< 			compatible = "fixed-factor-clock";
< 			#clock-cells = <0>;
< 			clock-div = <1>;
< 			clock-mult = <2>;
< 			clocks = <&pll7>;
< 			clock-output-names = "pll7-2x";
< 		};
< 
401a359,369
> 		nfc: nand@01c03000 {
> 			compatible = "allwinner,sun4i-a10-nand";
> 			reg = <0x01c03000 0x1000>;
> 			interrupts = <37>;
> 			clocks = <&ahb_gates 13>, <&nand_clk>;
> 			clock-names = "ahb", "mod";
> 			#address-cells = <1>;
> 			#size-cells = <0>;
> 			status = "disabled";
> 		};
> 
591a560,597
> 			};
> 
> 			nand_pins_a: nand_base0@0 {
> 				allwinner,pins = "PC0", "PC1", "PC2",
> 						"PC5", "PC8", "PC9", "PC10",
> 						"PC11", "PC12", "PC13", "PC14",
> 						"PC15";
> 				allwinner,function = "nand0";
> 				allwinner,drive = <0>;
> 				allwinner,pull = <0>;
> 			};
> 
> 			nand_cs0_pins_a: nand_cs@0 {
> 				allwinner,pins = "PC4";
> 				allwinner,function = "nand0";
> 				allwinner,drive = <0>;
> 				allwinner,pull = <0>;
> 			};
> 
> 			nand_cs1_pins_a: nand_cs@1 {
> 				allwinner,pins = "PC3";
> 				allwinner,function = "nand0";
> 				allwinner,drive = <0>;
> 				allwinner,pull = <0>;
> 			};
> 
> 			nand_rb0_pins_a: nand_rb@0 {
> 				allwinner,pins = "PC6";
> 				allwinner,function = "nand0";
> 				allwinner,drive = <0>;
> 				allwinner,pull = <0>;
> 			};
> 
> 			nand_rb1_pins_a: nand_rb@1 {
> 				allwinner,pins = "PC7";
> 				allwinner,function = "nand0";
> 				allwinner,drive = <0>;
> 				allwinner,pull = <0>;
diff -r u-boot/arch/arm/dts/sun5i-r8-chip.dts u-boot-2016.09-rc2/arch/arm/dts/sun5i-r8-chip.dts
55c55
< 	compatible = "nextthing,chip", "allwinner,sun5i-r8", "allwinner,sun5i-a13";
---
> 	compatible = "nextthing,chip", "allwinner,sun5i-r8";
81,84d80
< &be0 {
< 	status = "okay";
< };
< 
148a145,159
> &nfc {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&nand_pins_a &nand_cs0_pins_a &nand_rb0_pins_a>;
> 	status = "okay";
> 
> 	nand@0 {
> 		#address-cells = <2>;
> 		#size-cells = <2>;
> 		reg = <0>;
> 		allwinner,rb = <0>;
> 		nand-ecc-mode = "hw";
> 		nand-on-flash-bbt;
> 	};
> };
> 
229,236d239
< 	status = "okay";
< };
< 
< &tcon0 {
< 	status = "okay";
< };
< 
< &tve0 {
diff -r u-boot/arch/arm/dts/sun5i-r8.dtsi u-boot-2016.09-rc2/arch/arm/dts/sun5i-r8.dtsi
54,56c54,55
< 			clocks = <&ahb_gates 34>, <&ahb_gates 36>,
< 				 <&ahb_gates 44>, <&de_be_clk>,
< 				 <&tcon_ch1_clk>, <&dram_gates 26>;
---
> 			clocks = <&pll5 1>, <&ahb_gates 34>, <&ahb_gates 36>,
> 				 <&ahb_gates 44>;
59,85d57
< 	};
< 
< 	soc@01c00000 {
< 		tve0: tv-encoder@01c0a000 {
< 			compatible = "allwinner,sun4i-a10-tv-encoder";
< 			reg = <0x01c0a000 0x1000>;
< 			clocks = <&ahb_gates 34>;
< 			resets = <&tcon_ch0_clk 0>;
< 			status = "disabled";
< 
< 			port {
< 				#address-cells = <1>;
< 				#size-cells = <0>;
< 
< 				tve0_in_tcon0: endpoint@0 {
< 					reg = <0>;
< 					remote-endpoint = <&tcon0_out_tve0>;
< 				};
< 			};
< 		};
< 	};
< };
< 
< &tcon0_out {
< 	tcon0_out_tve0: endpoint@1 {
< 		reg = <1>;
< 		remote-endpoint = <&tve0_in_tcon0>;
Only in u-boot/arch/arm/dts: sun5i-reference-design-tablet.dtsi
diff -r u-boot/arch/arm/dts/sun6i-a31.dtsi u-boot-2016.09-rc2/arch/arm/dts/sun6i-a31.dtsi
472,473c472
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
492,493c491
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
512,513c510
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
532,533c529
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
diff -r u-boot/arch/arm/dts/sun6i-a31-m9.dts u-boot-2016.09-rc2/arch/arm/dts/sun6i-a31-m9.dts
68c68
< 			label = "m9:blue:pwr";
---
> 			label = "m9:blue:usr";
70d69
< 			default-state = "on";
75,78d73
< &cpu0 {
< 	cpu-supply = <&reg_dcdc3>;
< };
< 
92d86
< 	phy-supply = <&reg_dldo1>;
109c103
< 	vmmc-supply = <&reg_dcdc1>;
---
> 	vmmc-supply = <&reg_vcc3v3>;
116,128d109
< &p2wi {
< 	status = "okay";
< 
< 	axp22x: pmic@68 {
< 		compatible = "x-powers,axp221";
< 		reg = <0x68>;
< 		interrupt-parent = <&nmi_intc>;
< 		interrupts = <0 IRQ_TYPE_LEVEL_LOW>;
< 	};
< };
< 
< #include "axp22x.dtsi"
< 
152,223d132
< &reg_aldo1 {
< 	regulator-min-microvolt = <3300000>;
< 	regulator-max-microvolt = <3300000>;
< 	regulator-name = "vcc-wifi";
< };
< 
< &reg_aldo3 {
< 	regulator-always-on;
< 	regulator-min-microvolt = <2700000>;
< 	regulator-max-microvolt = <3300000>;
< 	regulator-name = "avcc";
< };
< 
< &reg_dc5ldo {
< 	regulator-always-on;
< 	regulator-min-microvolt = <700000>;
< 	regulator-max-microvolt = <1320000>;
< 	regulator-name = "vdd-cpus"; /* This is an educated guess */
< };
< 
< &reg_dcdc1 {
< 	regulator-always-on;
< 	regulator-min-microvolt = <3300000>;
< 	regulator-max-microvolt = <3300000>;
< 	regulator-name = "vcc-3v3";
< };
< 
< &reg_dcdc2 {
< 	regulator-min-microvolt = <700000>;
< 	regulator-max-microvolt = <1320000>;
< 	regulator-name = "vdd-gpu";
< };
< 
< &reg_dcdc3 {
< 	regulator-always-on;
< 	regulator-min-microvolt = <700000>;
< 	regulator-max-microvolt = <1320000>;
< 	regulator-name = "vdd-cpu";
< };
< 
< &reg_dcdc4 {
< 	regulator-always-on;
< 	regulator-min-microvolt = <700000>;
< 	regulator-max-microvolt = <1320000>;
< 	regulator-name = "vdd-sys-dll";
< };
< 
< &reg_dcdc5 {
< 	regulator-always-on;
< 	regulator-min-microvolt = <1500000>;
< 	regulator-max-microvolt = <1500000>;
< 	regulator-name = "vcc-dram";
< };
< 
< &reg_dldo1 {
< 	regulator-min-microvolt = <3300000>;
< 	regulator-max-microvolt = <3300000>;
< 	regulator-name = "vcc-ethernet-phy";
< };
< 
< /*
<  * Both reg_usb1_vbus and reg_dldo4 need to be on for the hub attached
<  * to usb1 to work, and we can list only one usb1_vbus-supply, so dldo4 is
<  * marked as regulator-always-on.
<  */
< &reg_dldo4 {
< 	regulator-always-on;
< 	regulator-min-microvolt = <3300000>;
< 	regulator-max-microvolt = <3300000>;
< 	regulator-name = "vcc-usb-hub";
< };
< 
239d147
< 	usb2_vbus-supply = <&reg_aldo1>;
diff -r u-boot/arch/arm/dts/sun6i-a31-mele-a1000g-quad.dts u-boot-2016.09-rc2/arch/arm/dts/sun6i-a31-mele-a1000g-quad.dts
68c68
< 			label = "a1000g:blue:pwr";
---
> 			label = "m9:blue:usr";
70d69
< 			default-state = "on";
75,78d73
< &cpu0 {
< 	cpu-supply = <&reg_dcdc3>;
< };
< 
92d86
< 	phy-supply = <&reg_dldo1>;
109c103
< 	vmmc-supply = <&reg_dcdc1>;
---
> 	vmmc-supply = <&reg_vcc3v3>;
116,128d109
< &p2wi {
< 	status = "okay";
< 
< 	axp22x: pmic@68 {
< 		compatible = "x-powers,axp221";
< 		reg = <0x68>;
< 		interrupt-parent = <&nmi_intc>;
< 		interrupts = <0 IRQ_TYPE_LEVEL_LOW>;
< 	};
< };
< 
< #include "axp22x.dtsi"
< 
152,223d132
< &reg_aldo1 {
< 	regulator-min-microvolt = <3300000>;
< 	regulator-max-microvolt = <3300000>;
< 	regulator-name = "vcc-wifi";
< };
< 
< &reg_aldo3 {
< 	regulator-always-on;
< 	regulator-min-microvolt = <2700000>;
< 	regulator-max-microvolt = <3300000>;
< 	regulator-name = "avcc";
< };
< 
< &reg_dc5ldo {
< 	regulator-always-on;
< 	regulator-min-microvolt = <700000>;
< 	regulator-max-microvolt = <1320000>;
< 	regulator-name = "vdd-cpus"; /* This is an educated guess */
< };
< 
< &reg_dcdc1 {
< 	regulator-always-on;
< 	regulator-min-microvolt = <3300000>;
< 	regulator-max-microvolt = <3300000>;
< 	regulator-name = "vcc-3v3";
< };
< 
< &reg_dcdc2 {
< 	regulator-min-microvolt = <700000>;
< 	regulator-max-microvolt = <1320000>;
< 	regulator-name = "vdd-gpu";
< };
< 
< &reg_dcdc3 {
< 	regulator-always-on;
< 	regulator-min-microvolt = <700000>;
< 	regulator-max-microvolt = <1320000>;
< 	regulator-name = "vdd-cpu";
< };
< 
< &reg_dcdc4 {
< 	regulator-always-on;
< 	regulator-min-microvolt = <700000>;
< 	regulator-max-microvolt = <1320000>;
< 	regulator-name = "vdd-sys-dll";
< };
< 
< &reg_dcdc5 {
< 	regulator-always-on;
< 	regulator-min-microvolt = <1500000>;
< 	regulator-max-microvolt = <1500000>;
< 	regulator-name = "vcc-dram";
< };
< 
< &reg_dldo1 {
< 	regulator-min-microvolt = <3300000>;
< 	regulator-max-microvolt = <3300000>;
< 	regulator-name = "vcc-ethernet-phy";
< };
< 
< /*
<  * Both reg_usb1_vbus and reg_dldo4 need to be on for the hub attached
<  * to usb1 to work, and we can list only one usb1_vbus-supply, so dldo4 is
<  * marked as regulator-always-on.
<  */
< &reg_dldo4 {
< 	regulator-always-on;
< 	regulator-min-microvolt = <3300000>;
< 	regulator-max-microvolt = <3300000>;
< 	regulator-name = "vcc-usb-hub";
< };
< 
244d152
< 	usb2_vbus-supply = <&reg_aldo1>;
diff -r u-boot/arch/arm/dts/sun6i-a31s-colorfly-e708-q1.dts u-boot-2016.09-rc2/arch/arm/dts/sun6i-a31s-colorfly-e708-q1.dts
45c45,49
< #include "sun6i-reference-design-tablet.dtsi"
---
> #include "sunxi-common-regulators.dtsi"
> 
> #include <dt-bindings/gpio/gpio.h>
> #include <dt-bindings/input/input.h>
> #include <dt-bindings/pinctrl/sun4i-a10.h>
49a54,70
> 
> 	aliases {
> 		serial0 = &uart0;
> 	};
> 
> 	chosen {
> 		stdout-path = "serial0:115200n8";
> 	};
> };
> 
> &cpu0 {
> 	cpu-supply = <&reg_dcdc3>;
> };
> 
> &ehci0 {
> 	/* rtl8188etv wifi is connected here */
> 	status = "okay";
63a85,181
> &mmc0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&mmc0_pins_a>, <&mmc0_cd_pin_e708_q1>;
> 	vmmc-supply = <&reg_dcdc1>;
> 	bus-width = <4>;
> 	cd-gpios = <&pio 0 8 GPIO_ACTIVE_HIGH>; /* PA8 */
> 	cd-inverted;
> 	status = "okay";
> };
> 
> &pio {
> 	mma8452_int_e708_q1: mma8452_int_pin@0 {
> 		allwinner,pins = "PA9";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
> 	};
> 
> 	mmc0_cd_pin_e708_q1: mmc0_cd_pin@0 {
> 		allwinner,pins = "PA8";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
> 	};
> };
> 
> &p2wi {
> 	status = "okay";
> 
> 	axp22x: pmic@68 {
> 		compatible = "x-powers,axp221";
> 		reg = <0x68>;
> 		interrupt-parent = <&nmi_intc>;
> 		interrupts = <0 IRQ_TYPE_LEVEL_LOW>;
> 	};
> };
> 
> #include "axp22x.dtsi"
> 
> &reg_aldo3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <2700000>;
> 	regulator-max-microvolt = <3300000>;
> 	regulator-name = "avcc";
> };
> 
> &reg_dc1sw {
> 	regulator-name = "vcc-lcd";
> };
> 
> &reg_dc5ldo {
> 	regulator-always-on;
> 	regulator-min-microvolt = <700000>;
> 	regulator-max-microvolt = <1320000>;
> 	regulator-name = "vdd-cpus"; /* This is an educated guess */
> };
> 
> &reg_dcdc1 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
> 	regulator-name = "vcc-3v0";
> };
> 
> &reg_dcdc2 {
> 	regulator-min-microvolt = <700000>;
> 	regulator-max-microvolt = <1320000>;
> 	regulator-name = "vdd-gpu";
> };
> 
> &reg_dcdc3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <700000>;
> 	regulator-max-microvolt = <1320000>;
> 	regulator-name = "vdd-cpu";
> };
> 
> &reg_dcdc4 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <700000>;
> 	regulator-max-microvolt = <1320000>;
> 	regulator-name = "vdd-sys-dll";
> };
> 
> &reg_dcdc5 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <1500000>;
> 	regulator-max-microvolt = <1500000>;
> 	regulator-name = "vcc-dram";
> };
> 
> &reg_dldo1 {
> 	regulator-min-microvolt = <3300000>;
> 	regulator-max-microvolt = <3300000>;
> 	regulator-name = "vcc-wifi";
> };
> 
70a189
> 	vcc-lcd-supply = <&reg_dc1sw>;
71a191,207
> };
> 
> /*
>  * FIXME for now we only support host mode and rely on u-boot to have
>  * turned on Vbus which is controlled by the axp221 pmic on the board.
>  *
>  * Once we have axp221 power-supply and vbus-usb support we should switch
>  * to fully supporting otg.
>  */
> &usb_otg {
> 	dr_mode = "host";
> 	status = "okay";
> };
> 
> &usbphy {
> 	usb1_vbus-supply = <&reg_dldo1>;
> 	status = "okay";
Only in u-boot/arch/arm/dts: sun6i-a31s-inet-q972.dts
diff -r u-boot/arch/arm/dts/sun6i-a31s-primo81.dts u-boot-2016.09-rc2/arch/arm/dts/sun6i-a31s-primo81.dts
55a56,63
> 
> 	aliases {
> 		serial0 = &uart0;
> 	};
> 
> 	chosen {
> 		stdout-path = "serial0:115200n8";
> 	};
178a187,188
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
diff -r u-boot/arch/arm/dts/sun6i-a31s-yones-toptech-bs1078-v2.dts u-boot-2016.09-rc2/arch/arm/dts/sun6i-a31s-yones-toptech-bs1078-v2.dts
137a138,139
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
Only in u-boot/arch/arm/dts: sun6i-reference-design-tablet.dtsi
Only in u-boot/arch/arm/dts: sun7i-a20-bananapi-m1-plus.dts
diff -r u-boot/arch/arm/dts/sun7i-a20-cubietruck.dts u-boot-2016.09-rc2/arch/arm/dts/sun7i-a20-cubietruck.dts
97,114d96
< 
< 	sound {
< 		compatible = "simple-audio-card";
< 		simple-audio-card,name = "On-board SPDIF";
< 
< 		simple-audio-card,cpu {
< 			sound-dai = <&spdif>;
< 		};
< 
< 		simple-audio-card,codec {
< 			sound-dai = <&spdif_out>;
< 		};
< 	};
< 
< 	spdif_out: spdif-out {
< 		#sound-dai-cells = <0>;
< 		compatible = "linux,spdif-dit";
< 	};
319,324d300
< 	status = "okay";
< };
< 
< &spdif {
< 	pinctrl-names = "default";
< 	pinctrl-0 = <&spdif_tx_pins_a>;
diff -r u-boot/arch/arm/dts/sun7i-a20.dtsi u-boot-2016.09-rc2/arch/arm/dts/sun7i-a20.dtsi
70,72c70,71
< 			clocks = <&ahb_gates 36>, <&ahb_gates 43>,
< 				 <&ahb_gates 44>, <&de_be0_clk>,
< 				 <&tcon0_ch1_clk>, <&dram_gates 26>;
---
> 			clocks = <&pll5 1>, <&ahb_gates 36>, <&ahb_gates 43>,
> 				 <&ahb_gates 44>, <&dram_gates 26>;
80,81c79
< 			clocks = <&ahb_gates 36>, <&ahb_gates 44>,
< 				 <&de_be0_clk>, <&tcon0_ch0_clk>,
---
> 			clocks = <&pll5 1>, <&ahb_gates 36>, <&ahb_gates 44>,
90,93c88,89
< 			clocks = <&ahb_gates 34>, <&ahb_gates 36>,
< 				 <&ahb_gates 44>,
< 				 <&de_be0_clk>, <&tcon0_ch1_clk>,
< 				 <&dram_gates 5>, <&dram_gates 26>;
---
> 			clocks = <&pll5 1>, <&ahb_gates 34>, <&ahb_gates 36>,
> 				 <&ahb_gates 44>, <&dram_gates 26>;
193,201d188
< 		osc3M: osc3M_clk {
< 			#clock-cells = <0>;
< 			compatible = "fixed-factor-clock";
< 			clock-div = <8>;
< 			clock-mult = <1>;
< 			clocks = <&osc24M>;
< 			clock-output-names = "osc3M";
< 		};
< 
226,242d212
< 		pll3: clk@01c20010 {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-pll3-clk";
< 			reg = <0x01c20010 0x4>;
< 			clocks = <&osc3M>;
< 			clock-output-names = "pll3";
< 		};
< 
< 		pll3x2: pll3x2_clk {
< 			#clock-cells = <0>;
< 			compatible = "fixed-factor-clock";
< 			clocks = <&pll3>;
< 			clock-div = <1>;
< 			clock-mult = <2>;
< 			clock-output-names = "pll3-2x";
< 		};
< 
268,284d237
< 		pll7: clk@01c20030 {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-pll3-clk";
< 			reg = <0x01c20030 0x4>;
< 			clocks = <&osc3M>;
< 			clock-output-names = "pll7";
< 		};
< 
< 		pll7x2: pll7x2_clk {
< 			#clock-cells = <0>;
< 			compatible = "fixed-factor-clock";
< 			clocks = <&pll7>;
< 			clock-div = <1>;
< 			clock-mult = <2>;
< 			clock-output-names = "pll7-2x";
< 		};
< 
374c327
< 				"apb0_ac97", "apb0_i2s0", "apb0_i2s1",
---
> 				"apb0_ac97", "apb0_iis0", "apb0_iis1",
376c329
< 				"apb0_i2s2", "apb0_keypad";
---
> 				"apb0_iis2", "apb0_keypad";
526,558d478
< 		i2s0_clk: clk@01c200b8 {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-mod1-clk";
< 			reg = <0x01c200b8 0x4>;
< 			clocks = <&pll2 SUN4I_A10_PLL2_8X>,
< 				 <&pll2 SUN4I_A10_PLL2_4X>,
< 				 <&pll2 SUN4I_A10_PLL2_2X>,
< 				 <&pll2 SUN4I_A10_PLL2_1X>;
< 			clock-output-names = "i2s0";
< 		};
< 
< 		ac97_clk: clk@01c200bc {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-mod1-clk";
< 			reg = <0x01c200bc 0x4>;
< 			clocks = <&pll2 SUN4I_A10_PLL2_8X>,
< 				 <&pll2 SUN4I_A10_PLL2_4X>,
< 				 <&pll2 SUN4I_A10_PLL2_2X>,
< 				 <&pll2 SUN4I_A10_PLL2_1X>;
< 			clock-output-names = "ac97";
< 		};
< 
< 		spdif_clk: clk@01c200c0 {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-mod1-clk";
< 			reg = <0x01c200c0 0x4>;
< 			clocks = <&pll2 SUN4I_A10_PLL2_8X>,
< 				 <&pll2 SUN4I_A10_PLL2_4X>,
< 				 <&pll2 SUN4I_A10_PLL2_2X>,
< 				 <&pll2 SUN4I_A10_PLL2_1X>;
< 			clock-output-names = "spdif";
< 		};
< 
585,606d504
< 		i2s1_clk: clk@01c200d8 {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-mod1-clk";
< 			reg = <0x01c200d8 0x4>;
< 			clocks = <&pll2 SUN4I_A10_PLL2_8X>,
< 				 <&pll2 SUN4I_A10_PLL2_4X>,
< 				 <&pll2 SUN4I_A10_PLL2_2X>,
< 				 <&pll2 SUN4I_A10_PLL2_1X>;
< 			clock-output-names = "i2s1";
< 		};
< 
< 		i2s2_clk: clk@01c200dc {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-mod1-clk";
< 			reg = <0x01c200dc 0x4>;
< 			clocks = <&pll2 SUN4I_A10_PLL2_8X>,
< 				 <&pll2 SUN4I_A10_PLL2_4X>,
< 				 <&pll2 SUN4I_A10_PLL2_2X>,
< 				 <&pll2 SUN4I_A10_PLL2_1X>;
< 			clock-output-names = "i2s2";
< 		};
< 
632,705d529
< 		de_be0_clk: clk@01c20104 {
< 			#clock-cells = <0>;
< 			#reset-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-display-clk";
< 			reg = <0x01c20104 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll5 1>;
< 			clock-output-names = "de-be0";
< 		};
< 
< 		de_be1_clk: clk@01c20108 {
< 			#clock-cells = <0>;
< 			#reset-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-display-clk";
< 			reg = <0x01c20108 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll5 1>;
< 			clock-output-names = "de-be1";
< 		};
< 
< 		de_fe0_clk: clk@01c2010c {
< 			#clock-cells = <0>;
< 			#reset-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-display-clk";
< 			reg = <0x01c2010c 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll5 1>;
< 			clock-output-names = "de-fe0";
< 		};
< 
< 		de_fe1_clk: clk@01c20110 {
< 			#clock-cells = <0>;
< 			#reset-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-display-clk";
< 			reg = <0x01c20110 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll5 1>;
< 			clock-output-names = "de-fe1";
< 		};
< 
< 		tcon0_ch0_clk: clk@01c20118 {
< 			#clock-cells = <0>;
< 			#reset-cells = <1>;
< 			compatible = "allwinner,sun4i-a10-tcon-ch0-clk";
< 			reg = <0x01c20118 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll3x2>, <&pll7x2>;
< 			clock-output-names = "tcon0-ch0-sclk";
< 
< 		};
< 
< 		tcon1_ch0_clk: clk@01c2011c {
< 			#clock-cells = <0>;
< 			#reset-cells = <1>;
< 			compatible = "allwinner,sun4i-a10-tcon-ch1-clk";
< 			reg = <0x01c2011c 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll3x2>, <&pll7x2>;
< 			clock-output-names = "tcon1-ch0-sclk";
< 
< 		};
< 
< 		tcon0_ch1_clk: clk@01c2012c {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-tcon-ch0-clk";
< 			reg = <0x01c2012c 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll3x2>, <&pll7x2>;
< 			clock-output-names = "tcon0-ch1-sclk";
< 
< 		};
< 
< 		tcon1_ch1_clk: clk@01c20130 {
< 			#clock-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-tcon-ch1-clk";
< 			reg = <0x01c20130 0x4>;
< 			clocks = <&pll3>, <&pll7>, <&pll3x2>, <&pll7x2>;
< 			clock-output-names = "tcon1-ch1-sclk";
< 
< 		};
< 
849,861d672
< 		nfc: nand@01c03000 {
< 			compatible = "allwinner,sun4i-a10-nand";
< 			reg = <0x01c03000 0x1000>;
< 			interrupts = <GIC_SPI 37 IRQ_TYPE_LEVEL_HIGH>;
< 			clocks = <&ahb_gates 13>, <&nand_clk>;
< 			clock-names = "ahb", "mod";
< 			dmas = <&dma SUN4I_DMA_DEDICATED 3>;
< 			dma-names = "rxtx";
< 			status = "disabled";
< 			#address-cells = <1>;
< 			#size-cells = <0>;
< 		};
< 
908,909c719
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
926,927c736
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
944,945c753
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
962,963c770
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
1098,1100c905,907
< 			clk_out_a_pins_a: clk_out_a@0 {
< 				allwinner,pins = "PI12";
< 				allwinner,function = "clk_out_a";
---
> 			pwm0_pins_a: pwm0@0 {
> 				allwinner,pins = "PB2";
> 				allwinner,function = "pwm";
1105,1107c912,914
< 			clk_out_b_pins_a: clk_out_b@0 {
< 				allwinner,pins = "PI13";
< 				allwinner,function = "clk_out_b";
---
> 			pwm1_pins_a: pwm1@0 {
> 				allwinner,pins = "PI3";
> 				allwinner,function = "pwm";
1112,1118c919,921
< 			emac_pins_a: emac0@0 {
< 				allwinner,pins = "PA0", "PA1", "PA2",
< 						"PA3", "PA4", "PA5", "PA6",
< 						"PA7", "PA8", "PA9", "PA10",
< 						"PA11", "PA12", "PA13", "PA14",
< 						"PA15", "PA16";
< 				allwinner,function = "emac";
---
> 			uart0_pins_a: uart0@0 {
> 				allwinner,pins = "PB22", "PB23";
> 				allwinner,function = "uart0";
1123,1129c926,928
< 			gmac_pins_mii_a: gmac_mii@0 {
< 				allwinner,pins = "PA0", "PA1", "PA2",
< 						"PA3", "PA4", "PA5", "PA6",
< 						"PA7", "PA8", "PA9", "PA10",
< 						"PA11", "PA12", "PA13", "PA14",
< 						"PA15", "PA16";
< 				allwinner,function = "gmac";
---
> 			uart2_pins_a: uart2@0 {
> 				allwinner,pins = "PI16", "PI17", "PI18", "PI19";
> 				allwinner,function = "uart2";
1134,1145c933,936
< 			gmac_pins_rgmii_a: gmac_rgmii@0 {
< 				allwinner,pins = "PA0", "PA1", "PA2",
< 						"PA3", "PA4", "PA5", "PA6",
< 						"PA7", "PA8", "PA10",
< 						"PA11", "PA12", "PA13",
< 						"PA15", "PA16";
< 				allwinner,function = "gmac";
< 				/*
< 				 * data lines in RGMII mode use DDR mode
< 				 * and need a higher signal drive strength
< 				 */
< 				allwinner,drive = <SUN4I_PINCTRL_40_MA>;
---
> 			uart3_pins_a: uart3@0 {
> 				allwinner,pins = "PG6", "PG7", "PG8", "PG9";
> 				allwinner,function = "uart3";
> 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
1149,1151c940,942
< 			i2c0_pins_a: i2c0@0 {
< 				allwinner,pins = "PB0", "PB1";
< 				allwinner,function = "i2c0";
---
> 			uart3_pins_b: uart3@1 {
> 				allwinner,pins = "PH0", "PH1";
> 				allwinner,function = "uart3";
1156,1158c947,949
< 			i2c1_pins_a: i2c1@0 {
< 				allwinner,pins = "PB18", "PB19";
< 				allwinner,function = "i2c1";
---
> 			uart4_pins_a: uart4@0 {
> 				allwinner,pins = "PG10", "PG11";
> 				allwinner,function = "uart4";
1163,1165c954,956
< 			i2c2_pins_a: i2c2@0 {
< 				allwinner,pins = "PB20", "PB21";
< 				allwinner,function = "i2c2";
---
> 			uart4_pins_b: uart4@1 {
> 				allwinner,pins = "PH4", "PH5";
> 				allwinner,function = "uart4";
1170,1172c961,963
< 			i2c3_pins_a: i2c3@0 {
< 				allwinner,pins = "PI0", "PI1";
< 				allwinner,function = "i2c3";
---
> 			uart5_pins_a: uart5@0 {
> 				allwinner,pins = "PI10", "PI11";
> 				allwinner,function = "uart5";
1177,1195c968,972
< 			ir0_rx_pins_a: ir0@0 {
< 				    allwinner,pins = "PB4";
< 				    allwinner,function = "ir0";
< 				    allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 				    allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
< 			};
< 
< 			ir0_tx_pins_a: ir0@1 {
< 				    allwinner,pins = "PB3";
< 				    allwinner,function = "ir0";
< 				    allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 				    allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
< 			};
< 
< 			ir1_rx_pins_a: ir1@0 {
< 				    allwinner,pins = "PB23";
< 				    allwinner,function = "ir1";
< 				    allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 				    allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
---
> 			uart6_pins_a: uart6@0 {
> 				allwinner,pins = "PI12", "PI13";
> 				allwinner,function = "uart6";
> 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
1198,1202c975,979
< 			ir1_tx_pins_a: ir1@1 {
< 				    allwinner,pins = "PB22";
< 				    allwinner,function = "ir1";
< 				    allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 				    allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
---
> 			uart7_pins_a: uart7@0 {
> 				allwinner,pins = "PI20", "PI21";
> 				allwinner,function = "uart7";
> 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
1205,1209c982,985
< 			mmc0_pins_a: mmc0@0 {
< 				allwinner,pins = "PF0", "PF1", "PF2",
< 						 "PF3", "PF4", "PF5";
< 				allwinner,function = "mmc0";
< 				allwinner,drive = <SUN4I_PINCTRL_30_MA>;
---
> 			i2c0_pins_a: i2c0@0 {
> 				allwinner,pins = "PB0", "PB1";
> 				allwinner,function = "i2c0";
> 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
1213,1215c989,991
< 			mmc0_cd_pin_reference_design: mmc0_cd_pin@0 {
< 				allwinner,pins = "PH1";
< 				allwinner,function = "gpio_in";
---
> 			i2c1_pins_a: i2c1@0 {
> 				allwinner,pins = "PB18", "PB19";
> 				allwinner,function = "i2c1";
1217c993
< 				allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
---
> 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
1220,1225c996,1000
< 			mmc2_pins_a: mmc2@0 {
< 				allwinner,pins = "PC6", "PC7", "PC8",
< 						 "PC9", "PC10", "PC11";
< 				allwinner,function = "mmc2";
< 				allwinner,drive = <SUN4I_PINCTRL_30_MA>;
< 				allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
---
> 			i2c2_pins_a: i2c2@0 {
> 				allwinner,pins = "PB20", "PB21";
> 				allwinner,function = "i2c2";
> 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
1228,1232c1003,1006
< 			mmc3_pins_a: mmc3@0 {
< 				allwinner,pins = "PI4", "PI5", "PI6",
< 						 "PI7", "PI8", "PI9";
< 				allwinner,function = "mmc3";
< 				allwinner,drive = <SUN4I_PINCTRL_30_MA>;
---
> 			i2c3_pins_a: i2c3@0 {
> 				allwinner,pins = "PI0", "PI1";
> 				allwinner,function = "i2c3";
> 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
1236,1238c1010,1016
< 			ps20_pins_a: ps20@0 {
< 				allwinner,pins = "PI20", "PI21";
< 				allwinner,function = "ps2";
---
> 			emac_pins_a: emac0@0 {
> 				allwinner,pins = "PA0", "PA1", "PA2",
> 						"PA3", "PA4", "PA5", "PA6",
> 						"PA7", "PA8", "PA9", "PA10",
> 						"PA11", "PA12", "PA13", "PA14",
> 						"PA15", "PA16";
> 				allwinner,function = "emac";
1243,1245c1021,1023
< 			ps21_pins_a: ps21@0 {
< 				allwinner,pins = "PH12", "PH13";
< 				allwinner,function = "ps2";
---
> 			clk_out_a_pins_a: clk_out_a@0 {
> 				allwinner,pins = "PI12";
> 				allwinner,function = "clk_out_a";
1250,1252c1028,1030
< 			pwm0_pins_a: pwm0@0 {
< 				allwinner,pins = "PB2";
< 				allwinner,function = "pwm";
---
> 			clk_out_b_pins_a: clk_out_b@0 {
> 				allwinner,pins = "PI13";
> 				allwinner,function = "clk_out_b";
1257,1259c1035,1041
< 			pwm1_pins_a: pwm1@0 {
< 				allwinner,pins = "PI3";
< 				allwinner,function = "pwm";
---
> 			gmac_pins_mii_a: gmac_mii@0 {
> 				allwinner,pins = "PA0", "PA1", "PA2",
> 						"PA3", "PA4", "PA5", "PA6",
> 						"PA7", "PA8", "PA9", "PA10",
> 						"PA11", "PA12", "PA13", "PA14",
> 						"PA15", "PA16";
> 				allwinner,function = "gmac";
1264,1268c1046,1058
< 			spdif_tx_pins_a: spdif@0 {
< 				allwinner,pins = "PB13";
< 				allwinner,function = "spdif";
< 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 				allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
---
> 			gmac_pins_rgmii_a: gmac_rgmii@0 {
> 				allwinner,pins = "PA0", "PA1", "PA2",
> 						"PA3", "PA4", "PA5", "PA6",
> 						"PA7", "PA8", "PA10",
> 						"PA11", "PA12", "PA13",
> 						"PA15", "PA16";
> 				allwinner,function = "gmac";
> 				/*
> 				 * data lines in RGMII mode use DDR mode
> 				 * and need a higher signal drive strength
> 				 */
> 				allwinner,drive = <SUN4I_PINCTRL_40_MA>;
> 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
1334,1337c1124,1128
< 			uart0_pins_a: uart0@0 {
< 				allwinner,pins = "PB22", "PB23";
< 				allwinner,function = "uart0";
< 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
---
> 			mmc0_pins_a: mmc0@0 {
> 				allwinner,pins = "PF0", "PF1", "PF2",
> 						 "PF3", "PF4", "PF5";
> 				allwinner,function = "mmc0";
> 				allwinner,drive = <SUN4I_PINCTRL_30_MA>;
1341,1343c1132,1134
< 			uart2_pins_a: uart2@0 {
< 				allwinner,pins = "PI16", "PI17", "PI18", "PI19";
< 				allwinner,function = "uart2";
---
> 			mmc0_cd_pin_reference_design: mmc0_cd_pin@0 {
> 				allwinner,pins = "PH1";
> 				allwinner,function = "gpio_in";
1345c1136
< 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
---
> 				allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
1348,1352c1139,1144
< 			uart3_pins_a: uart3@0 {
< 				allwinner,pins = "PG6", "PG7", "PG8", "PG9";
< 				allwinner,function = "uart3";
< 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
---
> 			mmc2_pins_a: mmc2@0 {
> 				allwinner,pins = "PC6", "PC7", "PC8",
> 						 "PC9", "PC10", "PC11";
> 				allwinner,function = "mmc2";
> 				allwinner,drive = <SUN4I_PINCTRL_30_MA>;
> 				allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
1355,1358c1147,1151
< 			uart3_pins_b: uart3@1 {
< 				allwinner,pins = "PH0", "PH1";
< 				allwinner,function = "uart3";
< 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
---
> 			mmc3_pins_a: mmc3@0 {
> 				allwinner,pins = "PI4", "PI5", "PI6",
> 						 "PI7", "PI8", "PI9";
> 				allwinner,function = "mmc3";
> 				allwinner,drive = <SUN4I_PINCTRL_30_MA>;
1362,1366c1155,1159
< 			uart4_pins_a: uart4@0 {
< 				allwinner,pins = "PG10", "PG11";
< 				allwinner,function = "uart4";
< 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
---
> 			ir0_rx_pins_a: ir0@0 {
> 				    allwinner,pins = "PB4";
> 				    allwinner,function = "ir0";
> 				    allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 				    allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
1369,1373c1162,1166
< 			uart4_pins_b: uart4@1 {
< 				allwinner,pins = "PH4", "PH5";
< 				allwinner,function = "uart4";
< 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
---
> 			ir0_tx_pins_a: ir0@1 {
> 				    allwinner,pins = "PB3";
> 				    allwinner,function = "ir0";
> 				    allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 				    allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
1376,1380c1169,1173
< 			uart5_pins_a: uart5@0 {
< 				allwinner,pins = "PI10", "PI11";
< 				allwinner,function = "uart5";
< 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
---
> 			ir1_rx_pins_a: ir1@0 {
> 				    allwinner,pins = "PB23";
> 				    allwinner,function = "ir1";
> 				    allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 				    allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
1383,1385c1176,1185
< 			uart6_pins_a: uart6@0 {
< 				allwinner,pins = "PI12", "PI13";
< 				allwinner,function = "uart6";
---
> 			ir1_tx_pins_a: ir1@1 {
> 				    allwinner,pins = "PB22";
> 				    allwinner,function = "ir1";
> 				    allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 				    allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
> 			};
> 
> 			ps20_pins_a: ps20@0 {
> 				allwinner,pins = "PI20", "PI21";
> 				allwinner,function = "ps2";
1390,1392c1190,1192
< 			uart7_pins_a: uart7@0 {
< 				allwinner,pins = "PI20", "PI21";
< 				allwinner,function = "uart7";
---
> 			ps21_pins_a: ps21@0 {
> 				allwinner,pins = "PH12", "PH13";
> 				allwinner,function = "ps2";
1429,1441d1228
< 		spdif: spdif@01c21000 {
< 			#sound-dai-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-spdif";
< 			reg = <0x01c21000 0x400>;
< 			interrupts = <GIC_SPI 13 IRQ_TYPE_LEVEL_HIGH>;
< 			clocks = <&apb0_gates 1>, <&spdif_clk>;
< 			clock-names = "apb", "spdif";
< 			dmas = <&dma SUN4I_DMA_NORMAL 2>,
< 			       <&dma SUN4I_DMA_NORMAL 2>;
< 			dma-names = "rx", "tx";
< 			status = "disabled";
< 		};
< 
1460,1485d1246
< 		i2s1: i2s@01c22000 {
< 			#sound-dai-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-i2s";
< 			reg = <0x01c22000 0x400>;
< 			interrupts = <GIC_SPI 87 IRQ_TYPE_LEVEL_HIGH>;
< 			clocks = <&apb0_gates 4>, <&i2s1_clk>;
< 			clock-names = "apb", "mod";
< 			dmas = <&dma SUN4I_DMA_NORMAL 4>,
< 			       <&dma SUN4I_DMA_NORMAL 4>;
< 			dma-names = "rx", "tx";
< 			status = "disabled";
< 		};
< 
< 		i2s0: i2s@01c22400 {
< 			#sound-dai-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-i2s";
< 			reg = <0x01c22400 0x400>;
< 			interrupts = <GIC_SPI 16 IRQ_TYPE_LEVEL_HIGH>;
< 			clocks = <&apb0_gates 3>, <&i2s0_clk>;
< 			clock-names = "apb", "mod";
< 			dmas = <&dma SUN4I_DMA_NORMAL 3>,
< 			       <&dma SUN4I_DMA_NORMAL 3>;
< 			dma-names = "rx", "tx";
< 			status = "disabled";
< 		};
< 
1509,1521d1269
< 		};
< 
< 		i2s2: i2s@01c24400 {
< 			#sound-dai-cells = <0>;
< 			compatible = "allwinner,sun4i-a10-i2s";
< 			reg = <0x01c24400 0x400>;
< 			interrupts = <GIC_SPI 90 IRQ_TYPE_LEVEL_HIGH>;
< 			clocks = <&apb0_gates 8>, <&i2s2_clk>;
< 			clock-names = "apb", "mod";
< 			dmas = <&dma SUN4I_DMA_NORMAL 6>,
< 			       <&dma SUN4I_DMA_NORMAL 6>;
< 			dma-names = "rx", "tx";
< 			status = "disabled";
diff -r u-boot/arch/arm/dts/sun7i-a20-itead-ibox.dts u-boot-2016.09-rc2/arch/arm/dts/sun7i-a20-itead-ibox.dts
68,85d67
< 
< 	sound {
< 		compatible = "simple-audio-card";
< 		simple-audio-card,name = "On-board SPDIF";
< 
< 		simple-audio-card,cpu {
< 			sound-dai = <&spdif>;
< 		};
< 
< 		simple-audio-card,codec {
< 			sound-dai = <&spdif_out>;
< 		};
< 	};
< 
< 	spdif_out: spdif-out {
< 		#sound-dai-cells = <0>;
< 		compatible = "linux,spdif-dit";
< 	};
142,147d123
< 	status = "okay";
< };
< 
< &spdif {
< 	pinctrl-names = "default";
< 	pinctrl-0 = <&spdif_tx_pins_a>;
diff -r u-boot/arch/arm/dts/sun7i-a20-lamobo-r1.dts u-boot-2016.09-rc2/arch/arm/dts/sun7i-a20-lamobo-r1.dts
98,101d97
< &codec {
< 	status = "okay";
< };
< 
116a113
> 	phy = <&phy1>;
121,177c118,119
< 	fixed-link {
< 		speed = <1000>;
< 		full-duplex;
< 	};
< 
< 	mdio {
< 		compatible = "snps,dwmac-mdio";
< 		#address-cells = <1>;
< 		#size-cells = <0>;
< 
< 		switch: ethernet-switch@1e {
< 			compatible = "brcm,bcm53125";
< 			reg = <30>;
< 			#address-cells = <1>;
< 			#size-cells = <0>;
< 
< 			ports {
< 				#address-cells = <1>;
< 				#size-cells = <0>;
< 
< 				port0: port@0 {
< 					reg = <0>;
< 					label = "lan2";
< 				};
< 
< 				port1: port@1 {
< 					reg = <1>;
< 					label = "lan3";
< 				};
< 
< 				port2: port@2 {
< 					reg = <2>;
< 					label = "lan4";
< 				};
< 
< 				port3: port@3 {
< 					reg = <3>;
< 					label = "wan";
< 				};
< 
< 				port4: port@4 {
< 					reg = <4>;
< 					label = "lan1";
< 				};
< 
< 				port8: port@8 {
< 					reg = <8>;
< 					label = "cpu";
< 					ethernet = <&gmac>;
< 					phy-mode = "rgmii";
< 					fixed-link {
< 						speed = <1000>;
< 						full-duplex;
< 					};
< 				};
< 			};
< 		};
---
> 	phy1: ethernet-phy@1 {
> 		reg = <1>;
218a161,164
> &ohci1 {
> 	status = "okay";
> };
> 
256c202
< 	gpio = <&pio 1 3 GPIO_ACTIVE_HIGH>; /* PB3 */
---
> 	gpio = <&pio 1 3 0>; /* PB3 */
288a235,238
> &reg_usb1_vbus {
> 	status = "okay";
> };
> 
290d239
< 	gpio = <&pio 7 12 GPIO_ACTIVE_HIGH>; /* PH12 */
329,332d277
< &usb2_vbus_pin_a {
< 	allwinner,pins = "PH12";
< };
< 
338a284
> 	usb1_vbus-supply = <&reg_usb1_vbus>;
Only in u-boot/arch/arm/dts: sun7i-a20-olinuxino-lime2-emmc.dts
diff -r u-boot/arch/arm/dts/sun8i-a23-a33.dtsi u-boot-2016.09-rc2/arch/arm/dts/sun8i-a23-a33.dtsi
269,270c269
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
289,290c288
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
309,310c307
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
diff -r u-boot/arch/arm/dts/sun8i-a23-gt90h-v4.dts u-boot-2016.09-rc2/arch/arm/dts/sun8i-a23-gt90h-v4.dts
45c45,50
< #include "sun8i-reference-design-tablet.dtsi"
---
> #include "sunxi-common-regulators.dtsi"
> 
> #include <dt-bindings/gpio/gpio.h>
> #include <dt-bindings/input/input.h>
> #include <dt-bindings/pinctrl/sun4i-a10.h>
> #include <dt-bindings/pwm/pwm.h>
49a55,72
> 
> 	aliases {
> 		serial0 = &r_uart;
> 	};
> 
> 	backlight: backlight {
> 		compatible = "pwm-backlight";
> 		pinctrl-names = "default";
> 		pinctrl-0 = <&bl_en_pin_gt90h>;
> 		pwms = <&pwm 0 50000 PWM_POLARITY_INVERTED>;
> 		brightness-levels = <0 10 20 30 40 50 60 70 80 90 100>;
> 		default-brightness-level = <8>;
> 		enable-gpios = <&pio 7 6 GPIO_ACTIVE_HIGH>; /* PH6 */
> 	};
> 
> 	chosen {
> 		stdout-path = "serial0:115200n8";
> 	};
56,60c79,87
< &gsl1680 {
< 	compatible = "silead,gsl3675";
< 	touchscreen-fw-name = "silead/gsl3675-gt90h.fw";
< 	touchscreen-size-x = <1792>;
< 	touchscreen-size-y = <1024>;
---
> &i2c0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&i2c0_pins_a>;
> 	status = "okay";
> };
> 
> &i2c1 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&i2c1_pins_a>;
64a92,108
> 	vref-supply = <&reg_vcc3v0>;
> 	status = "okay";
> 
> 	button@200 {
> 		label = "Volume Up";
> 		linux,code = <KEY_VOLUMEUP>;
> 		channel = <0>;
> 		voltage = <200000>;
> 	};
> 
> 	button@400 {
> 		label = "Volume Down";
> 		linux,code = <KEY_VOLUMEDOWN>;
> 		channel = <0>;
> 		voltage = <400000>;
> 	};
> 
72a117,253
> &mmc0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&mmc0_pins_a>, <&mmc0_cd_pin_gt90h>;
> 	vmmc-supply = <&reg_aldo1>;
> 	bus-width = <4>;
> 	cd-gpios = <&pio 1 4 GPIO_ACTIVE_HIGH>; /* PB4 */
> 	cd-inverted;
> 	status = "okay";
> };
> 
> &pio {
> 	bl_en_pin_gt90h: bl_en_pin@0 {
> 		allwinner,pins = "PH6";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
> 	};
> 
> 	mmc0_cd_pin_gt90h: mmc0_cd_pin@0 {
> 		allwinner,pins = "PB4";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
> 	};
> };
> 
> &pwm {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&pwm0_pins>;
> 	status = "okay";
> };
> 
> &r_rsb {
> 	status = "okay";
> 
> 	axp22x: pmic@3a3 {
> 		compatible = "x-powers,axp223";
> 		reg = <0x3a3>;
> 		interrupt-parent = <&nmi_intc>;
> 		interrupts = <0 IRQ_TYPE_LEVEL_LOW>;
> 		eldoin-supply = <&reg_dcdc1>;
> 	};
> };
> 
> &r_uart {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&r_uart_pins_a>;
> 	status = "okay";
> };
> 
> #include "axp22x.dtsi"
> 
> &reg_aldo1 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
> 	regulator-name = "vcc-io";
> };
> 
> &reg_aldo2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <2350000>;
> 	regulator-max-microvolt = <2650000>;
> 	regulator-name = "vdd-dll";
> };
> 
> &reg_aldo3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <2700000>;
> 	regulator-max-microvolt = <3300000>;
> 	regulator-name = "vcc-pll-avcc";
> };
> 
> &reg_dc1sw {
> 	regulator-name = "vcc-lcd";
> };
> 
> &reg_dc5ldo {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-cpus";
> };
> 
> &reg_dcdc1 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
> 	regulator-name = "vcc-3v0";
> };
> 
> &reg_dcdc2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-sys";
> };
> 
> &reg_dcdc3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-cpu";
> };
> 
> &reg_dcdc5 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <1500000>;
> 	regulator-max-microvolt = <1500000>;
> 	regulator-name = "vcc-dram";
> };
> 
> &reg_dldo1 {
> 	regulator-min-microvolt = <3300000>;
> 	regulator-max-microvolt = <3300000>;
> 	regulator-name = "vcc-wifi";
> };
> 
> &reg_rtc_ldo {
> 	regulator-name = "vcc-rtc";
> };
> 
> &simplefb_lcd {
> 	vcc-lcd-supply = <&reg_dc1sw>;
> };
> 
> /*
>  * FIXME for now we only support host mode and rely on u-boot to have
>  * turned on Vbus which is controlled by the axp223 pmic on the board.
>  *
>  * Once we have axp223 support we should switch to fully supporting otg.
>  */
> &usb_otg {
> 	dr_mode = "host";
> 	status = "okay";
> };
> 
74a256
> 	status = "okay";
diff -r u-boot/arch/arm/dts/sun8i-a23-inet86dz.dts u-boot-2016.09-rc2/arch/arm/dts/sun8i-a23-inet86dz.dts
45c45,50
< #include "sun8i-reference-design-tablet.dtsi"
---
> #include "sunxi-common-regulators.dtsi"
> 
> #include <dt-bindings/gpio/gpio.h>
> #include <dt-bindings/input/input.h>
> #include <dt-bindings/pinctrl/sun4i-a10.h>
> #include <dt-bindings/pwm/pwm.h>
49a55,72
> 
> 	aliases {
> 		serial0 = &r_uart;
> 	};
> 
> 	backlight: backlight {
> 		compatible = "pwm-backlight";
> 		pinctrl-names = "default";
> 		pinctrl-0 = <&bl_en_pin_inet86dz>;
> 		pwms = <&pwm 0 50000 PWM_POLARITY_INVERTED>;
> 		brightness-levels = <0 10 20 30 40 50 60 70 80 90 100>;
> 		default-brightness-level = <8>;
> 		enable-gpios = <&pio 7 6 GPIO_ACTIVE_HIGH>; /* PH6 */
> 	};
> 
> 	chosen {
> 		stdout-path = "serial0:115200n8";
> 	};
56,59c79,281
< &gsl1680 {
< 	touchscreen-size-x = <960>;
< 	touchscreen-size-y = <640>;
< 	touchscreen-fw-name = "silead/gsl1680-inet86dz.fw";
---
> &i2c0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&i2c0_pins_a>;
> 	status = "okay";
> 	/*
> 	 * The gsl1680 is rated at 400KHz and it will not work reliable at
> 	 * 100KHz, this has been confirmed on multiple different tablets.
> 	 * The gsl1680 is the only device on this bus.
> 	 */
> 	clock-frequency = <400000>;
> 
> 	gsl1680: touchscreen@40 {
> 		compatible = "silead,gsl1680";
> 		reg = <0x40>;
> 		interrupt-parent = <&pio>;
> 		interrupts = <1 5 IRQ_TYPE_EDGE_FALLING>; /* PB5 */
> 		pinctrl-names = "default";
> 		pinctrl-0 = <&ts_power_pin_inet86dz>;
> 		power-gpios = <&pio 7 1 GPIO_ACTIVE_HIGH>; /* PH1 */
> 		touchscreen-size-x = <960>;
> 		touchscreen-size-y = <640>;
> 		touchscreen-max-fingers = <5>;
> 		touchscreen-fw-name = "silead/gsl1680-inet86dz.fw";
> 	};
> };
> 
> &i2c1 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&i2c1_pins_a>;
> 	status = "okay";
> };
> 
> &lradc {
> 	vref-supply = <&reg_vcc3v0>;
> 	status = "okay";
> 
> 	button@200 {
> 		label = "Volume Up";
> 		linux,code = <KEY_VOLUMEUP>;
> 		channel = <0>;
> 		voltage = <200000>;
> 	};
> 
> 	button@400 {
> 		label = "Volume Down";
> 		linux,code = <KEY_VOLUMEDOWN>;
> 		channel = <0>;
> 		voltage = <400000>;
> 	};
> };
> 
> &mmc0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&mmc0_pins_a>, <&mmc0_cd_pin_inet86dz>;
> 	vmmc-supply = <&reg_dcdc1>;
> 	bus-width = <4>;
> 	cd-gpios = <&pio 1 4 GPIO_ACTIVE_HIGH>; /* PB4 */
> 	cd-inverted;
> 	status = "okay";
> };
> 
> &pio {
> 	bl_en_pin_inet86dz: bl_en_pin@0 {
> 		allwinner,pins = "PH6";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
> 	};
> 
> 	mmc0_cd_pin_inet86dz: mmc0_cd_pin@0 {
> 		allwinner,pins = "PB4";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
> 	};
> 
> 	ts_power_pin_inet86dz: ts_power_pin@0 {
> 		allwinner,pins = "PH1";
> 		allwinner,function = "gpio_out";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
> 	};
> 
> 	usb0_id_detect_pin: usb0_id_detect_pin@0 {
> 		allwinner,pins = "PH8";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
> 	};
> };
> 
> &pwm {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&pwm0_pins>;
> 	status = "okay";
> };
> 
> &r_rsb {
> 	status = "okay";
> 
> 	axp22x: pmic@3a3 {
> 		compatible = "x-powers,axp223";
> 		reg = <0x3a3>;
> 		interrupt-parent = <&nmi_intc>;
> 		interrupts = <0 IRQ_TYPE_LEVEL_LOW>;
> 		eldoin-supply = <&reg_dcdc1>;
> 		x-powers,drive-vbus-en;
> 	};
> };
> 
> &r_uart {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&r_uart_pins_a>;
> 	status = "okay";
> };
> 
> #include "axp22x.dtsi"
> 
> &reg_aldo1 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
> 	regulator-name = "vcc-io";
> };
> 
> &reg_aldo2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <2350000>;
> 	regulator-max-microvolt = <2650000>;
> 	regulator-name = "vdd-dll";
> };
> 
> &reg_aldo3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <2700000>;
> 	regulator-max-microvolt = <3300000>;
> 	regulator-name = "vcc-pll-avcc";
> };
> 
> &reg_dc1sw {
> 	regulator-name = "vcc-lcd";
> };
> 
> &reg_dc5ldo {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-cpus";
> };
> 
> &reg_dcdc1 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
> 	regulator-name = "vcc-3v0";
> };
> 
> &reg_dcdc2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-sys";
> };
> 
> &reg_dcdc3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-cpu";
> };
> 
> &reg_dcdc5 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <1500000>;
> 	regulator-max-microvolt = <1500000>;
> 	regulator-name = "vcc-dram";
> };
> 
> &reg_dldo1 {
> 	regulator-min-microvolt = <3300000>;
> 	regulator-max-microvolt = <3300000>;
> 	regulator-name = "vcc-wifi";
> };
> 
> &reg_drivevbus {
> 	regulator-name = "usb0-vbus";
> 	status = "okay";
> };
> 
> &reg_rtc_ldo {
> 	regulator-name = "vcc-rtc";
> };
> 
> &simplefb_lcd {
> 	vcc-lcd-supply = <&reg_dc1sw>;
> };
> 
> &usb_otg {
> 	dr_mode = "otg";
> 	status = "okay";
> };
> 
> &usb_power_supply {
63a286,290
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&usb0_id_detect_pin>;
> 	usb0_id_det-gpio = <&pio 7 8 GPIO_ACTIVE_HIGH>; /* PH8 */
> 	usb0_vbus_power-supply = <&usb_power_supply>;
> 	usb0_vbus-supply = <&reg_drivevbus>;
64a292
> 	status = "okay";
diff -r u-boot/arch/arm/dts/sun8i-a23-polaroid-mid2407pxe03.dts u-boot-2016.09-rc2/arch/arm/dts/sun8i-a23-polaroid-mid2407pxe03.dts
45c45,50
< #include "sun8i-reference-design-tablet.dtsi"
---
> #include "sunxi-common-regulators.dtsi"
> 
> #include <dt-bindings/gpio/gpio.h>
> #include <dt-bindings/input/input.h>
> #include <dt-bindings/pinctrl/sun4i-a10.h>
> #include <dt-bindings/pwm/pwm.h>
52c57
< 		ethernet0 = &esp8089;
---
> 		serial0 = &r_uart;
55,56c60,61
< 	wifi_pwrseq: wifi_pwrseq {
< 		compatible = "mmc-pwrseq-simple";
---
> 	backlight: backlight {
> 		compatible = "pwm-backlight";
58,61c63,71
< 		pinctrl-0 = <&wifi_pwrseq_pin_mid2407>;
< 		reset-gpios = <&r_pio 0 6 GPIO_ACTIVE_LOW>; /* PL6 */
< 		/* The esp8089 needs 200 ms after driving wifi-en high */
< 		post-power-on-delay-ms = <200>;
---
> 		pinctrl-0 = <&bl_en_pin_mid2407>;
> 		pwms = <&pwm 0 50000 PWM_POLARITY_INVERTED>;
> 		brightness-levels = <0 10 20 30 40 50 60 70 80 90 100>;
> 		default-brightness-level = <8>;
> 		enable-gpios = <&pio 7 6 GPIO_ACTIVE_HIGH>; /* PH6 */
> 	};
> 
> 	chosen {
> 		stdout-path = "serial0:115200n8";
65,71c75,77
< &gsl1680 {
< 	vddio-supply = <&reg_ldo_io1>;
< 	touchscreen-size-x = <960>;
< 	touchscreen-size-y = <640>;
< 	touchscreen-inverted-x;
< 	touchscreen-inverted-y;
< 	touchscreen-fw-name = "silead/gsl1680-polaroid-mid2407pxe03.fw";
---
> &i2c0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&i2c0_pins_a>;
72a79,100
> 	/*
> 	 * The gsl1680 is rated at 400KHz and it will not work reliable at
> 	 * 100KHz, this has been confirmed on multiple different tablets.
> 	 * The gsl1680 is the only device on this bus.
> 	 */
> 	clock-frequency = <400000>;
> 
> 	gsl1680: touchscreen@40 {
> 		compatible = "silead,gsl1680";
> 		reg = <0x40>;
> 		interrupt-parent = <&pio>;
> 		interrupts = <1 5 IRQ_TYPE_EDGE_FALLING>; /* PB5 */
> 		pinctrl-names = "default";
> 		pinctrl-0 = <&ts_power_pin_mid2407>;
> 		power-gpios = <&pio 7 1 GPIO_ACTIVE_HIGH>; /* PH1 */
> 		touchscreen-size-x = <960>;
> 		touchscreen-size-y = <640>;
> 		touchscreen-inverted-x;
> 		touchscreen-inverted-y;
> 		touchscreen-max-fingers = <5>;
> 		touchscreen-fw-name = "silead/gsl1680-polaroid-mid2407pxe03.fw";
> 	};
75c103
< &mmc1 {
---
> &i2c1 {
77,81c105,110
< 	pinctrl-0 = <&mmc1_pins_a>;
< 	vmmc-supply = <&reg_dldo1>;
< 	mmc-pwrseq = <&wifi_pwrseq>;
< 	bus-width = <4>;
< 	non-removable;
---
> 	pinctrl-0 = <&i2c1_pins_a>;
> 	status = "okay";
> };
> 
> &lradc {
> 	vref-supply = <&reg_vcc3v0>;
84,87c113,124
< 	esp8089: sdio_wifi@1 {
< 		compatible = "esp,esp8089";
< 		reg = <1>;
< 		esp,crystal-26M-en = <2>;
---
> 	button@200 {
> 		label = "Volume Up";
> 		linux,code = <KEY_VOLUMEUP>;
> 		channel = <0>;
> 		voltage = <200000>;
> 	};
> 
> 	button@400 {
> 		label = "Volume Down";
> 		linux,code = <KEY_VOLUMEDOWN>;
> 		channel = <0>;
> 		voltage = <400000>;
91,92c128,135
< &mmc1_pins_a {
< 	allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
---
> &mmc0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&mmc0_pins_a>, <&mmc0_cd_pin_mid2407>;
> 	vmmc-supply = <&reg_dcdc1>;
> 	bus-width = <4>;
> 	cd-gpios = <&pio 1 4 GPIO_ACTIVE_HIGH>; /* PB4 */
> 	cd-inverted;
> 	status = "okay";
95,97c138,154
< &r_pio {
< 	wifi_pwrseq_pin_mid2407: wifi_pwrseq_pin@0 {
< 		allwinner,pins = "PL6";
---
> &pio {
> 	bl_en_pin_mid2407: bl_en_pin@0 {
> 		allwinner,pins = "PH6";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
> 	};
> 
> 	mmc0_cd_pin_mid2407: mmc0_cd_pin@0 {
> 		allwinner,pins = "PB4";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
> 	};
> 
> 	ts_power_pin_mid2407: ts_power_pin@0 {
> 		allwinner,pins = "PH1";
101a159,257
> 
> 	usb0_id_detect_pin: usb0_id_detect_pin@0 {
> 		allwinner,pins = "PH8";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
> 	};
> };
> 
> &pwm {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&pwm0_pins>;
> 	status = "okay";
> };
> 
> &r_rsb {
> 	status = "okay";
> 
> 	axp22x: pmic@3a3 {
> 		compatible = "x-powers,axp223";
> 		reg = <0x3a3>;
> 		interrupt-parent = <&nmi_intc>;
> 		interrupts = <0 IRQ_TYPE_LEVEL_LOW>;
> 		eldoin-supply = <&reg_dcdc1>;
> 		x-powers,drive-vbus-en;
> 	};
> };
> 
> &r_uart {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&r_uart_pins_a>;
> 	status = "okay";
> };
> 
> #include "axp22x.dtsi"
> 
> &reg_aldo1 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
> 	regulator-name = "vcc-io";
> };
> 
> &reg_aldo2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <2350000>;
> 	regulator-max-microvolt = <2650000>;
> 	regulator-name = "vdd-dll";
> };
> 
> &reg_aldo3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <2700000>;
> 	regulator-max-microvolt = <3300000>;
> 	regulator-name = "vcc-pll-avcc";
> };
> 
> &reg_dc1sw {
> 	regulator-name = "vcc-lcd";
> };
> 
> &reg_dc5ldo {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-cpus";
> };
> 
> &reg_dcdc1 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
> 	regulator-name = "vcc-3v0";
> };
> 
> &reg_dcdc2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-sys";
> };
> 
> &reg_dcdc3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-cpu";
> };
> 
> &reg_dcdc5 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <1500000>;
> 	regulator-max-microvolt = <1500000>;
> 	regulator-name = "vcc-dram";
> };
> 
> &reg_drivevbus {
> 	regulator-name = "usb0-vbus";
> 	status = "okay";
104a261
> 	regulator-always-on;
107a265,290
> 	status = "okay";
> };
> 
> &reg_rtc_ldo {
> 	regulator-name = "vcc-rtc";
> };
> 
> &simplefb_lcd {
> 	vcc-lcd-supply = <&reg_dc1sw>;
> };
> 
> &usb_otg {
> 	dr_mode = "otg";
> 	status = "okay";
> };
> 
> &usb_power_supply {
> 	status = "okay";
> };
> 
> &usbphy {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&usb0_id_detect_pin>;
> 	usb0_id_det-gpio = <&pio 7 8 GPIO_ACTIVE_HIGH>; /* PH8 */
> 	usb0_vbus_power-supply = <&usb_power_supply>;
> 	usb0_vbus-supply = <&reg_drivevbus>;
diff -r u-boot/arch/arm/dts/sun8i-a23-polaroid-mid2809pxe04.dts u-boot-2016.09-rc2/arch/arm/dts/sun8i-a23-polaroid-mid2809pxe04.dts
45c45,50
< #include "sun8i-reference-design-tablet.dtsi"
---
> #include "sunxi-common-regulators.dtsi"
> 
> #include <dt-bindings/gpio/gpio.h>
> #include <dt-bindings/input/input.h>
> #include <dt-bindings/pinctrl/sun4i-a10.h>
> #include <dt-bindings/pwm/pwm.h>
52c57
< 		ethernet0 = &esp8089;
---
> 		serial0 = &r_uart;
55,56c60,61
< 	wifi_pwrseq: wifi_pwrseq {
< 		compatible = "mmc-pwrseq-simple";
---
> 	backlight: backlight {
> 		compatible = "pwm-backlight";
58,61c63,71
< 		pinctrl-0 = <&wifi_pwrseq_pin_mid2809>;
< 		reset-gpios = <&r_pio 0 6 GPIO_ACTIVE_LOW>; /* PL6 */
< 		/* The esp8089 needs 200 ms after driving wifi-en high */
< 		post-power-on-delay-ms = <200>;
---
> 		pinctrl-0 = <&bl_en_pin_mid2809>;
> 		pwms = <&pwm 0 50000 PWM_POLARITY_INVERTED>;
> 		brightness-levels = <0 10 20 30 40 50 60 70 80 90 100>;
> 		default-brightness-level = <8>;
> 		enable-gpios = <&pio 7 6 GPIO_ACTIVE_HIGH>; /* PH6 */
> 	};
> 
> 	chosen {
> 		stdout-path = "serial0:115200n8";
65,69c75
< &gsl1680 {
< 	compatible = "silead,gsl3670";
< 	touchscreen-fw-name = "silead/gsl3670-polaroid-mid2809pxe04.fw";
< 	touchscreen-size-x = <1660>;
< 	touchscreen-size-y = <890>;
---
> &ehci0 {
73c79
< &mmc1 {
---
> &i2c0 {
75,79c81,87
< 	pinctrl-0 = <&mmc1_pins_a>;
< 	vmmc-supply = <&reg_dldo1>;
< 	mmc-pwrseq = <&wifi_pwrseq>;
< 	bus-width = <4>;
< 	non-removable;
---
> 	pinctrl-0 = <&i2c0_pins_a>;
> 	status = "okay";
> };
> 
> &i2c1 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&i2c1_pins_a>;
80a89,100
> };
> 
> &lradc {
> 	vref-supply = <&reg_vcc3v0>;
> 	status = "okay";
> 
> 	button@200 {
> 		label = "Volume Up";
> 		linux,code = <KEY_VOLUMEUP>;
> 		channel = <0>;
> 		voltage = <200000>;
> 	};
82,85c102,106
< 	esp8089: sdio_wifi@1 {
< 		compatible = "esp,esp8089";
< 		reg = <1>;
< 		esp,crystal-26M-en = <2>;
---
> 	button@400 {
> 		label = "Volume Down";
> 		linux,code = <KEY_VOLUMEDOWN>;
> 		channel = <0>;
> 		voltage = <400000>;
89,90c110,117
< &mmc1_pins_a {
< 	allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
---
> &mmc0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&mmc0_pins_a>, <&mmc0_cd_pin_mid2809>;
> 	vmmc-supply = <&reg_dcdc1>;
> 	bus-width = <4>;
> 	cd-gpios = <&pio 1 4 GPIO_ACTIVE_HIGH>; /* PB4 */
> 	cd-inverted;
> 	status = "okay";
93,96c120,123
< &r_pio {
< 	wifi_pwrseq_pin_mid2809: wifi_pwrseq_pin@0 {
< 		allwinner,pins = "PL6";
< 		allwinner,function = "gpio_out";
---
> &pio {
> 	bl_en_pin_mid2809: bl_en_pin@0 {
> 		allwinner,pins = "PH6";
> 		allwinner,function = "gpio_in";
99a127,242
> 
> 	mmc0_cd_pin_mid2809: mmc0_cd_pin@0 {
> 		allwinner,pins = "PB4";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
> 	};
> };
> 
> &pwm {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&pwm0_pins>;
> 	status = "okay";
> };
> 
> &r_rsb {
> 	status = "okay";
> 
> 	axp22x: pmic@3a3 {
> 		compatible = "x-powers,axp223";
> 		reg = <0x3a3>;
> 		interrupt-parent = <&nmi_intc>;
> 		interrupts = <0 IRQ_TYPE_LEVEL_LOW>;
> 		eldoin-supply = <&reg_dcdc1>;
> 	};
> };
> 
> &r_uart {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&r_uart_pins_a>;
> 	status = "okay";
> };
> 
> #include "axp22x.dtsi"
> 
> &reg_aldo1 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
> 	regulator-name = "vcc-io";
> };
> 
> &reg_aldo2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <2350000>;
> 	regulator-max-microvolt = <2650000>;
> 	regulator-name = "vdd-dll";
> };
> 
> &reg_aldo3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <2700000>;
> 	regulator-max-microvolt = <3300000>;
> 	regulator-name = "vcc-pll-avcc";
> };
> 
> &reg_dc1sw {
> 	regulator-name = "vcc-lcd";
> };
> 
> &reg_dc5ldo {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-cpus";
> };
> 
> &reg_dcdc1 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
> 	regulator-name = "vcc-3v0";
> };
> 
> &reg_dcdc2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-sys";
> };
> 
> &reg_dcdc3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-cpu";
> };
> 
> &reg_dcdc5 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <1500000>;
> 	regulator-max-microvolt = <1500000>;
> 	regulator-name = "vcc-dram";
> };
> 
> &reg_rtc_ldo {
> 	regulator-name = "vcc-rtc";
> };
> 
> &simplefb_lcd {
> 	vcc-lcd-supply = <&reg_dc1sw>;
> };
> 
> /*
>  * FIXME for now we only support host mode and rely on u-boot to have
>  * turned on Vbus which is controlled by the axp223 pmic on the board.
>  *
>  * Once we have axp223 support we should switch to fully supporting otg.
>  */
> &usb_otg {
> 	dr_mode = "host";
> 	status = "okay";
> };
> 
> &usbphy {
> 	status = "okay";
diff -r u-boot/arch/arm/dts/sun8i-a23-q8-tablet.dts u-boot-2016.09-rc2/arch/arm/dts/sun8i-a23-q8-tablet.dts
50a51,65
> 
> /*
>  * FIXME for now we only support host mode and rely on u-boot to have
>  * turned on Vbus which is controlled by the axp223 pmic on the board.
>  *
>  * Once we have axp223 support we should switch to fully supporting otg.
>  */
> &usb_otg {
> 	dr_mode = "host";
> 	status = "okay";
> };
> 
> &usbphy {
> 	status = "okay";
> };
diff -r u-boot/arch/arm/dts/sun8i-a33-ga10h-v1.1.dts u-boot-2016.09-rc2/arch/arm/dts/sun8i-a33-ga10h-v1.1.dts
45c45,49
< #include "sun8i-reference-design-tablet.dtsi"
---
> #include "sunxi-common-regulators.dtsi"
> 
> #include <dt-bindings/gpio/gpio.h>
> #include <dt-bindings/input/input.h>
> #include <dt-bindings/pinctrl/sun4i-a10.h>
52,53c56,60
< 		/* Make u-boot set mac-address for rtl8703as (no eeprom) */
< 		ethernet0 = &rtl8703as;
---
> 		serial0 = &r_uart;
> 	};
> 
> 	chosen {
> 		stdout-path = "serial0:115200n8";
61,66c68,76
< &gsl1680 {
< 	compatible = "silead,gsl3675";
< 	touchscreen-fw-name = "silead/gsl3675-ga10h.fw";
< 	touchscreen-size-x = <1630>;
< 	touchscreen-size-y = <990>;
< 	touchscreen-inverted-y;
---
> &i2c0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&i2c0_pins_a>;
> 	status = "okay";
> };
> 
> &i2c1 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&i2c1_pins_a>;
70a81,97
> 	vref-supply = <&reg_vcc3v0>;
> 	status = "okay";
> 
> 	button@200 {
> 		label = "Volume Up";
> 		linux,code = <KEY_VOLUMEUP>;
> 		channel = <0>;
> 		voltage = <200000>;
> 	};
> 
> 	button@400 {
> 		label = "Volume Down";
> 		linux,code = <KEY_VOLUMEDOWN>;
> 		channel = <0>;
> 		voltage = <400000>;
> 	};
> 
79c106
< &mmc1 {
---
> &mmc0 {
81,82c108,109
< 	pinctrl-0 = <&mmc1_pins_a>;
< 	vmmc-supply = <&reg_dldo1>;
---
> 	pinctrl-0 = <&mmc0_pins_a>, <&mmc0_cd_pin_q8h>;
> 	vmmc-supply = <&reg_vcc3v0>;
84c111,112
< 	non-removable;
---
> 	cd-gpios = <&pio 1 4 GPIO_ACTIVE_HIGH>; /* PB4 */
> 	cd-inverted;
85a114
> };
87,88c116,125
< 	rtl8703as: sdio_wifi@1 {
< 		reg = <1>;
---
> &ohci0 {
> 	status = "okay";
> };
> 
> &pio {
> 	mmc0_cd_pin_q8h: mmc0_cd_pin@0 {
> 		allwinner,pins = "PB4";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
92c129,140
< &ohci0 {
---
> &r_uart {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&r_uart_pins_a>;
> 	status = "okay";
> };
> 
> &usb_otg {
> 	dr_mode = "host";
> 	status = "okay";
> };
> 
> &usbphy {
diff -r u-boot/arch/arm/dts/sun8i-a33-q8-tablet.dts u-boot-2016.09-rc2/arch/arm/dts/sun8i-a33-q8-tablet.dts
50a51,65
> 
> /*
>  * FIXME for now we only support host mode and rely on u-boot to have
>  * turned on Vbus which is controlled by the axp223 pmic on the board.
>  *
>  * Once we have axp223 support we should switch to fully supporting otg.
>  */
> &usb_otg {
> 	dr_mode = "host";
> 	status = "okay";
> };
> 
> &usbphy {
> 	status = "okay";
> };
Only in u-boot/arch/arm/dts: sun8i-h3-bananapi-m2-plus.dts
diff -r u-boot/arch/arm/dts/sun8i-h3.dtsi u-boot-2016.09-rc2/arch/arm/dts/sun8i-h3.dtsi
45d44
< #include <dt-bindings/clock/sun8i-h3-ccu.h>
48d46
< #include <dt-bindings/reset/sun8i-h3-ccu.h>
54c52
< 		ethernet0 = &emac;
---
> 		ethernet0 = <&emac>;
112a111,295
> 		pll1: clk@01c20000 {
> 			#clock-cells = <0>;
> 			compatible = "allwinner,sun8i-a23-pll1-clk";
> 			reg = <0x01c20000 0x4>;
> 			clocks = <&osc24M>;
> 			clock-output-names = "pll1";
> 		};
> 
> 		/* dummy clock until actually implemented */
> 		pll5: pll5_clk {
> 			#clock-cells = <0>;
> 			compatible = "fixed-clock";
> 			clock-frequency = <0>;
> 			clock-output-names = "pll5";
> 		};
> 
> 		pll6: clk@01c20028 {
> 			#clock-cells = <1>;
> 			compatible = "allwinner,sun6i-a31-pll6-clk";
> 			reg = <0x01c20028 0x4>;
> 			clocks = <&osc24M>;
> 			clock-output-names = "pll6", "pll6x2";
> 		};
> 
> 		pll6d2: pll6d2_clk {
> 			#clock-cells = <0>;
> 			compatible = "fixed-factor-clock";
> 			clock-div = <2>;
> 			clock-mult = <1>;
> 			clocks = <&pll6 0>;
> 			clock-output-names = "pll6d2";
> 		};
> 
> 		/* dummy clock until pll6 can be reused */
> 		pll8: pll8_clk {
> 			#clock-cells = <0>;
> 			compatible = "fixed-clock";
> 			clock-frequency = <1>;
> 			clock-output-names = "pll8";
> 		};
> 
> 		cpu: cpu_clk@01c20050 {
> 			#clock-cells = <0>;
> 			compatible = "allwinner,sun4i-a10-cpu-clk";
> 			reg = <0x01c20050 0x4>;
> 			clocks = <&osc32k>, <&osc24M>, <&pll1>, <&pll1>;
> 			clock-output-names = "cpu";
> 		};
> 
> 		axi: axi_clk@01c20050 {
> 			#clock-cells = <0>;
> 			compatible = "allwinner,sun4i-a10-axi-clk";
> 			reg = <0x01c20050 0x4>;
> 			clocks = <&cpu>;
> 			clock-output-names = "axi";
> 		};
> 
> 		ahb1: ahb1_clk@01c20054 {
> 			#clock-cells = <0>;
> 			compatible = "allwinner,sun6i-a31-ahb1-clk";
> 			reg = <0x01c20054 0x4>;
> 			clocks = <&osc32k>, <&osc24M>, <&axi>, <&pll6 0>;
> 			clock-output-names = "ahb1";
> 		};
> 
> 		ahb2: ahb2_clk@01c2005c {
> 			#clock-cells = <0>;
> 			compatible = "allwinner,sun8i-h3-ahb2-clk";
> 			reg = <0x01c2005c 0x4>;
> 			clocks = <&ahb1>, <&pll6d2>;
> 			clock-output-names = "ahb2";
> 		};
> 
> 		apb1: apb1_clk@01c20054 {
> 			#clock-cells = <0>;
> 			compatible = "allwinner,sun4i-a10-apb0-clk";
> 			reg = <0x01c20054 0x4>;
> 			clocks = <&ahb1>;
> 			clock-output-names = "apb1";
> 		};
> 
> 		apb2: apb2_clk@01c20058 {
> 			#clock-cells = <0>;
> 			compatible = "allwinner,sun4i-a10-apb1-clk";
> 			reg = <0x01c20058 0x4>;
> 			clocks = <&osc32k>, <&osc24M>, <&pll6 0>, <&pll6 0>;
> 			clock-output-names = "apb2";
> 		};
> 
> 		bus_gates: clk@01c20060 {
> 			#clock-cells = <1>;
> 			compatible = "allwinner,sun8i-h3-bus-gates-clk";
> 			reg = <0x01c20060 0x14>;
> 			clocks = <&ahb1>, <&ahb2>, <&apb1>, <&apb2>;
> 			clock-names = "ahb1", "ahb2", "apb1", "apb2";
> 			clock-indices = <5>, <6>, <8>,
> 					<9>, <10>, <13>,
> 					<14>, <17>, <18>,
> 					<19>, <20>,
> 					<21>, <23>,
> 					<24>, <25>,
> 					<26>, <27>,
> 					<28>, <29>,
> 					<30>, <31>, <32>,
> 					<35>, <36>, <37>,
> 					<40>, <41>, <43>,
> 					<44>, <52>, <53>,
> 					<54>, <64>,
> 					<65>, <69>, <72>,
> 					<76>, <77>, <78>,
> 					<96>, <97>, <98>,
> 					<112>, <113>,
> 					<114>, <115>,
> 					<116>, <128>, <135>;
> 			clock-output-names = "bus_ce", "bus_dma", "bus_mmc0",
> 					     "bus_mmc1", "bus_mmc2", "bus_nand",
> 					     "bus_sdram", "bus_gmac", "bus_ts",
> 					     "bus_hstimer", "bus_spi0",
> 					     "bus_spi1", "bus_otg",
> 					     "bus_otg_ehci0", "bus_ehci1",
> 					     "bus_ehci2", "bus_ehci3",
> 					     "bus_otg_ohci0", "bus_ohci1",
> 					     "bus_ohci2", "bus_ohci3", "bus_ve",
> 					     "bus_lcd0", "bus_lcd1", "bus_deint",
> 					     "bus_csi", "bus_tve", "bus_hdmi",
> 					     "bus_de", "bus_gpu", "bus_msgbox",
> 					     "bus_spinlock", "bus_codec",
> 					     "bus_spdif", "bus_pio", "bus_ths",
> 					     "bus_i2s0", "bus_i2s1", "bus_i2s2",
> 					     "bus_i2c0", "bus_i2c1", "bus_i2c2",
> 					     "bus_uart0", "bus_uart1",
> 					     "bus_uart2", "bus_uart3",
> 					     "bus_scr", "bus_ephy", "bus_dbg";
> 		};
> 
> 		mmc0_clk: clk@01c20088 {
> 			#clock-cells = <1>;
> 			compatible = "allwinner,sun4i-a10-mmc-clk";
> 			reg = <0x01c20088 0x4>;
> 			clocks = <&osc24M>, <&pll6 0>, <&pll8>;
> 			clock-output-names = "mmc0",
> 					     "mmc0_output",
> 					     "mmc0_sample";
> 		};
> 
> 		mmc1_clk: clk@01c2008c {
> 			#clock-cells = <1>;
> 			compatible = "allwinner,sun4i-a10-mmc-clk";
> 			reg = <0x01c2008c 0x4>;
> 			clocks = <&osc24M>, <&pll6 0>, <&pll8>;
> 			clock-output-names = "mmc1",
> 					     "mmc1_output",
> 					     "mmc1_sample";
> 		};
> 
> 		mmc2_clk: clk@01c20090 {
> 			#clock-cells = <1>;
> 			compatible = "allwinner,sun4i-a10-mmc-clk";
> 			reg = <0x01c20090 0x4>;
> 			clocks = <&osc24M>, <&pll6 0>, <&pll8>;
> 			clock-output-names = "mmc2",
> 					     "mmc2_output",
> 					     "mmc2_sample";
> 		};
> 
> 		usb_clk: clk@01c200cc {
> 			#clock-cells = <1>;
> 			#reset-cells = <1>;
> 			compatible = "allwinner,sun8i-h3-usb-clk";
> 			reg = <0x01c200cc 0x4>;
> 			clocks = <&osc24M>;
> 			clock-output-names = "usb_phy0", "usb_phy1",
> 					     "usb_phy2", "usb_phy3",
> 					     "usb_ohci0", "usb_ohci1",
> 					     "usb_ohci2", "usb_ohci3";
> 		};
> 
> 		mbus_clk: clk@01c2015c {
> 			#clock-cells = <0>;
> 			compatible = "allwinner,sun8i-a23-mbus-clk";
> 			reg = <0x01c2015c 0x4>;
> 			clocks = <&osc24M>, <&pll6 1>, <&pll5>;
> 			clock-output-names = "mbus";
> 		};
> 
147,151d329
< 		syscon: syscon@01c00000 {
< 			compatible = "allwinner,sun8i-h3-syscon","syscon";
< 			reg = <0x01c00000 0x34>;
< 		};
< 
156,157c334,335
< 			clocks = <&ccu CLK_BUS_DMA>;
< 			resets = <&ccu RST_BUS_DMA>;
---
> 			clocks = <&bus_gates 6>;
> 			resets = <&ahb_rst 6>;
162,163c340
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
165,168c342,345
< 			clocks = <&ccu CLK_BUS_MMC0>,
< 				 <&ccu CLK_MMC0>,
< 				 <&ccu CLK_MMC0_OUTPUT>,
< 				 <&ccu CLK_MMC0_SAMPLE>;
---
> 			clocks = <&bus_gates 8>,
> 				 <&mmc0_clk 0>,
> 				 <&mmc0_clk 1>,
> 				 <&mmc0_clk 2>;
173c350
< 			resets = <&ccu RST_BUS_MMC0>;
---
> 			resets = <&ahb_rst 8>;
182,183c359
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
185,188c361,364
< 			clocks = <&ccu CLK_BUS_MMC1>,
< 				 <&ccu CLK_MMC1>,
< 				 <&ccu CLK_MMC1_OUTPUT>,
< 				 <&ccu CLK_MMC1_SAMPLE>;
---
> 			clocks = <&bus_gates 9>,
> 				 <&mmc1_clk 0>,
> 				 <&mmc1_clk 1>,
> 				 <&mmc1_clk 2>;
193c369
< 			resets = <&ccu RST_BUS_MMC1>;
---
> 			resets = <&ahb_rst 9>;
202,203c378
< 			compatible = "allwinner,sun7i-a20-mmc",
< 				     "allwinner,sun5i-a13-mmc";
---
> 			compatible = "allwinner,sun5i-a13-mmc";
205,208c380,383
< 			clocks = <&ccu CLK_BUS_MMC2>,
< 				 <&ccu CLK_MMC2>,
< 				 <&ccu CLK_MMC2_OUTPUT>,
< 				 <&ccu CLK_MMC2_SAMPLE>;
---
> 			clocks = <&bus_gates 10>,
> 				 <&mmc2_clk 0>,
> 				 <&mmc2_clk 1>,
> 				 <&mmc2_clk 2>;
213c388
< 			resets = <&ccu RST_BUS_MMC2>;
---
> 			resets = <&ahb_rst 10>;
233,236c408,411
< 			clocks = <&ccu CLK_USB_PHY0>,
< 				 <&ccu CLK_USB_PHY1>,
< 				 <&ccu CLK_USB_PHY2>,
< 				 <&ccu CLK_USB_PHY3>;
---
> 			clocks = <&usb_clk 8>,
> 				 <&usb_clk 9>,
> 				 <&usb_clk 10>,
> 				 <&usb_clk 11>;
241,244c416,419
< 			resets = <&ccu RST_USB_PHY0>,
< 				 <&ccu RST_USB_PHY1>,
< 				 <&ccu RST_USB_PHY2>,
< 				 <&ccu RST_USB_PHY3>;
---
> 			resets = <&usb_clk 0>,
> 				 <&usb_clk 1>,
> 				 <&usb_clk 2>,
> 				 <&usb_clk 3>;
257,258c432,433
< 			clocks = <&ccu CLK_BUS_EHCI1>, <&ccu CLK_BUS_OHCI1>;
< 			resets = <&ccu RST_BUS_EHCI1>, <&ccu RST_BUS_OHCI1>;
---
> 			clocks = <&bus_gates 25>, <&bus_gates 29>;
> 			resets = <&ahb_rst 25>, <&ahb_rst 29>;
268,270c443,445
< 			clocks = <&ccu CLK_BUS_EHCI1>, <&ccu CLK_BUS_OHCI1>,
< 				 <&ccu CLK_USB_OHCI1>;
< 			resets = <&ccu RST_BUS_EHCI1>, <&ccu RST_BUS_OHCI1>;
---
> 			clocks = <&bus_gates 29>, <&bus_gates 25>,
> 				 <&usb_clk 17>;
> 			resets = <&ahb_rst 29>, <&ahb_rst 25>;
280,281c455,456
< 			clocks = <&ccu CLK_BUS_EHCI2>, <&ccu CLK_BUS_OHCI2>;
< 			resets = <&ccu RST_BUS_EHCI2>, <&ccu RST_BUS_OHCI2>;
---
> 			clocks = <&bus_gates 26>, <&bus_gates 30>;
> 			resets = <&ahb_rst 26>, <&ahb_rst 30>;
291,293c466,468
< 			clocks = <&ccu CLK_BUS_EHCI2>, <&ccu CLK_BUS_OHCI2>,
< 				 <&ccu CLK_USB_OHCI2>;
< 			resets = <&ccu RST_BUS_EHCI2>, <&ccu RST_BUS_OHCI2>;
---
> 			clocks = <&bus_gates 30>, <&bus_gates 26>,
> 				 <&usb_clk 18>;
> 			resets = <&ahb_rst 30>, <&ahb_rst 26>;
303,304c478,479
< 			clocks = <&ccu CLK_BUS_EHCI3>, <&ccu CLK_BUS_OHCI3>;
< 			resets = <&ccu RST_BUS_EHCI3>, <&ccu RST_BUS_OHCI3>;
---
> 			clocks = <&bus_gates 27>, <&bus_gates 31>;
> 			resets = <&ahb_rst 27>, <&ahb_rst 31>;
314,316c489,491
< 			clocks = <&ccu CLK_BUS_EHCI3>, <&ccu CLK_BUS_OHCI3>,
< 				 <&ccu CLK_USB_OHCI3>;
< 			resets = <&ccu RST_BUS_EHCI3>, <&ccu RST_BUS_OHCI3>;
---
> 			clocks = <&bus_gates 31>, <&bus_gates 27>,
> 				 <&usb_clk 19>;
> 			resets = <&ahb_rst 31>, <&ahb_rst 27>;
322,330d496
< 		ccu: clock@01c20000 {
< 			compatible = "allwinner,sun8i-h3-ccu";
< 			reg = <0x01c20000 0x400>;
< 			clocks = <&osc24M>, <&osc32k>;
< 			clock-names = "hosc", "losc";
< 			#clock-cells = <1>;
< 			#reset-cells = <1>;
< 		};
< 
336c502
< 			clocks = <&ccu CLK_BUS_PIO>;
---
> 			clocks = <&bus_gates 69>;
342c508
< 			emac_rgmii_pins: emac0@0 {
---
> 			rgmii_pins: rgmii_pins {
344,347c510,513
< 						"PD4", "PD5", "PD7",
< 						"PD8", "PD9", "PD10",
< 						"PD12", "PD13", "PD15",
< 						"PD16", "PD17";
---
> 						 "PD4", "PD5", "PD7",
> 						 "PD8", "PD9", "PD10",
> 						 "PD12", "PD13", "PD15",
> 						 "PD16", "PD17";
352a519,525
> 			uart0_pins_a: uart0@0 {
> 				allwinner,pins = "PA4", "PA5";
> 				allwinner,function = "uart0";
> 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
> 			};
> 
384a558
> 		};
386,391c560,564
< 			uart0_pins_a: uart0@0 {
< 				allwinner,pins = "PA4", "PA5";
< 				allwinner,function = "uart0";
< 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
< 			};
---
> 		ahb_rst: reset@01c202c0 {
> 			#reset-cells = <1>;
> 			compatible = "allwinner,sun6i-a31-ahb1-reset";
> 			reg = <0x01c202c0 0xc>;
> 		};
393,398c566,575
< 			uart1_pins_a: uart1@0 {
< 				allwinner,pins = "PG6", "PG7", "PG8", "PG9";
< 				allwinner,function = "uart1";
< 				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
< 			};
---
> 		apb1_rst: reset@01c202d0 {
> 			#reset-cells = <1>;
> 			compatible = "allwinner,sun6i-a31-clock-reset";
> 			reg = <0x01c202d0 0x4>;
> 		};
> 
> 		apb2_rst: reset@01c202d8 {
> 			#reset-cells = <1>;
> 			compatible = "allwinner,sun6i-a31-clock-reset";
> 			reg = <0x01c202d8 0x4>;
421,422c598,599
< 			clocks = <&ccu CLK_BUS_UART0>;
< 			resets = <&ccu RST_BUS_UART0>;
---
> 			clocks = <&bus_gates 112>;
> 			resets = <&apb2_rst 16>;
434,435c611,612
< 			clocks = <&ccu CLK_BUS_UART1>;
< 			resets = <&ccu RST_BUS_UART1>;
---
> 			clocks = <&bus_gates 113>;
> 			resets = <&apb2_rst 17>;
447,448c624,625
< 			clocks = <&ccu CLK_BUS_UART2>;
< 			resets = <&ccu RST_BUS_UART2>;
---
> 			clocks = <&bus_gates 114>;
> 			resets = <&apb2_rst 18>;
460,461c637,638
< 			clocks = <&ccu CLK_BUS_UART3>;
< 			resets = <&ccu RST_BUS_UART3>;
---
> 			clocks = <&bus_gates 115>;
> 			resets = <&apb2_rst 19>;
467c644
< 		emac: ethernet@1c30000 {
---
> 		emac: ethernet@01c30000 {
469,471c646,647
< 			syscon = <&syscon>;
< 			reg = <0x01c30000 0x104>;
< 			reg-names = "emac";
---
> 			reg = <0x01c30000 0x2000>, <0x01c00030 0x4>;
> 			reg-names = "emac", "syscon";
473c649
< 			resets = <&ccu RST_BUS_EMAC>, <&ccu RST_BUS_EPHY>;
---
> 			resets = <&ahb_rst 17>, <&ahb_rst 66>;
475c651
< 			clocks = <&ccu CLK_BUS_EMAC>, <&ccu CLK_BUS_EPHY>;
---
> 			clocks = <&bus_gates 17>, <&bus_gates 128>;
diff -r u-boot/arch/arm/dts/sun8i-h3-orangepi-2.dts u-boot-2016.09-rc2/arch/arm/dts/sun8i-h3-orangepi-2.dts
57,58d56
< 		/* ethernet0 is the H3 emac, defined in sun8i-h3.dtsi */
< 		ethernet1 = &rtl8189;
136,143d133
< 
< 	/*
< 	 * Explicitly define the sdio device, so that we can add an ethernet
< 	 * alias for it (which e.g. makes u-boot set a mac-address).
< 	 */
< 	rtl8189: sdio_wifi@1 {
< 		reg = <1>;
< 	};
196a187,199
> 
> &emac {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&rgmii_pins>;
> 	phy-mode = "rgmii";
> 	phy = <&phy1>;
> 	status = "okay";
> 
> 	phy1: ethernet-phy@1 {
> 		reg = <1>;
> 	};
> };
> 
diff -r u-boot/arch/arm/dts/sun8i-h3-orangepi-lite.dts u-boot-2016.09-rc2/arch/arm/dts/sun8i-h3-orangepi-lite.dts
57c57
< 		ethernet0 = &rtl8189ftv;
---
> 		ethernet1 = &rtl8189ftv;
diff -r u-boot/arch/arm/dts/sun8i-h3-orangepi-pc.dts u-boot-2016.09-rc2/arch/arm/dts/sun8i-h3-orangepi-pc.dts
66,72c66
< 		pinctrl-0 = <&leds_opc>, <&leds_r_opc>;
< 
< 		pwr_led {
< 			label = "orangepi:green:pwr";
< 			gpios = <&r_pio 0 10 GPIO_ACTIVE_HIGH>;
< 			default-state = "on";
< 		};
---
> 		pinctrl-0 = <&leds_opc>;
75c69
< 			label = "orangepi:red:status";
---
> 			label = "status:red:user";
79a74,85
> 	r_leds {
> 		compatible = "gpio-leds";
> 		pinctrl-names = "default";
> 		pinctrl-0 = <&leds_r_opc>;
> 
> 		tx {
> 			label = "pwr:green:user";
> 			gpios = <&r_pio 0 10 GPIO_ACTIVE_HIGH>;
> 			default-state = "on";
> 		};
> 	};
> 
81a88,89
> 		input-name = "sw4";
> 
85c93
< 		sw4 {
---
> 		sw4@0 {
151c159
< 		allwinner,pins = "PL3";
---
> 		allwinner,pins = "PL03";
170,171d177
< /*	pinctrl-names = "default";*/
< /*	pinctrl-0 = <&emac_rgmii_pins>;*/
174c180
< /*	allwinner,use-internal-phy;*/
---
> 	allwinner,use-internal-phy;
176a183
> 
diff -r u-boot/arch/arm/dts/sun8i-h3-orangepi-pc-plus.dts u-boot-2016.09-rc2/arch/arm/dts/sun8i-h3-orangepi-pc-plus.dts
47,48c47
< 	model = "Xunlong Orange Pi PC Plus";
< 	compatible = "xunlong,orangepi-pc-plus", "allwinner,sun8i-h3";
---
> 	model = "Xunlong Orange Pi PC / PC Plus";
diff -r u-boot/arch/arm/dts/sun8i-h3-orangepi-plus.dts u-boot-2016.09-rc2/arch/arm/dts/sun8i-h3-orangepi-plus.dts
61,72d60
< 
< 	reg_gmac_3v3: gmac-3v3 {
< 		compatible = "regulator-fixed";
< 		pinctrl-names = "default";
< 		pinctrl-0 = <&gmac_power_pin_orangepi>;
< 		regulator-name = "gmac-3v3";
< 		regulator-min-microvolt = <3300000>;
< 		regulator-max-microvolt = <3300000>;
< 		startup-delay-us = <100000>;
< 		enable-active-high;
< 		gpio = <&pio 3 6 GPIO_ACTIVE_HIGH>;
< 	};
119,125d106
< 
< 	gmac_power_pin_orangepi: gmac_power_pin@0 {
< 		allwinner,pins = "PD6";
< 		allwinner,function = "gpio_out";
< 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
< 	};
130,144d110
< };
< 
< &emac {
< 	pinctrl-names = "default";
< 	pinctrl-0 = <&emac_rgmii_pins>;
< 	phy-supply = <&reg_gmac_3v3>;
< 	phy = <&phy1>;
< 	phy-mode = "rgmii";
< 
< 	allwinner,leds-active-low;
< 	status = "okay";
< 
< 	phy1: ethernet-phy@1 {
< 		reg = <0>;
< 	};
diff -r u-boot/arch/arm/dts/sun8i-q8-common.dtsi u-boot-2016.09-rc2/arch/arm/dts/sun8i-q8-common.dtsi
42,43c42,44
< #include "sunxi-reference-design-tablet.dtsi"
< #include "sun8i-reference-design-tablet.dtsi"
---
> #include "sunxi-q8-common.dtsi"
> 
> #include <dt-bindings/pwm/pwm.h>
48,49d48
< 		/* Make u-boot set mac-address for wifi without an eeprom */
< 		ethernet0 = &sdio_wifi;
52,66c51,52
< 	q8_hardwaremgr {
< 		compatible = "allwinner,sunxi-q8-hardwaremgr";
< 		touchscreen-i2c-bus = <&i2c0>;
< 		touchscreen-supply = <&reg_ldo_io1>;
< 		touchscreen-power-gpios = <&pio 7 1 GPIO_ACTIVE_HIGH>; /* PH1 */
< 	};
< 
< 	wifi_pwrseq: wifi_pwrseq {
< 		compatible = "mmc-pwrseq-simple";
< 		/*
< 		 * Q8 boards use various PL# pins as wifi-en. On other boards
< 		 * these may be connected to a wifi module output pin. To avoid
< 		 * short-circuits we configure these as inputs with pull-ups via
< 		 * pinctrl, instead of listing them as active-low reset-gpios.
< 		 */
---
> 	backlight: backlight {
> 		compatible = "pwm-backlight";
68,70c54,58
< 		pinctrl-0 = <&wifi_pwrseq_pin_q8>;
< 		/* The esp8089 needs 200 ms after driving wifi-en high */
< 		post-power-on-delay-ms = <200>;
---
> 		pinctrl-0 = <&bl_en_pin_q8>;
> 		pwms = <&pwm 0 50000 PWM_POLARITY_INVERTED>;
> 		brightness-levels = <0 10 20 30 40 50 60 70 80 90 100>;
> 		default-brightness-level = <8>;
> 		enable-gpios = <&pio 7 6 GPIO_ACTIVE_HIGH>; /* PH6 */
72d59
< };
74,75c61,63
< &ehci0 {
< 	status  = "okay";
---
> 	chosen {
> 		stdout-path = "serial0:115200n8";
> 	};
78c66
< &mmc1 {
---
> &mmc0 {
80,82c68,69
< 	pinctrl-0 = <&mmc1_pins_a>;
< 	vmmc-supply = <&reg_dldo1>;
< 	mmc-pwrseq = <&wifi_pwrseq>;
---
> 	pinctrl-0 = <&mmc0_pins_a>, <&mmc0_cd_pin_q8>;
> 	vmmc-supply = <&reg_dcdc1>;
84c71,72
< 	non-removable;
---
> 	cd-gpios = <&pio 1 4 GPIO_ACTIVE_HIGH>; /* PB4 */
> 	cd-inverted;
86,89d73
< 
< 	sdio_wifi: sdio_wifi@1 {
< 		reg = <1>;
< 	};
92,94c76,82
< &mmc1_pins_a {
< 	allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
< };
---
> &pio {
> 	bl_en_pin_q8: bl_en_pin@0 {
> 		allwinner,pins = "PH6";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
> 	};
96,98c84,85
< &r_pio {
< 	wifi_pwrseq_pin_q8: wifi_pwrseq_pin@0 {
< 		allwinner,pins = "PL6", "PL7", "PL11";
---
> 	mmc0_cd_pin_q8: mmc0_cd_pin@0 {
> 		allwinner,pins = "PB4";
105,106c92,101
< &usbphy {
< 	usb1_vbus-supply = <&reg_dldo1>;
---
> &r_rsb {
> 	status = "okay";
> 
> 	axp22x: pmic@3a3 {
> 		compatible = "x-powers,axp223";
> 		reg = <0x3a3>;
> 		interrupt-parent = <&nmi_intc>;
> 		interrupts = <0 IRQ_TYPE_LEVEL_LOW>;
> 		eldoin-supply = <&reg_dcdc1>;
> 	};
109,113c104,110
< &gsl1680 {
< 	touchscreen-size-x = <1024>;
< 	touchscreen-size-y = <600>;
< 	touchscreen-fw-name = "silead/gsl1680-q8-700.fw";
< 	status = "okay";
---
> #include "axp22x.dtsi"
> 
> &reg_aldo1 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
> 	regulator-name = "vcc-io";
116,117c113,122
< &reg_ldo_io1 {
< 	regulator-min-microvolt = <3300000>;
---
> &reg_aldo2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <2350000>;
> 	regulator-max-microvolt = <2650000>;
> 	regulator-name = "vdd-dll";
> };
> 
> &reg_aldo3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <2700000>;
119c124,172
< 	regulator-name = "vcc-touchscreen";
---
> 	regulator-name = "vcc-pll-avcc";
> };
> 
> &reg_dc1sw {
> 	regulator-name = "vcc-lcd";
> };
> 
> &reg_dc5ldo {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-cpus";
> };
> 
> &reg_dcdc1 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <3000000>;
> 	regulator-max-microvolt = <3000000>;
> 	regulator-name = "vcc-3v0";
> };
> 
> &reg_dcdc2 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-sys";
> };
> 
> &reg_dcdc3 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <900000>;
> 	regulator-max-microvolt = <1400000>;
> 	regulator-name = "vdd-cpu";
> };
> 
> &reg_dcdc5 {
> 	regulator-always-on;
> 	regulator-min-microvolt = <1500000>;
> 	regulator-max-microvolt = <1500000>;
> 	regulator-name = "vcc-dram";
> };
> 
> &reg_rtc_ldo {
> 	regulator-name = "vcc-rtc";
> };
> 
> &r_uart {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&r_uart_pins_a>;
120a174,177
> };
> 
> &simplefb_lcd {
> 	vcc-lcd-supply = <&reg_dc1sw>;
diff -r u-boot/arch/arm/dts/sun8i-r16-parrot.dts u-boot-2016.09-rc2/arch/arm/dts/sun8i-r16-parrot.dts
96,99c96
< 	/*
< 	 * FIXME: An as-yet-unknown accelerometer is connected to this
< 	 * i2c bus.
< 	 */
---
> 	/* FIXME: An as-yet-unknown accelerometer is connected to this i2c bus. */
Only in u-boot/arch/arm/dts: sun8i-reference-design-tablet.dtsi
diff -r u-boot/arch/arm/dts/sun9i-a80-cubieboard4.dts u-boot-2016.09-rc2/arch/arm/dts/sun9i-a80-cubieboard4.dts
47a48
> #include "sunxi-common-regulators.dtsi"
80a82,97
> &pio {
> 	led_pins_cubieboard4: led-pins@0 {
> 		allwinner,pins = "PH6", "PH17";
> 		allwinner,function = "gpio_out";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
> 	};
> 
> 	mmc0_cd_pin_cubieboard4: mmc0_cd_pin@0 {
> 		allwinner,pins = "PH18";
> 		allwinner,function = "gpio_in";
> 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
> 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
> 	};
> };
> 
84c101
< 	vmmc-supply = <&reg_dcdc1>;
---
> 	vmmc-supply = <&reg_vcc3v0>;
94c111
< 	vmmc-supply = <&reg_dcdc1>;
---
> 	vmmc-supply = <&reg_vcc3v0>;
106,121d122
< &pio {
< 	led_pins_cubieboard4: led-pins@0 {
< 		allwinner,pins = "PH6", "PH17";
< 		allwinner,function = "gpio_out";
< 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 		allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
< 	};
< 
< 	mmc0_cd_pin_cubieboard4: mmc0_cd_pin@0 {
< 		allwinner,pins = "PH18";
< 		allwinner,function = "gpio_in";
< 		allwinner,drive = <SUN4I_PINCTRL_10_MA>;
< 		allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
< 	};
< };
< 
128,252d128
< 
< 	axp809: pmic@3a3 {
< 		reg = <0x3a3>;
< 		interrupt-parent = <&nmi_intc>;
< 		interrupts = <0 IRQ_TYPE_LEVEL_LOW>;
< 
< 		regulators {
< 			reg_aldo1: aldo1 {
< 				/*
< 				 * TODO: This should be handled by the
< 				 * USB PHY driver.
< 				 */
< 				regulator-always-on;
< 				regulator-min-microvolt = <3000000>;
< 				regulator-max-microvolt = <3000000>;
< 				regulator-name = "vcc33-usbh";
< 			};
< 
< 			reg_aldo2: aldo2 {
< 				regulator-min-microvolt = <1800000>;
< 				regulator-max-microvolt = <1800000>;
< 				regulator-name = "vcc-pb-io-cam";
< 			};
< 
< 			aldo3 {
< 				/* unused */
< 			};
< 
< 			reg_dc5ldo: dc5ldo {
< 				regulator-always-on;
< 				regulator-min-microvolt = <800000>;
< 				regulator-max-microvolt = <1100000>;
< 				regulator-name = "vdd-cpus-09-usbh";
< 			};
< 
< 			reg_dcdc1: dcdc1 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <3000000>;
< 				regulator-max-microvolt = <3000000>;
< 				regulator-name = "vcc-3v";
< 			};
< 
< 			reg_dcdc2: dcdc2 {
< 				regulator-min-microvolt = <800000>;
< 				regulator-max-microvolt = <1100000>;
< 				regulator-name = "vdd-gpu";
< 			};
< 
< 			reg_dcdc3: dcdc3 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <800000>;
< 				regulator-max-microvolt = <1100000>;
< 				regulator-name = "vdd-cpua";
< 			};
< 
< 			reg_dcdc4: dcdc4 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <800000>;
< 				regulator-max-microvolt = <1100000>;
< 				regulator-name = "vdd-sys-usb0-hdmi";
< 			};
< 
< 			reg_dcdc5: dcdc5 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <1425000>;
< 				regulator-max-microvolt = <1575000>;
< 				regulator-name = "vcc-dram";
< 			};
< 
< 			reg_dldo1: dldo1 {
< 				/*
< 				 * The WiFi chip supports a wide range
< 				 * (3.0 ~ 4.8V) of voltages, and so does
< 				 * this regulator (3.0 ~ 4.2V), but
< 				 * Allwinner SDK always sets it to 3.3V.
< 				 */
< 				regulator-min-microvolt = <3300000>;
< 				regulator-max-microvolt = <3300000>;
< 				regulator-name = "vcc-wifi";
< 			};
< 
< 			reg_dldo2: dldo2 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <3000000>;
< 				regulator-max-microvolt = <3000000>;
< 				regulator-name = "vcc-pl";
< 			};
< 
< 			reg_eldo1: eldo1 {
< 				regulator-min-microvolt = <1200000>;
< 				regulator-max-microvolt = <1200000>;
< 				regulator-name = "vcc-dvdd-cam";
< 			};
< 
< 			reg_eldo2: eldo2 {
< 				regulator-min-microvolt = <1800000>;
< 				regulator-max-microvolt = <1800000>;
< 				regulator-name = "vcc-pe";
< 			};
< 
< 			reg_eldo3: eldo3 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <3000000>;
< 				regulator-max-microvolt = <3000000>;
< 				regulator-name = "vcc-pm-codec-io1";
< 			};
< 
< 			reg_ldo_io0: ldo_io0 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <3000000>;
< 				regulator-max-microvolt = <3000000>;
< 				regulator-name = "vcc-pg";
< 			};
< 
< 			reg_ldo_io1: ldo_io1 {
< 				regulator-min-microvolt = <2500000>;
< 				regulator-max-microvolt = <2500000>;
< 				regulator-name = "vcc-pa-gmac-2v5";
< 			};
< 
< 			reg_rtc_ldo: rtc_ldo {
< 				regulator-name = "vcc-rtc-vdd1v8-io";
< 			};
< 		};
< 	};
254,255d129
< 
< #include "axp809.dtsi"
diff -r u-boot/arch/arm/dts/sun9i-a80-optimus.dts u-boot-2016.09-rc2/arch/arm/dts/sun9i-a80-optimus.dts
46a47
> #include "sunxi-common-regulators.dtsi"
87,97d87
< 	reg_usb1_vbus: usb1-vbus {
< 		compatible = "regulator-fixed";
< 		pinctrl-names = "default";
< 		pinctrl-0 = <&usb1_vbus_pin_optimus>;
< 		regulator-name = "usb1-vbus";
< 		regulator-min-microvolt = <5000000>;
< 		regulator-max-microvolt = <5000000>;
< 		enable-active-high;
< 		gpio = <&pio 7 4 GPIO_ACTIVE_HIGH>; /* PH4 */
< 	};
< 
122,146d111
< &mmc0 {
< 	pinctrl-names = "default";
< 	pinctrl-0 = <&mmc0_pins>, <&mmc0_cd_pin_optimus>;
< 	vmmc-supply = <&reg_dcdc1>;
< 	bus-width = <4>;
< 	cd-gpios = <&pio 7 18 GPIO_ACTIVE_HIGH>; /* PH8 */
< 	cd-inverted;
< 	status = "okay";
< };
< 
< &mmc2 {
< 	pinctrl-names = "default";
< 	pinctrl-0 = <&mmc2_8bit_pins>;
< 	vmmc-supply = <&reg_dcdc1>;
< 	bus-width = <8>;
< 	non-removable;
< 	cap-mmc-hw-reset;
< 	status = "okay";
< };
< 
< &mmc2_8bit_pins {
< 	/* Increase drive strength for DDR modes */
< 	allwinner,drive = <SUN4I_PINCTRL_40_MA>;
< };
< 
184a150,180
> &mmc0 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&mmc0_pins>, <&mmc0_cd_pin_optimus>;
> 	vmmc-supply = <&reg_vcc3v0>;
> 	bus-width = <4>;
> 	cd-gpios = <&pio 7 18 GPIO_ACTIVE_HIGH>; /* PH8 */
> 	cd-inverted;
> 	status = "okay";
> };
> 
> &mmc2 {
> 	pinctrl-names = "default";
> 	pinctrl-0 = <&mmc2_8bit_pins>;
> 	vmmc-supply = <&reg_vcc3v0>;
> 	bus-width = <8>;
> 	non-removable;
> 	cap-mmc-hw-reset;
> 	status = "okay";
> };
> 
> &mmc2_8bit_pins {
> 	/* Increase drive strength for DDR modes */
> 	allwinner,drive = <SUN4I_PINCTRL_40_MA>;
> };
> 
> &reg_usb1_vbus {
> 	pinctrl-0 = <&usb1_vbus_pin_optimus>;
> 	gpio = <&pio 7 4 GPIO_ACTIVE_HIGH>; /* PH4 */
> 	status = "okay";
> };
> 
200,324d195
< 
< 	axp809: pmic@3a3 {
< 		reg = <0x3a3>;
< 		interrupt-parent = <&nmi_intc>;
< 		interrupts = <0 IRQ_TYPE_LEVEL_LOW>;
< 
< 		regulators {
< 			reg_aldo1: aldo1 {
< 				/*
< 				 * TODO: This should be handled by the
< 				 * USB PHY driver.
< 				 */
< 				regulator-always-on;
< 				regulator-min-microvolt = <3000000>;
< 				regulator-max-microvolt = <3000000>;
< 				regulator-name = "vcc33-usbh";
< 			};
< 
< 			reg_aldo2: aldo2 {
< 				regulator-min-microvolt = <1800000>;
< 				regulator-max-microvolt = <1800000>;
< 				regulator-name = "vcc-pb-io-cam";
< 			};
< 
< 			aldo3 {
< 				/* unused */
< 			};
< 
< 			reg_dc5ldo: dc5ldo {
< 				regulator-always-on;
< 				regulator-min-microvolt = <800000>;
< 				regulator-max-microvolt = <1100000>;
< 				regulator-name = "vdd-cpus-09-usbh";
< 			};
< 
< 			reg_dcdc1: dcdc1 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <3000000>;
< 				regulator-max-microvolt = <3000000>;
< 				regulator-name = "vcc-3v";
< 			};
< 
< 			reg_dcdc2: dcdc2 {
< 				regulator-min-microvolt = <800000>;
< 				regulator-max-microvolt = <1100000>;
< 				regulator-name = "vdd-gpu";
< 			};
< 
< 			reg_dcdc3: dcdc3 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <800000>;
< 				regulator-max-microvolt = <1100000>;
< 				regulator-name = "vdd-cpua";
< 			};
< 
< 			reg_dcdc4: dcdc4 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <800000>;
< 				regulator-max-microvolt = <1100000>;
< 				regulator-name = "vdd-sys-usb0-hdmi";
< 			};
< 
< 			reg_dcdc5: dcdc5 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <1425000>;
< 				regulator-max-microvolt = <1575000>;
< 				regulator-name = "vcc-dram";
< 			};
< 
< 			reg_dldo1: dldo1 {
< 				/*
< 				 * The WiFi chip supports a wide range
< 				 * (3.0 ~ 4.8V) of voltages, and so does
< 				 * this regulator (3.0 ~ 4.2V), but
< 				 * Allwinner SDK always sets it to 3.3V.
< 				 */
< 				regulator-min-microvolt = <3300000>;
< 				regulator-max-microvolt = <3300000>;
< 				regulator-name = "vcc-wifi";
< 			};
< 
< 			reg_dldo2: dldo2 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <3000000>;
< 				regulator-max-microvolt = <3000000>;
< 				regulator-name = "vcc-pl";
< 			};
< 
< 			reg_eldo1: eldo1 {
< 				regulator-min-microvolt = <1200000>;
< 				regulator-max-microvolt = <1200000>;
< 				regulator-name = "vcc-dvdd-cam";
< 			};
< 
< 			reg_eldo2: eldo2 {
< 				regulator-min-microvolt = <1800000>;
< 				regulator-max-microvolt = <1800000>;
< 				regulator-name = "vcc-pe";
< 			};
< 
< 			reg_eldo3: eldo3 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <3000000>;
< 				regulator-max-microvolt = <3000000>;
< 				regulator-name = "vcc-pm-codec-io1";
< 			};
< 
< 			reg_ldo_io0: ldo_io0 {
< 				regulator-always-on;
< 				regulator-min-microvolt = <3000000>;
< 				regulator-max-microvolt = <3000000>;
< 				regulator-name = "vcc-pg";
< 			};
< 
< 			reg_ldo_io1: ldo_io1 {
< 				regulator-min-microvolt = <2500000>;
< 				regulator-max-microvolt = <2500000>;
< 				regulator-name = "vcc-pa-gmac-2v5";
< 			};
< 
< 			reg_rtc_ldo: rtc_ldo {
< 				regulator-name = "vcc-rtc-vdd1v8-io";
< 			};
< 		};
< 	};
326,327d196
< 
< #include "axp809.dtsi"
Only in u-boot/arch/arm/dts: sunxi-reference-design-tablet.dtsi
Only in u-boot/arch/arm/dts: tegra124-cei-tk1-som.dts
diff -r u-boot/arch/arm/dts/tegra186.dtsi u-boot-2016.09-rc2/arch/arm/dts/tegra186.dtsi
48c48
< 		clock-names = "div-clk";
---
> 		clock-names = "i2c";
61c61
< 		clock-names = "div-clk";
---
> 		clock-names = "i2c";
74c74
< 		clock-names = "div-clk";
---
> 		clock-names = "i2c";
87c87
< 		clock-names = "div-clk";
---
> 		clock-names = "i2c";
100c100
< 		clock-names = "div-clk";
---
> 		clock-names = "i2c";
113c113
< 		clock-names = "div-clk";
---
> 		clock-names = "i2c";
123c123
< 		reset-names = "sdhci";
---
> 		reset-names = "sdmmc";
124a125
> 		clock-names = "sdmmc";
133c134
< 		reset-names = "sdhci";
---
> 		reset-names = "sdmmc";
134a136
> 		clock-names = "sdmmc";
167c169
< 		clock-names = "div-clk";
---
> 		clock-names = "i2c";
180c182
< 		clock-names = "div-clk";
---
> 		clock-names = "i2c";
311a314
> 			nvidia,bpmp = <&bpmp>;
Only in u-boot/arch/arm/dts: tegra186-p2771-0000-000.dts
Only in u-boot/arch/arm/dts: tegra186-p2771-0000-500.dts
Only in u-boot-2016.09-rc2/arch/arm/dts: tegra186-p2771-0000-a02.dts
Only in u-boot-2016.09-rc2/arch/arm/dts: tegra186-p2771-0000-b00.dts
diff -r u-boot/arch/arm/dts/uniphier-ph1-sld3.dtsi u-boot-2016.09-rc2/arch/arm/dts/uniphier-ph1-sld3.dtsi
64d63
< 		u-boot,dm-pre-reloc;
diff -r u-boot/arch/arm/dts/uniphier-ph1-sld3-ref.dts u-boot-2016.09-rc2/arch/arm/dts/uniphier-ph1-sld3-ref.dts
88,95d87
< 
< &mio {
<        u-boot,dm-pre-reloc;
< };
< 
< &emmc {
<        u-boot,dm-pre-reloc;
< };
Only in u-boot/arch/arm/include/asm: arch
diff -r u-boot/arch/arm/include/asm/arch-armada100/config.h u-boot-2016.09-rc2/arch/arm/include/asm/arch-armada100/config.h
18a19,20
> /* default Dcache Line length for armada100 */
> #define CONFIG_SYS_CACHELINE_SIZE       32
diff -r u-boot/arch/arm/include/asm/arch-fsl-layerscape/config.h u-boot-2016.09-rc2/arch/arm/include/asm/arch-fsl-layerscape/config.h
38a39
> #define CONFIG_SYS_CACHELINE_SIZE	64
151a153
> #define CONFIG_SYS_CACHELINE_SIZE		64
diff -r u-boot/arch/arm/include/asm/arch-ls102xa/config.h u-boot-2016.09-rc2/arch/arm/include/asm/arch-ls102xa/config.h
9a10,11
> #define CONFIG_SYS_CACHELINE_SIZE		64
> 
diff -r u-boot/arch/arm/include/asm/arch-mx5/imx-regs.h u-boot-2016.09-rc2/arch/arm/include/asm/arch-mx5/imx-regs.h
11a12,13
> #define CONFIG_SYS_CACHELINE_SIZE 64
> 
diff -r u-boot/arch/arm/include/asm/arch-mx6/imx-regs.h u-boot-2016.09-rc2/arch/arm/include/asm/arch-mx6/imx-regs.h
11a12,17
> #ifdef CONFIG_MX6UL
> #define CONFIG_SYS_CACHELINE_SIZE	64
> #else
> #define CONFIG_SYS_CACHELINE_SIZE	32
> #endif
> 
diff -r u-boot/arch/arm/include/asm/arch-mx7/imx-regs.h u-boot-2016.09-rc2/arch/arm/include/asm/arch-mx7/imx-regs.h
11a12,13
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/arch/arm/include/asm/arch-sunxi/clock_sun6i.h u-boot-2016.09-rc2/arch/arm/include/asm/arch-sunxi/clock_sun6i.h
119,121c119
< 	u32 reserved21[5];
< 	u32 pll5_tuning_cfg;	/* 0x260 PLL5 Tuning config */
< 	u32 reserved21_5[7];
---
> 	u32 reserved21[13];
227,231d224
< 
< #define CCM_PLL5_TUN_LOCK_TIME(x)	(((x) & 0x7) << 24)
< #define CCM_PLL5_TUN_LOCK_TIME_MASK	CCM_PLL5_TUN_LOCK_TIME(0x7)
< #define CCM_PLL5_TUN_INIT_FREQ(x)	(((x) & 0x7f) << 16)
< #define CCM_PLL5_TUN_INIT_FREQ_MASK	CCM_PLL5_TUN_INIT_FREQ(0x7f)
diff -r u-boot/arch/arm/include/asm/arch-sunxi/cpu_sun4i.h u-boot-2016.09-rc2/arch/arm/include/asm/arch-sunxi/cpu_sun4i.h
79,81d78
< #ifndef CONFIG_SUNXI_GEN_SUN6I
< #define SUNXI_PWM_BASE			0x01c20e00
< #endif
83,85d79
< #ifdef CONFIG_SUNXI_GEN_SUN6I
< #define SUNXI_PWM_BASE			0x01c21400
< #else
87d80
< #endif
diff -r u-boot/arch/arm/include/asm/arch-sunxi/gpio.h u-boot-2016.09-rc2/arch/arm/include/asm/arch-sunxi/gpio.h
153d152
< #define SUN4I_GPB_PWM		2
190,191d188
< #define SUN6I_GPH_PWM		2
< #define SUN8I_GPH_PWM		2
Only in u-boot/arch/arm/include/asm/arch-sunxi: pwm.h
diff -r u-boot/arch/arm/include/asm/cache.h u-boot-2016.09-rc2/arch/arm/include/asm/cache.h
46,49c46,48
<  * The value of the largest data cache relevant to DMA operations shall be set
<  * for us in CONFIG_SYS_CACHELINE_SIZE.  In some cases this may be a larger
<  * value than found in the L1 cache but this is OK to use in terms of
<  * alignment.
---
>  * The current upper bound for ARM L1 data cache line sizes is 64 bytes.  We
>  * use that value for aligning DMA buffers unless the board config has specified
>  * an alternate cache line size.
50a50
> #ifdef CONFIG_SYS_CACHELINE_SIZE
51a52,54
> #else
> #define ARCH_DMA_MINALIGN	64
> #endif
diff -r u-boot/arch/arm/Kconfig u-boot-2016.09-rc2/arch/arm/Kconfig
10d9
< 	select SYS_CACHE_SHIFT_6
17c16
< 	bool
---
>         bool
20c19
< 	bool
---
>         bool
23,24c22
< 	bool
< 	select SYS_CACHE_SHIFT_5
---
>         bool
27,28c25
< 	bool
< 	select SYS_CACHE_SHIFT_5
---
>         bool
31,32c28
< 	bool
< 	select SYS_CACHE_SHIFT_5
---
>         bool
35,36c31
< 	bool
< 	select SYS_CACHE_SHIFT_5
---
>         bool
39,40c34
< 	bool
< 	select SYS_CACHE_SHIFT_5
---
>         bool
43,45c37,38
< 	bool
< 	select HAS_VBAR
< 	select SYS_CACHE_SHIFT_5
---
>         bool
>         select HAS_VBAR
48,51c41,43
< 	bool
< 	select HAS_VBAR
< 	select HAS_THUMB2
< 	select SYS_CACHE_SHIFT_6
---
>         bool
>         select HAS_VBAR
>         select HAS_THUMB2
55,56c47
< 	select HAS_THUMB2
< 	select SYS_CACHE_SHIFT_5
---
>         select HAS_THUMB2
59,60c50
< 	bool
< 	select SYS_CACHE_SHIFT_5
---
>         bool
63,64c53
< 	bool
< 	select SYS_CACHE_SHIFT_5
---
>         bool
67,76c56,65
< 	default "arm720t" if CPU_ARM720T
< 	default "arm920t" if CPU_ARM920T
< 	default "arm926ejs" if CPU_ARM926EJS
< 	default "arm946es" if CPU_ARM946ES
< 	default "arm1136" if CPU_ARM1136
< 	default "arm1176" if CPU_ARM1176
< 	default "armv7" if CPU_V7
< 	default "armv7m" if CPU_V7M
< 	default "pxa" if CPU_PXA
< 	default "sa1100" if CPU_SA1100
---
>         default "arm720t" if CPU_ARM720T
>         default "arm920t" if CPU_ARM920T
>         default "arm926ejs" if CPU_ARM926EJS
>         default "arm946es" if CPU_ARM946ES
>         default "arm1136" if CPU_ARM1136
>         default "arm1176" if CPU_ARM1176
>         default "armv7" if CPU_V7
>         default "armv7m" if CPU_V7M
>         default "pxa" if CPU_PXA
>         default "sa1100" if CPU_SA1100
93,107d81
< config SYS_CACHE_SHIFT_5
< 	bool
< 
< config SYS_CACHE_SHIFT_6
< 	bool
< 
< config SYS_CACHE_SHIFT_7
< 	bool
< 
< config SYS_CACHELINE_SIZE
< 	int
< 	default 128 if SYS_CACHE_SHIFT_7
< 	default 64 if SYS_CACHE_SHIFT_6
< 	default 32 if SYS_CACHE_SHIFT_5
< 
401,403c375,377
< 	bool "Support etamin"
< 	select CPU_V7
< 	select SUPPORT_SPL
---
>         bool "Support etamin"
>         select CPU_V7
>         select SUPPORT_SPL
659a634,635
> 	select USB_STORAGE
> 	select USB_KEYBOARD
894d869
< 	select SYS_CACHE_SHIFT_7
diff -r u-boot/arch/arm/lib/cache.c u-boot-2016.09-rc2/arch/arm/lib/cache.c
12a13,16
> #ifndef CONFIG_SYS_CACHELINE_SIZE
> #define CONFIG_SYS_CACHELINE_SIZE 32
> #endif
> 
diff -r u-boot/arch/arm/lib/cache-cp15.c u-boot-2016.09-rc2/arch/arm/lib/cache-cp15.c
64,66d63
< #ifdef CONFIG_ARMV7_LPAE
< 	u64 *page_table = (u64 *)gd->arch.tlb_addr;
< #else
68,69d64
< #endif
< 	unsigned long startpt, stoppt;
78,89c73
< 
< 	/*
< 	 * Make sure range is cache line aligned
< 	 * Only CPU maintains page tables, hence it is safe to always
< 	 * flush complete cache lines...
< 	 */
< 
< 	startpt = (unsigned long)&page_table[start];
< 	startpt &= ~(CONFIG_SYS_CACHELINE_SIZE - 1);
< 	stoppt = (unsigned long)&page_table[end];
< 	stoppt = ALIGN(stoppt, CONFIG_SYS_CACHELINE_SIZE);
< 	mmu_page_table_flush(startpt, stoppt);
---
> 	mmu_page_table_flush((u32)&page_table[start], (u32)&page_table[end]);
diff -r u-boot/arch/arm/mach-kirkwood/include/mach/config.h u-boot-2016.09-rc2/arch/arm/mach-kirkwood/include/mach/config.h
26a27,28
> #define CONFIG_SYS_CACHELINE_SIZE	32
> 				/* default Dcache Line length for kirkwood */
diff -r u-boot/arch/arm/mach-mvebu/cpu.c u-boot-2016.09-rc2/arch/arm/mach-mvebu/cpu.c
455,461d454
< 	u32 reg;
< 
< 	if (mvebu_soc_family() == MVEBU_SOC_A38X)
< 		reg = MVEBU_DFX_DIV_CLK_CTRL(1);
< 	else
< 		reg = MVEBU_CORE_DIV_CLK_CTRL(1);
< 
463c456
< 		((readl(reg) &
---
> 		((readl(MVEBU_CORE_DIV_CLK_CTRL(1)) &
diff -r u-boot/arch/arm/mach-mvebu/include/mach/config.h u-boot-2016.09-rc2/arch/arm/mach-mvebu/include/mach/config.h
28a29,30
> #define CONFIG_SYS_CACHELINE_SIZE	32
> 
diff -r u-boot/arch/arm/mach-mvebu/include/mach/soc.h u-boot-2016.09-rc2/arch/arm/mach-mvebu/include/mach/soc.h
76d75
< #define MVEBU_DFX_BASE		(MVEBU_REGISTER(0xe4000))
96d94
< #define MVEBU_DFX_DIV_CLK_CTRL(i)	(MVEBU_DFX_BASE + 0x250 + ((i) * 0x4))
diff -r u-boot/arch/arm/mach-mvebu/serdes/a38x/ctrl_pex.c u-boot-2016.09-rc2/arch/arm/mach-mvebu/serdes/a38x/ctrl_pex.c
187c187
< 			(": Link upgraded to Gen2 based on client capabilities\n");
---
> 			(": Link upgraded to Gen2 based on client cpabilities\n");
diff -r u-boot/arch/arm/mach-mvebu/serdes/a38x/high_speed_env_spec.c u-boot-2016.09-rc2/arch/arm/mach-mvebu/serdes/a38x/high_speed_env_spec.c
838,857c838,856
< 	}
< 
< 	if (test_result == SERDES_ALREADY_IN_USE) {
< 		printf("%s: Error: serdes lane %d is configured to type %s: type already in use\n",
< 		       __func__, serdes_id,
< 		       serdes_type_to_string[serdes_type]);
< 		return MV_FAIL;
< 	} else if (test_result == WRONG_NUMBER_OF_UNITS) {
< 		printf("%s: Warning: serdes lane %d is set to type %s.\n",
< 		       __func__, serdes_id,
< 		       serdes_type_to_string[serdes_type]);
< 		printf("%s: Maximum supported lanes are already set to this type (limit = %d)\n",
< 		       __func__, serd_max_num);
< 		return MV_FAIL;
< 	} else if (test_result == UNIT_NUMBER_VIOLATION) {
< 		printf("%s: Warning: serdes lane %d type is %s: current device support only %d units of this type.\n",
< 		       __func__, serdes_id,
< 		       serdes_type_to_string[serdes_type],
< 		       serd_max_num);
< 		return MV_FAIL;
---
> 		if (test_result == SERDES_ALREADY_IN_USE) {
> 			printf("%s: Error: serdes lane %d is configured to type %s: type already in use\n",
> 			       __func__, serdes_id,
> 			       serdes_type_to_string[serdes_type]);
> 			return MV_FAIL;
> 		} else if (test_result == WRONG_NUMBER_OF_UNITS) {
> 			printf("%s: Warning: serdes lane %d is set to type %s.\n",
> 			       __func__, serdes_id,
> 			       serdes_type_to_string[serdes_type]);
> 			printf("%s: Maximum supported lanes are already set to this type (limit = %d)\n",
> 			       __func__, serd_max_num);
> 			return MV_FAIL;
> 		} else if (test_result == UNIT_NUMBER_VIOLATION) {
> 			printf("%s: Warning: serdes lane %d type is %s: current device support only %d units of this type.\n",
> 			       __func__, serdes_id,
> 			       serdes_type_to_string[serdes_type],
> 			       serd_max_num);
> 			return MV_FAIL;
> 		}
diff -r u-boot/arch/arm/mach-sunxi/clock_sun6i.c u-boot-2016.09-rc2/arch/arm/mach-sunxi/clock_sun6i.c
151,156d150
< #ifdef CONFIG_MACH_SUN8I_H3
< 	clrsetbits_le32(&ccm->pll5_tuning_cfg, CCM_PLL5_TUN_LOCK_TIME_MASK |
< 			CCM_PLL5_TUN_INIT_FREQ_MASK,
< 			CCM_PLL5_TUN_LOCK_TIME(2) | CCM_PLL5_TUN_INIT_FREQ(16));
< #endif
< 
diff -r u-boot/arch/arm/mach-tegra/tegra124/Kconfig u-boot-2016.09-rc2/arch/arm/mach-tegra/tegra124/Kconfig
12,22d11
< config TARGET_CEI_TK1_SOM
< 	bool "Colorado Engineering Inc Tegra124 TK1-som board"
< 	select CPU_V7_HAS_NONSEC if !SPL_BUILD
< 	select CPU_V7_HAS_VIRT if !SPL_BUILD
< 	help
< 	  The Colorado Engineering Tegra TK1-SOM is a very compact
< 	  (51mmx58mm) board that is functionally almost the same as
< 	  the Jetson TK1.  The main differences are in which balls on
< 	  the SoC are assigned to which functions, and the PCIEe
< 	  configuration.
< 
40d28
< source "board/cei/cei-tk1-som/Kconfig"
diff -r u-boot/arch/arm/mach-uniphier/arm32/psci.c u-boot-2016.09-rc2/arch/arm/mach-uniphier/arm32/psci.c
154,158d153
< 
< void __secure psci_system_reset(u32 function_id)
< {
< 	reset_cpu(0);
< }
diff -r u-boot/arch/arm/mach-uniphier/dram/cmd_ddrmphy.c u-boot-2016.09-rc2/arch/arm/mach-uniphier/dram/cmd_ddrmphy.c
307c307
< 	"- dump all of the following\n"
---
> 	"- dump all of the followings\n"
diff -r u-boot/arch/arm/mach-uniphier/dram/cmd_ddrphy.c u-boot-2016.09-rc2/arch/arm/mach-uniphier/dram/cmd_ddrphy.c
261c261
< 	"- dump all of the following\n"
---
> 	"- dump all of the followings\n"
diff -r u-boot/arch/arm/mach-uniphier/Kconfig u-boot-2016.09-rc2/arch/arm/mach-uniphier/Kconfig
78d77
< 	select SYS_CACHE_SHIFT_7
diff -r u-boot/arch/arm/mach-uniphier/micro-support-card.c u-boot-2016.09-rc2/arch/arm/mach-uniphier/micro-support-card.c
2,4c2
<  * Copyright (C) 2012-2015 Panasonic Corporation
<  * Copyright (C) 2015-2016 Socionext Inc.
<  *   Author: Masahiro Yamada <yamada.masahiro@socionext.com>
---
>  * Copyright (C) 2012-2015 Masahiro Yamada <yamada.masahiro@socionext.com>
43,48c41
< 	revision &= 0xff;
< 
< 	/* revision 3.6.x card changed the revision format */
< 	printf("(CPLD version %s%d.%d)\n", revision >> 4 == 6 ? "3." : "",
< 	       revision >> 4, revision & 0xf);
< 
---
> 	printf("(CPLD version %d.%d)\n", revision >> 4, revision & 0xf);
diff -r u-boot/arch/arm/mach-uniphier/reset.c u-boot-2016.09-rc2/arch/arm/mach-uniphier/reset.c
2,4c2
<  * Copyright (C) 2012-2014 Panasonic Corporation
<  * Copyright (C) 2015-2016 Socionext Inc.
<  *   Author: Masahiro Yamada <yamada.masahiro@socionext.com>
---
>  * Copyright (C) 2012-2015 Masahiro Yamada <yamada.masahiro@socionext.com>
11d8
< #include <asm/secure.h>
15,22c12
< /* If PSCI is enabled, this is used for SYSTEM_RESET function */
< #ifdef CONFIG_ARMV7_PSCI
< #define __SECURE	__secure
< #else
< #define __SECURE
< #endif
< 
< void __SECURE reset_cpu(unsigned long ignored)
---
> void reset_cpu(unsigned long ignored)
Only in u-boot/arch/microblaze/dts/include/dt-bindings/clock: sun8i-h3-ccu.h
Only in u-boot/arch/microblaze/dts/include/dt-bindings/reset: sun8i-h3-ccu.h
Only in u-boot/arch/mips/dts/include/dt-bindings/clock: sun8i-h3-ccu.h
Only in u-boot/arch/mips/dts/include/dt-bindings/reset: sun8i-h3-ccu.h
Only in u-boot/arch/nios2/dts/include/dt-bindings/clock: sun8i-h3-ccu.h
Only in u-boot/arch/nios2/dts/include/dt-bindings/reset: sun8i-h3-ccu.h
Only in u-boot/arch/sandbox/dts/include/dt-bindings/clock: sun8i-h3-ccu.h
Only in u-boot/arch/sandbox/dts/include/dt-bindings/reset: sun8i-h3-ccu.h
diff -r u-boot/arch/x86/cpu/intel_common/cpu.c u-boot-2016.09-rc2/arch/x86/cpu/intel_common/cpu.c
45,46c45
< 	if (ret && ret != -EEXIST) {
< 		debug("%s: Microcode update failure (err=%d)\n", __func__, ret);
---
> 	if (ret && ret != -EEXIST)
48d46
< 	}
diff -r u-boot/arch/x86/cpu/intel_common/microcode.c u-boot-2016.09-rc2/arch/x86/cpu/intel_common/microcode.c
46c46
< 		return -ENOENT;
---
> 		return -EINVAL;
148,157d147
< 		if (ret == -ENOENT && ucode_base) {
< 			/*
< 			 * The microcode has been removed from the device tree
< 			 * in the build system. In that case it will have
< 			 * already been updated in car_init().
< 			 */
< 			debug("%s: Microcode data not available\n", __func__);
< 			skipped++;
< 			continue;
< 		}
diff -r u-boot/arch/x86/cpu/ivybridge/cpu.c u-boot-2016.09-rc2/arch/x86/cpu/ivybridge/cpu.c
149,150c149
< 	if (ret) {
< 		debug("%s: cpu_common_init() failed\n", __func__);
---
> 	if (ret)
152d150
< 	}
Only in u-boot/arch/x86/dts/include/dt-bindings/clock: sun8i-h3-ccu.h
Only in u-boot/arch/x86/dts/include/dt-bindings/reset: sun8i-h3-ccu.h
diff -r u-boot/arch/x86/include/asm/types.h u-boot-2016.09-rc2/arch/x86/include/asm/types.h
46a47,49
> #ifdef CONFIG_EFI_STUB_64BIT
> #define BITS_PER_LONG 64
> #else
47a51
> #endif
Only in u-boot/arch/xtensa/dts/include/dt-bindings/clock: sun8i-h3-ccu.h
Only in u-boot/arch/xtensa/dts/include/dt-bindings/reset: sun8i-h3-ccu.h
Only in u-boot/board: cei
diff -r u-boot/board/emulation/qemu-x86/MAINTAINERS u-boot-2016.09-rc2/board/emulation/qemu-x86/MAINTAINERS
7,8d6
< F:	configs/qemu-x86_efi_payload32_defconfig
< F:	configs/qemu-x86_efi_payload64_defconfig
diff -r u-boot/board/freescale/ls2080aqds/README u-boot-2016.09-rc2/board/freescale/ls2080aqds/README
115c115
< It supports following:
---
> It supports followings
diff -r u-boot/board/nvidia/venice2/as3722_init.h u-boot-2016.09-rc2/board/nvidia/venice2/as3722_init.h
21,23c21
< #if defined(CONFIG_TARGET_VENICE2)
< #define AS3722_SD0VOLTAGE_DATA	(0x2800 | AS3722_SD0VOLTAGE_REG)
< #else /* TK1 or Nyan-Big */
---
> #if defined(CONFIG_TARGET_JETSON_TK1) || defined(CONFIG_TARGET_NYAN_BIG)
24a23,24
> #else
> #define AS3722_SD0VOLTAGE_DATA	(0x2800 | AS3722_SD0VOLTAGE_REG)
28c28
< #if defined(CONFIG_TARGET_JETSON_TK1) || defined(CONFIG_TARGET_CEI_TK1_SOM)
---
> #ifdef CONFIG_TARGET_JETSON_TK1
diff -r u-boot/board/rockchip/evb_rk3399/MAINTAINERS u-boot-2016.09-rc2/board/rockchip/evb_rk3399/MAINTAINERS
1,6d0
< EVB-RK3399
< M:      Kever Yang <kever.yang@rock-chips.com>
< S:      Maintained
< F:      board/rockchip/evb_rk3399
< F:      include/configs/evb_rk3399.h
< F:      configs/evb-rk3399_defconfig
diff -r u-boot/board/sunxi/board.c u-boot-2016.09-rc2/board/sunxi/board.c
478,482d477
< #ifdef CONFIG_MACH_SUN8I_H3
< 	/* turn on power LED (PL10) on H3 boards */
< 	gpio_direction_output(SUNXI_GPL(10), 1);
< #endif
< 
Only in u-boot/board/sunxi: board.c.orig
diff -r u-boot/board/sunxi/MAINTAINERS u-boot-2016.09-rc2/board/sunxi/MAINTAINERS
31d30
< F:	configs/Empire_electronix_m712_defconfig
41d39
< F:	configs/inet_q972_defconfig
diff -r u-boot/cmd/nand.c u-boot-2016.09-rc2/cmd/nand.c
118c118,119
< 	if (dev < 0 || dev >= CONFIG_SYS_MAX_NAND_DEVICE || !nand_info[dev]) {
---
> 	if (dev < 0 || dev >= CONFIG_SYS_MAX_NAND_DEVICE ||
> 	    !nand_info[dev]->name) {
diff -r u-boot/common/Kconfig u-boot-2016.09-rc2/common/Kconfig
159,166d158
< config USB_MASS_STORAGE_BOOT
< 	bool "Prefer booting from USB if available"
< 	depends on USB_STORAGE
< 	default n
< 	help
< 	 Enabling this will make U-Boot probe for possible USB device to
< 	 boot from and prefer booting from them if possible
< 
diff -r u-boot/common/miiphyutil.c u-boot-2016.09-rc2/common/miiphyutil.c
383c383
< 	u16 bmcr, anlpar, adv;
---
> 	u16 bmcr, anlpar;
420,425c420
< 
< 		if (miiphy_read(devname, addr, MII_ADVERTISE, &adv)) {
< 			puts("PHY AN adv speed");
< 			goto miiphy_read_failed;
< 		}
< 		return ((anlpar & adv) & LPA_100) ? _100BASET : _10BASET;
---
> 		return (anlpar & LPA_100) ? _100BASET : _10BASET;
441c436
< 	u16 bmcr, anlpar, adv;
---
> 	u16 bmcr, anlpar;
483,488c478
< 
< 		if (miiphy_read(devname, addr, MII_ADVERTISE, &adv)) {
< 			puts("PHY AN adv duplex");
< 			goto miiphy_read_failed;
< 		}
< 		return ((anlpar & adv) & (LPA_10FULL | LPA_100FULL)) ?
---
> 		return (anlpar & (LPA_10FULL | LPA_100FULL)) ?
Only in u-boot: .config
Only in u-boot: .config.nousb
Only in u-boot: .config.old
Only in u-boot/configs: A20-OLinuXino-Lime2-eMMC_defconfig
Only in u-boot/configs: Awsom_defconfig
Only in u-boot/configs: cei-tk1-som_defconfig
diff -r u-boot/configs/Cubieboard_defconfig u-boot-2016.09-rc2/configs/Cubieboard_defconfig
13d12
< CONFIG_CMD_GPIO=y
Only in u-boot/configs: Empire_electronix_m712_defconfig
Only in u-boot/configs: FriendlyARM_NanoPi_M1_defconfig
Only in u-boot/configs: FriendlyARM_NanoPi_NEO_defconfig
Only in u-boot/configs: inet_q972_defconfig
diff -r u-boot/configs/MSI_Primo81_defconfig u-boot-2016.09-rc2/configs/MSI_Primo81_defconfig
20d19
< # CONFIG_REQUIRE_SERIAL_CONSOLE is not set
Only in u-boot/configs: orangepi_h3_defconfig
Only in u-boot/configs: orangepi_pc_defconfig.rej
Only in u-boot/configs: p2771-0000-000_defconfig
Only in u-boot/configs: p2771-0000-500_defconfig
Only in u-boot-2016.09-rc2/configs: p2771-0000-a02_defconfig
Only in u-boot-2016.09-rc2/configs: p2771-0000-b00_defconfig
Only in u-boot/configs: qemu-x86_efi_payload32_defconfig
Only in u-boot/configs: qemu-x86_efi_payload64_defconfig
Only in u-boot/configs: Sinovoip_BPI_M2_plus_defconfig
diff -r u-boot/configs/uniphier_ld11_defconfig u-boot-2016.09-rc2/configs/uniphier_ld11_defconfig
18d17
< CONFIG_CMD_CACHE=y
28a28
> CONFIG_UNIPHIER_SERIAL=y
diff -r u-boot/configs/uniphier_ld20_defconfig u-boot-2016.09-rc2/configs/uniphier_ld20_defconfig
18d17
< CONFIG_CMD_CACHE=y
29a29
> CONFIG_UNIPHIER_SERIAL=y
diff -r u-boot/configs/uniphier_ld4_sld8_defconfig u-boot-2016.09-rc2/configs/uniphier_ld4_sld8_defconfig
20d19
< CONFIG_CMD_CACHE=y
34a34
> CONFIG_UNIPHIER_SERIAL=y
diff -r u-boot/configs/uniphier_pro4_defconfig u-boot-2016.09-rc2/configs/uniphier_pro4_defconfig
19d18
< CONFIG_CMD_CACHE=y
33a33
> CONFIG_UNIPHIER_SERIAL=y
diff -r u-boot/configs/uniphier_pxs2_ld6b_defconfig u-boot-2016.09-rc2/configs/uniphier_pxs2_ld6b_defconfig
20d19
< CONFIG_CMD_CACHE=y
34a34
> CONFIG_UNIPHIER_SERIAL=y
diff -r u-boot/configs/uniphier_sld3_defconfig u-boot-2016.09-rc2/configs/uniphier_sld3_defconfig
3d2
< CONFIG_SYS_MALLOC_F_LEN=0x2000
20d18
< CONFIG_CMD_CACHE=y
32a31
> CONFIG_UNIPHIER_SERIAL=y
Only in u-boot: .config.sav
Only in u-boot: .config.usb
diff -r u-boot/doc/README.kconfig u-boot-2016.09-rc2/doc/README.kconfig
25c25
<   include/configs/* as in Linux.  In U-Boot, it also does the following
---
>   include/configs/* as in Linux.  In U-Boot, it also does the followings
diff -r u-boot/drivers/i2c/mvtwsi.c u-boot-2016.09-rc2/drivers/i2c/mvtwsi.c
598c598
< 			status = twsi_send(twsi, addr[alen],
---
> 			status = twsi_send(twsi, *(addr++),
645c645
< 		status = twsi_send(twsi, addr[alen], MVTWSI_STATUS_DATA_W_ACK,
---
> 		status = twsi_send(twsi, *(addr++), MVTWSI_STATUS_DATA_W_ACK,
diff -r u-boot/drivers/i2c/tegra186_bpmp_i2c.c u-boot-2016.09-rc2/drivers/i2c/tegra186_bpmp_i2c.c
91a92,101
> 	int ret;
> 	struct fdtdec_phandle_args args;
> 
> 	ret = fdtdec_parse_phandle_with_args(gd->fdt_blob, dev->of_offset,
> 					     "nvidia,bpmp", NULL, 0, 0, &args);
> 	if (ret < 0) {
> 		debug("%s: fdtdec_parse_phandle_with_args() failed: %d\n",
> 		      __func__, ret);
> 		return ret;
> 	}
diff -r u-boot/drivers/i2c/tegra_i2c.c u-boot-2016.09-rc2/drivers/i2c/tegra_i2c.c
417c417
< 	ret = clk_get_by_name(dev, "div-clk", &i2c_bus->clk);
---
> 	ret = clk_get_by_name(dev, "i2c", &i2c_bus->clk);
diff -r u-boot/drivers/mmc/Kconfig u-boot-2016.09-rc2/drivers/mmc/Kconfig
83d82
< 	select DM_MMC_OPS
Only in u-boot/drivers/mmc: sunxi_mmc.c.orig
Only in u-boot/drivers/mmc: sunxi_mmc.c.rej
diff -r u-boot/drivers/mmc/tegra_mmc.c u-boot-2016.09-rc2/drivers/mmc/tegra_mmc.c
651c651
< 		ret = reset_get_by_name(&dev, "sdhci", &host->reset_ctl);
---
> 		ret = reset_get_by_name(&dev, "sdmmc", &host->reset_ctl);
653c653
< 			debug("reset_get_by_name() failed: %d\n", ret);
---
> 			debug("reset_get_by_index() failed: %d\n", ret);
656c656
< 		ret = clk_get_by_index(&dev, 0, &host->clk);
---
> 		ret = clk_get_by_name(&dev, "sdmmc", &host->clk);
diff -r u-boot/drivers/mmc/uniphier-sd.c u-boot-2016.09-rc2/drivers/mmc/uniphier-sd.c
124a125
> 	struct udevice *dev;
154c155
< static int uniphier_sd_check_error(struct udevice *dev)
---
> static int uniphier_sd_check_error(struct uniphier_sd_priv *priv)
156d156
< 	struct uniphier_sd_priv *priv = dev_get_priv(dev);
169c169
< 		dev_err(dev, "timeout error\n");
---
> 		dev_err(priv->dev, "timeout error\n");
175c175
< 		dev_err(dev, "communication out of sync\n");
---
> 		dev_err(priv->dev, "communication out of sync\n");
181c181
< 		dev_err(dev, "illegal access\n");
---
> 		dev_err(priv->dev, "illegal access\n");
188,189c188,189
< static int uniphier_sd_wait_for_irq(struct udevice *dev, unsigned int reg,
< 				    u32 flag)
---
> static int uniphier_sd_wait_for_irq(struct uniphier_sd_priv *priv,
> 				    unsigned int reg, u32 flag)
191d190
< 	struct uniphier_sd_priv *priv = dev_get_priv(dev);
197c196
< 			dev_err(dev, "timeout\n");
---
> 			dev_err(priv->dev, "timeout\n");
201c200
< 		ret = uniphier_sd_check_error(dev);
---
> 		ret = uniphier_sd_check_error(priv);
211c210
< static int uniphier_sd_pio_read_one_block(struct udevice *dev, u32 **pbuf,
---
> static int uniphier_sd_pio_read_one_block(struct mmc *mmc, u32 **pbuf,
214c213
< 	struct uniphier_sd_priv *priv = dev_get_priv(dev);
---
> 	struct uniphier_sd_priv *priv = mmc->priv;
218c217
< 	ret = uniphier_sd_wait_for_irq(dev, UNIPHIER_SD_INFO2,
---
> 	ret = uniphier_sd_wait_for_irq(priv, UNIPHIER_SD_INFO2,
241,242c240,241
< static int uniphier_sd_pio_write_one_block(struct udevice *dev,
< 					   const u32 **pbuf, uint blocksize)
---
> static int uniphier_sd_pio_write_one_block(struct mmc *mmc, const u32 **pbuf,
> 					   uint blocksize)
244c243
< 	struct uniphier_sd_priv *priv = dev_get_priv(dev);
---
> 	struct uniphier_sd_priv *priv = mmc->priv;
248c247
< 	ret = uniphier_sd_wait_for_irq(dev, UNIPHIER_SD_INFO2,
---
> 	ret = uniphier_sd_wait_for_irq(priv, UNIPHIER_SD_INFO2,
267c266
< static int uniphier_sd_pio_xfer(struct udevice *dev, struct mmc_data *data)
---
> static int uniphier_sd_pio_xfer(struct mmc *mmc, struct mmc_data *data)
275c274
< 			ret = uniphier_sd_pio_read_one_block(dev, &dest,
---
> 			ret = uniphier_sd_pio_read_one_block(mmc, &dest,
278c277
< 			ret = uniphier_sd_pio_write_one_block(dev, &src,
---
> 			ret = uniphier_sd_pio_write_one_block(mmc, &src,
310c309
< static int uniphier_sd_dma_wait_for_irq(struct udevice *dev, u32 flag,
---
> static int uniphier_sd_dma_wait_for_irq(struct uniphier_sd_priv *priv, u32 flag,
313d311
< 	struct uniphier_sd_priv *priv = dev_get_priv(dev);
318c316
< 			dev_err(dev, "timeout during DMA\n");
---
> 			dev_err(priv->dev, "timeout during DMA\n");
326c324
< 		dev_err(dev, "error during DMA\n");
---
> 		dev_err(priv->dev, "error during DMA\n");
333c331
< static int uniphier_sd_dma_xfer(struct udevice *dev, struct mmc_data *data)
---
> static int uniphier_sd_dma_xfer(struct mmc *mmc, struct mmc_data *data)
335c333
< 	struct uniphier_sd_priv *priv = dev_get_priv(dev);
---
> 	struct uniphier_sd_priv *priv = mmc->priv;
363c361
< 	ret = uniphier_sd_dma_wait_for_irq(dev, poll_flag, data->blocks);
---
> 	ret = uniphier_sd_dma_wait_for_irq(priv, poll_flag, data->blocks);
389c387
< static int uniphier_sd_send_cmd(struct udevice *dev, struct mmc_cmd *cmd,
---
> static int uniphier_sd_send_cmd(struct mmc *mmc, struct mmc_cmd *cmd,
392c390
< 	struct uniphier_sd_priv *priv = dev_get_priv(dev);
---
> 	struct uniphier_sd_priv *priv = mmc->priv;
397c395
< 		dev_err(dev, "command busy\n");
---
> 		dev_err(priv->dev, "command busy\n");
451c449
< 		dev_err(dev, "unknown response type\n");
---
> 		dev_err(priv->dev, "unknown response type\n");
455c453
< 	dev_dbg(dev, "sending CMD%d (SD_CMD=%08x, SD_ARG=%08x)\n",
---
> 	dev_dbg(priv->dev, "sending CMD%d (SD_CMD=%08x, SD_ARG=%08x)\n",
459c457
< 	ret = uniphier_sd_wait_for_irq(dev, UNIPHIER_SD_INFO1,
---
> 	ret = uniphier_sd_wait_for_irq(priv, UNIPHIER_SD_INFO1,
486c484
< 			ret = uniphier_sd_dma_xfer(dev, data);
---
> 			ret = uniphier_sd_dma_xfer(mmc, data);
488c486
< 			ret = uniphier_sd_pio_xfer(dev, data);
---
> 			ret = uniphier_sd_pio_xfer(mmc, data);
490c488
< 		ret = uniphier_sd_wait_for_irq(dev, UNIPHIER_SD_INFO1,
---
> 		ret = uniphier_sd_wait_for_irq(priv, UNIPHIER_SD_INFO1,
499,500c497,498
< static int uniphier_sd_set_bus_width(struct uniphier_sd_priv *priv,
< 				     struct mmc *mmc)
---
> static void uniphier_sd_set_bus_width(struct uniphier_sd_priv *priv,
> 				      struct mmc *mmc)
515c513,514
< 		return -EINVAL;
---
> 		BUG();
> 		break;
522,523d520
< 
< 	return 0;
574,576d570
< 	if (tmp & UNIPHIER_SD_CLKCTL_SCLKEN &&
< 	    (tmp & UNIPHIER_SD_CLKCTL_DIV_MASK) == val)
< 		return;
588,589d581
< 
< 	udelay(1000);
592c584
< static int uniphier_sd_set_ios(struct udevice *dev)
---
> static void uniphier_sd_set_ios(struct mmc *mmc)
594,596c586
< 	struct uniphier_sd_priv *priv = dev_get_priv(dev);
< 	struct mmc *mmc = mmc_get_mmc_dev(dev);
< 	int ret;
---
> 	struct uniphier_sd_priv *priv = mmc->priv;
598c588
< 	dev_dbg(dev, "clock %uHz, DDRmode %d, width %u\n",
---
> 	dev_dbg(priv->dev, "clock %uHz, DDRmode %d, width %u\n",
601,603c591
< 	ret = uniphier_sd_set_bus_width(priv, mmc);
< 	if (ret)
< 		return ret;
---
> 	uniphier_sd_set_bus_width(priv, mmc);
607,618c595
< 	return 0;
< }
< 
< static int uniphier_sd_get_cd(struct udevice *dev)
< {
< 	struct uniphier_sd_priv *priv = dev_get_priv(dev);
< 
< 	if (priv->caps & UNIPHIER_SD_CAP_NONREMOVABLE)
< 		return 1;
< 
< 	return !!(readl(priv->regbase + UNIPHIER_SD_INFO1) &
< 		  UNIPHIER_SD_INFO1_CD);
---
> 	udelay(1000);
621,627c598
< static const struct dm_mmc_ops uniphier_sd_ops = {
< 	.send_cmd = uniphier_sd_send_cmd,
< 	.set_ios = uniphier_sd_set_ios,
< 	.get_cd = uniphier_sd_get_cd,
< };
< 
< static void uniphier_sd_host_init(struct uniphier_sd_priv *priv)
---
> static int uniphier_sd_init(struct mmc *mmc)
628a600
> 	struct uniphier_sd_priv *priv = mmc->priv;
654a627,639
> 
> 	return 0;
> }
> 
> static int uniphier_sd_getcd(struct mmc *mmc)
> {
> 	struct uniphier_sd_priv *priv = mmc->priv;
> 
> 	if (priv->caps & UNIPHIER_SD_CAP_NONREMOVABLE)
> 		return 1;
> 
> 	return !!(readl(priv->regbase + UNIPHIER_SD_INFO1) &
> 		  UNIPHIER_SD_INFO1_CD);
657c642,649
< static int uniphier_sd_probe(struct udevice *dev)
---
> static const struct mmc_ops uniphier_sd_ops = {
> 	.send_cmd = uniphier_sd_send_cmd,
> 	.set_ios = uniphier_sd_set_ios,
> 	.init = uniphier_sd_init,
> 	.getcd = uniphier_sd_getcd,
> };
> 
> int uniphier_sd_probe(struct udevice *dev)
664a657,658
> 	priv->dev = dev;
> 
694a689
> 	priv->cfg.ops = &uniphier_sd_ops;
723,724d717
< 	uniphier_sd_host_init(priv);
< 
741c734
< static int uniphier_sd_remove(struct udevice *dev)
---
> int uniphier_sd_remove(struct udevice *dev)
762d754
< 	.ops = &uniphier_sd_ops,
diff -r u-boot/drivers/net/davinci_emac.c u-boot-2016.09-rc2/drivers/net/davinci_emac.c
110a111,130
> static inline void davinci_flush_rx_descs(void)
> {
> 	/* flush the whole RX descs area */
> 	flush_dcache_range(EMAC_WRAPPER_RAM_ADDR + EMAC_RX_DESC_BASE,
> 			EMAC_WRAPPER_RAM_ADDR + EMAC_TX_DESC_BASE);
> }
> 
> static inline void davinci_invalidate_rx_descs(void)
> {
> 	/* invalidate the whole RX descs area */
> 	invalidate_dcache_range(EMAC_WRAPPER_RAM_ADDR + EMAC_RX_DESC_BASE,
> 			EMAC_WRAPPER_RAM_ADDR + EMAC_TX_DESC_BASE);
> }
> 
> static inline void davinci_flush_desc(emac_desc *desc)
> {
> 	flush_dcache_range((unsigned long)desc,
> 			(unsigned long)desc + sizeof(*desc));
> }
> 
226c246
< 		return 1;
---
> 		return 0;
229c249
< 	return 0;
---
> 	return -EIO;
250c270
< 	return 1;
---
> 	return 0;
377,378c397,399
< 
< 	return retval ? value : -EIO;
---
> 	if (retval < 0)
> 		return retval;
> 	return value;
384c405
< 	return davinci_eth_phy_write(addr, reg, value) ? 0 : 1;
---
> 	return davinci_eth_phy_write(addr, reg, value);
477a499,500
> 	davinci_flush_rx_descs();
> 
639c662,663
< 			   (unsigned long)packet + ALIGN(length, PKTALIGN));
---
> 			(unsigned long)packet + length);
> 	davinci_flush_desc(emac_tx_desc);
672a697,698
> 	davinci_invalidate_rx_descs();
> 
683,684d708
< 			unsigned short len =
< 				rx_curr_desc->buff_off_len & 0xffff;
686,688c710,714
< 			invalidate_dcache_range(tmp, tmp + ALIGN(len, PKTALIGN));
< 			net_process_received_packet(rx_curr_desc->buffer, len);
< 			ret = len;
---
> 			invalidate_dcache_range(tmp, tmp + EMAC_RXBUF_SIZE);
> 			net_process_received_packet(
> 				rx_curr_desc->buffer,
> 				rx_curr_desc->buff_off_len & 0xffff);
> 			ret = rx_curr_desc->buff_off_len & 0xffff;
710a737
> 		davinci_flush_desc(rx_curr_desc);
727a755
> 				davinci_flush_desc(tail_desc);
732a761
> 			davinci_flush_desc(tail_desc);
diff -r u-boot/drivers/net/fm/fm.c u-boot-2016.09-rc2/drivers/net/fm/fm.c
338a339,341
> 	/* disable enqueue and dequeue of QMI */
> 	clrbits_be32(&qmi->fmqm_gc, FMQM_GC_ENQ_EN | FMQM_GC_DEQ_EN);
> 
diff -r u-boot/drivers/serial/Kconfig u-boot-2016.09-rc2/drivers/serial/Kconfig
347d346
< 	default y
diff -r u-boot/drivers/spi/tegra20_sflash.c u-boot-2016.09-rc2/drivers/spi/tegra20_sflash.c
125,128d124
< 	/* Change SPI clock to correct frequency, PLLP_OUT0 source */
< 	clock_start_periph_pll(priv->periph_id, CLOCK_ID_PERIPH,
< 			       priv->freq);
< 
diff -r u-boot/drivers/spi/tegra20_slink.c u-boot-2016.09-rc2/drivers/spi/tegra20_slink.c
131,134d130
< 	/* Change SPI clock to correct frequency, PLLP_OUT0 source */
< 	clock_start_periph_pll(priv->periph_id, CLOCK_ID_PERIPH,
< 			       priv->freq);
< 
diff -r u-boot/drivers/spi/tegra210_qspi.c u-boot-2016.09-rc2/drivers/spi/tegra210_qspi.c
134,136d133
< 	/* Change SPI clock to correct frequency, PLLP_OUT0 source */
< 	clock_start_periph_pll(priv->periph_id, CLOCK_ID_PERIPH, priv->freq);
< 
diff -r u-boot/drivers/video/sunxi_display.c u-boot-2016.09-rc2/drivers/video/sunxi_display.c
15d14
< #include <asm/arch/pwm.h>
747,756d745
< #ifdef SUNXI_PWM_PIN0
< 	if (pin == SUNXI_PWM_PIN0) {
< 		writel(SUNXI_PWM_CTRL_POLARITY0(PWM_ON) |
< 		       SUNXI_PWM_CTRL_ENABLE0 |
< 		       SUNXI_PWM_CTRL_PRESCALE0(0xf), SUNXI_PWM_CTRL_REG);
< 		writel(SUNXI_PWM_PERIOD_80PCT, SUNXI_PWM_CH0_PERIOD);
< 		sunxi_gpio_set_cfgpin(pin, SUNXI_PWM_MUX);
< 		return;
< 	}
< #endif
Only in u-boot: .git
Only in u-boot/include: autoconf.mk
Only in u-boot/include: autoconf.mk.dep
Only in u-boot/include: config
diff -r u-boot/include/config_distro_bootcmd.h u-boot-2016.09-rc2/include/config_distro_bootcmd.h
317,319d316
< 
< 
< 
322,327d318
< 
< /*	"splashpos=m,m\0" \
< 	"splashimage=66000000\0" \
< 	"loadsplash=ext4load  mmc 0 ${splashimage} /boot/boot.bmp || fatload  mmc 0 ${splashimage} boot.bmp; bmp d ${splashimage}\0" \*/
< 
< 
402d392
< /*#define CONFIG_BOOTCOMMAND "run loadsplash; run distro_bootcmd"*/
404d393
< 
Only in u-boot/include: config_distro_bootcmd.h.orig
Only in u-boot/include: config.h
diff -r u-boot/include/configs/am3517_crane.h u-boot-2016.09-rc2/include/configs/am3517_crane.h
15a16,17
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/am3517_evm.h u-boot-2016.09-rc2/include/configs/am3517_evm.h
20a21,22
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/am43xx_evm.h u-boot-2016.09-rc2/include/configs/am43xx_evm.h
13a14
> #define CONFIG_SYS_CACHELINE_SIZE       32
50a52
> #define CONFIG_SYS_CACHELINE_SIZE	32
diff -r u-boot/include/configs/at91-sama5_common.h u-boot-2016.09-rc2/include/configs/at91-sama5_common.h
14a15,16
> #define CONFIG_SYS_CACHELINE_SIZE	32
> 
diff -r u-boot/include/configs/bcm23550_w1d.h u-boot-2016.09-rc2/include/configs/bcm23550_w1d.h
129a130
> #define CONFIG_SYS_CACHELINE_SIZE	64
diff -r u-boot/include/configs/bcm28155_ap.h u-boot-2016.09-rc2/include/configs/bcm28155_ap.h
128a129
> #define CONFIG_SYS_CACHELINE_SIZE	64
diff -r u-boot/include/configs/bcm_ep_board.h u-boot-2016.09-rc2/include/configs/bcm_ep_board.h
13a14,15
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/bur_am335x_common.h u-boot-2016.09-rc2/include/configs/bur_am335x_common.h
17a18
> #define CONFIG_SYS_CACHELINE_SIZE	64
Only in u-boot/include/configs: cei-tk1-som.h
diff -r u-boot/include/configs/clearfog.h u-boot-2016.09-rc2/include/configs/clearfog.h
135a136,137
> #define CONFIG_SPL_SPI_BUS		0
> #define CONFIG_SPL_SPI_CS		0
diff -r u-boot/include/configs/cm_t3517.h u-boot-2016.09-rc2/include/configs/cm_t3517.h
12a13,14
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
30a33
> #define CONFIG_SYS_CACHELINE_SIZE	64
diff -r u-boot/include/configs/cm_t43.h u-boot-2016.09-rc2/include/configs/cm_t43.h
81a82
> #define CONFIG_SYS_CACHELINE_SIZE	32
diff -r u-boot/include/configs/colibri_vf.h u-boot-2016.09-rc2/include/configs/colibri_vf.h
14a15,16
> #define CONFIG_SYS_CACHELINE_SIZE	32
> 
206a209,210
> 
> #define CONFIG_SYS_CACHELINE_SIZE 32
diff -r u-boot/include/configs/corvus.h u-boot-2016.09-rc2/include/configs/corvus.h
120a121
> #define CONFIG_SYS_CACHELINE_SIZE	SZ_8K
diff -r u-boot/include/configs/db-88f6720.h u-boot-2016.09-rc2/include/configs/db-88f6720.h
102a103,104
> #define CONFIG_SPL_SPI_BUS		0
> #define CONFIG_SPL_SPI_CS		0
diff -r u-boot/include/configs/db-88f6820-gp.h u-boot-2016.09-rc2/include/configs/db-88f6820-gp.h
136a137,138
> #define CONFIG_SPL_SPI_BUS		0
> #define CONFIG_SPL_SPI_CS		0
diff -r u-boot/include/configs/db-mv784mp-gp.h u-boot-2016.09-rc2/include/configs/db-mv784mp-gp.h
127a128,129
> #define CONFIG_SPL_SPI_BUS		0
> #define CONFIG_SPL_SPI_CS		0
diff -r u-boot/include/configs/dragonboard410c.h u-boot-2016.09-rc2/include/configs/dragonboard410c.h
29a30,31
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/ds414.h u-boot-2016.09-rc2/include/configs/ds414.h
134a135,136
> #define CONFIG_SPL_SPI_BUS		0
> #define CONFIG_SPL_SPI_CS		0
diff -r u-boot/include/configs/exynos4-common.h u-boot-2016.09-rc2/include/configs/exynos4-common.h
17a18
> #define CONFIG_SYS_CACHELINE_SIZE	32
diff -r u-boot/include/configs/exynos5-common.h u-boot-2016.09-rc2/include/configs/exynos5-common.h
15a16
> #define CONFIG_SYS_CACHELINE_SIZE	64
diff -r u-boot/include/configs/flea3.h u-boot-2016.09-rc2/include/configs/flea3.h
21a22
> #define CONFIG_SYS_CACHELINE_SIZE	32
diff -r u-boot/include/configs/hikey.h u-boot-2016.09-rc2/include/configs/hikey.h
23a24,26
> /* MMU Definitions */
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/kc1.h u-boot-2016.09-rc2/include/configs/kc1.h
26a27
> #define CONFIG_SYS_CACHELINE_SIZE	32
diff -r u-boot/include/configs/kzm9g.h u-boot-2016.09-rc2/include/configs/kzm9g.h
12a13,14
> #define CONFIG_SYS_CACHELINE_SIZE	32
> 
diff -r u-boot/include/configs/maxbcm.h u-boot-2016.09-rc2/include/configs/maxbcm.h
95a96,97
> #define CONFIG_SPL_SPI_BUS		0
> #define CONFIG_SPL_SPI_CS		0
diff -r u-boot/include/configs/mcx.h u-boot-2016.09-rc2/include/configs/mcx.h
27a28,29
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/meson-gxbb-common.h u-boot-2016.09-rc2/include/configs/meson-gxbb-common.h
12a13
> #define CONFIG_SYS_CACHELINE_SIZE	64
diff -r u-boot/include/configs/nokia_rx51.h u-boot-2016.09-rc2/include/configs/nokia_rx51.h
21a22,23
> #define CONFIG_SYS_CACHELINE_SIZE 64
> 
diff -r u-boot/include/configs/omap3_beagle.h u-boot-2016.09-rc2/include/configs/omap3_beagle.h
277a278,279
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/omap3_cairo.h u-boot-2016.09-rc2/include/configs/omap3_cairo.h
194a195,196
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/omap3_evm.h u-boot-2016.09-rc2/include/configs/omap3_evm.h
342a343,344
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/omap3_logic.h u-boot-2016.09-rc2/include/configs/omap3_logic.h
84a85
> #define CONFIG_SYS_CACHELINE_SIZE	64
diff -r u-boot/include/configs/omap3_overo.h u-boot-2016.09-rc2/include/configs/omap3_overo.h
217a218
> #define CONFIG_SYS_CACHELINE_SIZE	64
diff -r u-boot/include/configs/omap3_pandora.h u-boot-2016.09-rc2/include/configs/omap3_pandora.h
121a122,123
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/omap3_zoom1.h u-boot-2016.09-rc2/include/configs/omap3_zoom1.h
178a179,180
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/pcm052.h u-boot-2016.09-rc2/include/configs/pcm052.h
11a12,13
> #define CONFIG_SYS_CACHELINE_SIZE	32
> 
diff -r u-boot/include/configs/rcar-gen2-common.h u-boot-2016.09-rc2/include/configs/rcar-gen2-common.h
11a12,13
> #define CONFIG_SYS_CACHELINE_SIZE 64
> 
diff -r u-boot/include/configs/rk3036_common.h u-boot-2016.09-rc2/include/configs/rk3036_common.h
8a9,10
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/rk3288_common.h u-boot-2016.09-rc2/include/configs/rk3288_common.h
9a10,11
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/rk3399_common.h u-boot-2016.09-rc2/include/configs/rk3399_common.h
9a10,11
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/rpi.h u-boot-2016.09-rc2/include/configs/rpi.h
16a17,22
> #ifdef CONFIG_BCM2835
> #define CONFIG_SYS_CACHELINE_SIZE		32
> #else
> #define CONFIG_SYS_CACHELINE_SIZE		64
> #endif
> 
diff -r u-boot/include/configs/s5p_goni.h u-boot-2016.09-rc2/include/configs/s5p_goni.h
19a20,21
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
235a238,239
> 
> #define CONFIG_SYS_CACHELINE_SIZE       64
diff -r u-boot/include/configs/siemens-am33x-common.h u-boot-2016.09-rc2/include/configs/siemens-am33x-common.h
38a39,40
> #define CONFIG_SYS_CACHELINE_SIZE       64
> 
diff -r u-boot/include/configs/smartweb.h u-boot-2016.09-rc2/include/configs/smartweb.h
172a173,174
> 
> #define CONFIG_SYS_CACHELINE_SIZE	0x2000
diff -r u-boot/include/configs/smdkc100.h u-boot-2016.09-rc2/include/configs/smdkc100.h
14a15,16
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/sniper.h u-boot-2016.09-rc2/include/configs/sniper.h
18a19,20
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/socfpga_common.h u-boot-2016.09-rc2/include/configs/socfpga_common.h
77a78
> #define CONFIG_SYS_CACHELINE_SIZE 32
diff -r u-boot/include/configs/sunxi-common.h u-boot-2016.09-rc2/include/configs/sunxi-common.h
13,16d12
< /*#define CONFIG_SPLASH_SCREEN
< #define CONFIG_SPLASH_SCREEN_ALIGN
< #define CONFIG_CMD_BMP
< #define CONFIG_VIDEO_BMP_RLE8*/
61a58
> #define CONFIG_SYS_CACHELINE_SIZE	64
481,490d477
< #ifdef CONFIG_USB_MASS_STORAGE_BOOT
< #define BOOT_TARGET_DEVICES(func) \
< 	func(FEL, fel, na) \
< 	BOOT_TARGET_DEVICES_USB(func) \
< 	BOOT_TARGET_DEVICES_MMC(func) \
< 	BOOT_TARGET_DEVICES_MMC_EXTRA(func) \
< 	BOOT_TARGET_DEVICES_SCSI(func) \
< 	func(PXE, pxe, na) \
< 	func(DHCP, dhcp, na)
< #else
499d485
< #endif
521c507
< 	"usb start\0"
---
> 	"preboot=usb start\0" \
527,529d512
< 
< 
< 
diff -r u-boot/include/configs/tam3517-common.h u-boot-2016.09-rc2/include/configs/tam3517-common.h
25a26,27
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/tao3530.h u-boot-2016.09-rc2/include/configs/tao3530.h
15a16,17
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/taurus.h u-boot-2016.09-rc2/include/configs/taurus.h
135a136,137
> 
> #define CONFIG_SYS_CACHELINE_SIZE	SZ_8K
diff -r u-boot/include/configs/tegra114-common.h u-boot-2016.09-rc2/include/configs/tegra114-common.h
10a11,13
> /* Cortex-A15 uses a cache line size of 64 bytes */
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/tegra124-common.h u-boot-2016.09-rc2/include/configs/tegra124-common.h
12a13,15
> /* Cortex-A15 uses a cache line size of 64 bytes */
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/tegra186-common.h u-boot-2016.09-rc2/include/configs/tegra186-common.h
11a12,14
> /* Cortex-A57 uses a cache line size of 64 bytes */
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/tegra20-common.h u-boot-2016.09-rc2/include/configs/tegra20-common.h
11a12,14
> /* Cortex-A9 uses a cache line size of 32 bytes */
> #define CONFIG_SYS_CACHELINE_SIZE	32
> 
diff -r u-boot/include/configs/tegra210-common.h u-boot-2016.09-rc2/include/configs/tegra210-common.h
12a13,15
> /* Cortex-A57 uses a cache line size of 64 bytes */
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/tegra30-common.h u-boot-2016.09-rc2/include/configs/tegra30-common.h
11a12,14
> /* Cortex-A9 uses a cache line size of 32 bytes */
> #define CONFIG_SYS_CACHELINE_SIZE	32
> 
diff -r u-boot/include/configs/theadorable.h u-boot-2016.09-rc2/include/configs/theadorable.h
160a161,162
> #define CONFIG_SPL_SPI_BUS		0
> #define CONFIG_SPL_SPI_CS		0
diff -r u-boot/include/configs/ti814x_evm.h u-boot-2016.09-rc2/include/configs/ti814x_evm.h
18a19,20
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/ti816x_evm.h u-boot-2016.09-rc2/include/configs/ti816x_evm.h
12a13,14
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/ti_am335x_common.h u-boot-2016.09-rc2/include/configs/ti_am335x_common.h
16a17
> #define CONFIG_SYS_CACHELINE_SIZE       64
diff -r u-boot/include/configs/ti_armv7_keystone2.h u-boot-2016.09-rc2/include/configs/ti_armv7_keystone2.h
202a203
> #define CONFIG_SYS_CACHELINE_SIZE		64
diff -r u-boot/include/configs/ti_omap3_common.h u-boot-2016.09-rc2/include/configs/ti_omap3_common.h
20a21,22
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/ti_omap4_common.h u-boot-2016.09-rc2/include/configs/ti_omap4_common.h
28a29
> #define CONFIG_SYS_CACHELINE_SIZE	32
diff -r u-boot/include/configs/ti_omap5_common.h u-boot-2016.09-rc2/include/configs/ti_omap5_common.h
25a26,27
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/tricorder.h u-boot-2016.09-rc2/include/configs/tricorder.h
18a19,20
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/uniphier.h u-boot-2016.09-rc2/include/configs/uniphier.h
15d14
< #define CONFIG_ARMV7_PSCI_1_0
32a32,37
> 
> #ifdef CONFIG_CACHE_UNIPHIER
> #define CONFIG_SYS_CACHELINE_SIZE	128
> #else
> #define CONFIG_SYS_CACHELINE_SIZE	32
> #endif
diff -r u-boot/include/configs/vexpress_aemv8a.h u-boot-2016.09-rc2/include/configs/vexpress_aemv8a.h
21a22,24
> /* MMU Definitions */
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/vexpress_common.h u-boot-2016.09-rc2/include/configs/vexpress_common.h
120a121,122
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/vf610twr.h u-boot-2016.09-rc2/include/configs/vf610twr.h
11a12,13
> #define CONFIG_SYS_CACHELINE_SIZE	32
> 
diff -r u-boot/include/configs/woodburn_common.h u-boot-2016.09-rc2/include/configs/woodburn_common.h
21a22
> #define CONFIG_SYS_CACHELINE_SIZE	32
diff -r u-boot/include/configs/xilinx_zynqmp.h u-boot-2016.09-rc2/include/configs/xilinx_zynqmp.h
36a37,39
> /* Cache Definitions */
> #define CONFIG_SYS_CACHELINE_SIZE	64
> 
diff -r u-boot/include/configs/zynq-common.h u-boot-2016.09-rc2/include/configs/zynq-common.h
18a19,20
> #define CONFIG_SYS_CACHELINE_SIZE	32
> 
Only in u-boot/include/dt-bindings/clock: sun8i-h3-ccu.h
Only in u-boot/include/dt-bindings/reset: sun8i-h3-ccu.h
diff -r u-boot/include/efi.h u-boot-2016.09-rc2/include/efi.h
30,37d29
< #define EFI_BITS_PER_LONG	BITS_PER_LONG
< 
< /* With 64-bit EFI stub, EFI_BITS_PER_LONG has to be 64 */
< #ifdef CONFIG_EFI_STUB_64BIT
< #undef EFI_BITS_PER_LONG
< #define EFI_BITS_PER_LONG	64
< #endif
< 
39,50c31,42
< #define EFI_LOAD_ERROR		(1 | (1UL << (EFI_BITS_PER_LONG - 1)))
< #define EFI_INVALID_PARAMETER	(2 | (1UL << (EFI_BITS_PER_LONG - 1)))
< #define EFI_UNSUPPORTED		(3 | (1UL << (EFI_BITS_PER_LONG - 1)))
< #define EFI_BAD_BUFFER_SIZE	(4 | (1UL << (EFI_BITS_PER_LONG - 1)))
< #define EFI_BUFFER_TOO_SMALL	(5 | (1UL << (EFI_BITS_PER_LONG - 1)))
< #define EFI_NOT_READY		(6 | (1UL << (EFI_BITS_PER_LONG - 1)))
< #define EFI_DEVICE_ERROR	(7 | (1UL << (EFI_BITS_PER_LONG - 1)))
< #define EFI_WRITE_PROTECTED	(8 | (1UL << (EFI_BITS_PER_LONG - 1)))
< #define EFI_OUT_OF_RESOURCES	(9 | (1UL << (EFI_BITS_PER_LONG - 1)))
< #define EFI_NOT_FOUND		(14 | (1UL << (EFI_BITS_PER_LONG - 1)))
< #define EFI_ACCESS_DENIED	(15 | (1UL << (EFI_BITS_PER_LONG - 1)))
< #define EFI_SECURITY_VIOLATION	(26 | (1UL << (EFI_BITS_PER_LONG - 1)))
---
> #define EFI_LOAD_ERROR		(1 | (1UL << (BITS_PER_LONG - 1)))
> #define EFI_INVALID_PARAMETER	(2 | (1UL << (BITS_PER_LONG - 1)))
> #define EFI_UNSUPPORTED		(3 | (1UL << (BITS_PER_LONG - 1)))
> #define EFI_BAD_BUFFER_SIZE	(4 | (1UL << (BITS_PER_LONG - 1)))
> #define EFI_BUFFER_TOO_SMALL	(5 | (1UL << (BITS_PER_LONG - 1)))
> #define EFI_NOT_READY		(6 | (1UL << (BITS_PER_LONG - 1)))
> #define EFI_DEVICE_ERROR	(7 | (1UL << (BITS_PER_LONG - 1)))
> #define EFI_WRITE_PROTECTED	(8 | (1UL << (BITS_PER_LONG - 1)))
> #define EFI_OUT_OF_RESOURCES	(9 | (1UL << (BITS_PER_LONG - 1)))
> #define EFI_NOT_FOUND		(14 | (1UL << (BITS_PER_LONG - 1)))
> #define EFI_ACCESS_DENIED	(15 | (1UL << (BITS_PER_LONG - 1)))
> #define EFI_SECURITY_VIOLATION	(26 | (1UL << (BITS_PER_LONG - 1)))
289c281
< extern char _binary_u_boot_bin_start[], _binary_u_boot_bin_end[];
---
> extern char _binary_u_boot_dtb_bin_start[], _binary_u_boot_dtb_bin_end[];
Only in u-boot/include: generated
diff -r u-boot/lib/efi/efi_stub.c u-boot-2016.09-rc2/lib/efi/efi_stub.c
357,359c357,359
< 	memcpy((void *)CONFIG_SYS_TEXT_BASE, _binary_u_boot_bin_start,
< 	       (ulong)_binary_u_boot_bin_end -
< 	       (ulong)_binary_u_boot_bin_start);
---
> 	memcpy((void *)CONFIG_SYS_TEXT_BASE, _binary_u_boot_dtb_bin_start,
> 	       (ulong)_binary_u_boot_dtb_bin_end -
> 	       (ulong)_binary_u_boot_dtb_bin_start);
Only in u-boot: massbuild.sh
diff -r u-boot/net/net.c u-boot-2016.09-rc2/net/net.c
837c837,845
< #define IP_PKTSIZE (CONFIG_NET_MAXDEFRAG)
---
> /*
>  * MAXDEFRAG, above, is chosen in the config file and  is real data
>  * so we need to add the NFS overhead, which is more than TFTP.
>  * To use sizeof in the internal unnamed structures, we need a real
>  * instance (can't do "sizeof(struct rpc_t.u.reply))", unfortunately).
>  * The compiler doesn't complain nor allocates the actual structure
>  */
> static struct rpc_t rpc_specimen;
> #define IP_PKTSIZE (CONFIG_NET_MAXDEFRAG + sizeof(rpc_specimen.u.reply))
diff -r u-boot/net/nfs.c u-boot-2016.09-rc2/net/nfs.c
25,28d24
< /* NOTE 4: NFSv3 support added by Guillaume GARDET, 2016-June-20.
<  * NFSv2 is still used by default. But if server does not support NFSv2, then
<  * NFSv3 is used, if available on NFS server. */
< 
54,56c50,51
< static char dirfh[NFS_FHSIZE];	/* NFSv2 / NFSv3 file handle of directory */
< static char filefh[NFS3_FHSIZE]; /* NFSv2 / NFSv3 file handle */
< static int filefh3_length;	/* (variable) length of filefh when NFSv3 */
---
> static char dirfh[NFS_FHSIZE];	/* file handle of directory */
> static char filefh[NFS_FHSIZE]; /* file handle of kernel image */
72a68
> static char default_filename[64];
77,80d72
< #define NFSV2_FLAG 1
< #define NFSV3_FLAG 1 << 1
< static char supported_nfs_versions = NFSV2_FLAG | NFSV3_FLAG;
< 
144a137,143
> 	int hl;
> 	int hostnamelen;
> 	char hostname[256];
> 
> 	strcpy(hostname, "");
> 	hostnamelen = strlen(hostname);
> 
153a153,154
> 	hl = (hostnamelen + 3) & ~3;
> 
156,158c157,163
< 	*p++ = htonl(20);		/* auth length */
< 	*p++ = 0;			/* stamp */
< 	*p++ = 0;			/* hostname string */
---
> 	*p++ = htonl(hl+20);		/* auth length */
> 	*p++ = htonl(0);		/* stamp */
> 	*p++ = htonl(hostnamelen);	/* hostname string */
> 	if (hostnamelen & 3)
> 		*(p + hostnamelen / 4) = 0; /* add zero padding */
> 	memcpy(p, hostname, hostnamelen);
> 	p += hl / 4;
173,180c178
< static struct rpc_t *rpc_req_prep(void)
< {
< 	return (struct rpc_t *)(net_tx_packet + net_eth_hdr_size() +
< 				IP_UDP_HDR_SIZE);
< }
< 
< static void rpc_req(int rpc_prog, int rpc_proc, struct rpc_t *rpc_pkt,
< 		    int datalen)
---
> static void rpc_req(int rpc_prog, int rpc_proc, uint32_t *data, int datalen)
181a180
> 	struct rpc_t pkt;
182a182
> 	uint32_t *p;
187,204c187,198
< 	rpc_pkt->u.call.id = htonl(id);
< 	rpc_pkt->u.call.type = htonl(MSG_CALL);
< 	rpc_pkt->u.call.rpcvers = htonl(2);	/* use RPC version 2 */
< 	rpc_pkt->u.call.prog = htonl(rpc_prog);
< 	switch (rpc_prog) {
< 	case PROG_NFS:
< 		if (supported_nfs_versions & NFSV2_FLAG)
< 			rpc_pkt->u.call.vers = htonl(2);	/* NFS v2 */
< 		else /* NFSV3_FLAG */
< 			rpc_pkt->u.call.vers = htonl(3);	/* NFS v3 */
< 		break;
< 	case PROG_PORTMAP:
< 	case PROG_MOUNT:
< 	default:
< 		/* portmapper is version 2 */
< 		rpc_pkt->u.call.vers = htonl(2);
< 	}
< 	rpc_pkt->u.call.proc = htonl(rpc_proc);
---
> 	pkt.u.call.id = htonl(id);
> 	pkt.u.call.type = htonl(MSG_CALL);
> 	pkt.u.call.rpcvers = htonl(2);	/* use RPC version 2 */
> 	pkt.u.call.prog = htonl(rpc_prog);
> 	pkt.u.call.vers = htonl(2);	/* portmapper is version 2 */
> 	pkt.u.call.proc = htonl(rpc_proc);
> 	p = (uint32_t *)&(pkt.u.call.data);
> 
> 	if (datalen)
> 		memcpy((char *)p, (char *)data, datalen*sizeof(uint32_t));
> 
> 	pktlen = (char *)p + datalen*sizeof(uint32_t) - (char *)&pkt;
206,207c200,201
< 	pktlen = ((char *)&rpc_pkt->u.call.data - (char *)&rpc_pkt) +
< 		datalen * sizeof(uint32_t);
---
> 	memcpy((char *)net_tx_packet + net_eth_hdr_size() + IP_UDP_HDR_SIZE,
> 	       (char *)&pkt, pktlen);
225,226c219
< 	uint32_t *data;
< 	struct rpc_t *rpc_pkt = rpc_req_prep();
---
> 	uint32_t data[16];
228d220
< 	data = rpc_pkt->u.call.data;
235c227,228
< 	rpc_req(PROG_PORTMAP, PORTMAP_GETPORT, rpc_pkt, 8);
---
> 
> 	rpc_req(PROG_PORTMAP, PORTMAP_GETPORT, data, 8);
242a236
> 	uint32_t data[1024];
246d239
< 	struct rpc_t *rpc_pkt = rpc_req_prep();
250c243
< 	p = rpc_pkt->u.call.data;
---
> 	p = &(data[0]);
259c252
< 	len = (uint32_t *)p - (uint32_t *)&(rpc_pkt->u.call.data);
---
> 	len = (uint32_t *)p - (uint32_t *)&(data[0]);
261c254
< 	rpc_req(PROG_MOUNT, MOUNT_ADDENTRY, rpc_pkt, len);
---
> 	rpc_req(PROG_MOUNT, MOUNT_ADDENTRY, data, len);
268a262
> 	uint32_t data[1024];
271d264
< 	struct rpc_t *rpc_pkt = rpc_req_prep();
277c270
< 	p = rpc_pkt->u.call.data;
---
> 	p = &(data[0]);
280c273
< 	len = (uint32_t *)p - (uint32_t *)&(rpc_pkt->u.call.data);
---
> 	len = (uint32_t *)p - (uint32_t *)&(data[0]);
282c275
< 	rpc_req(PROG_MOUNT, MOUNT_UMOUNTALL, rpc_pkt, len);
---
> 	rpc_req(PROG_MOUNT, MOUNT_UMOUNTALL, data, len);
293a287
> 	uint32_t data[1024];
296d289
< 	struct rpc_t *rpc_pkt = rpc_req_prep();
298c291
< 	p = rpc_pkt->u.call.data;
---
> 	p = &(data[0]);
301,308c294,295
< 	if (supported_nfs_versions & NFSV2_FLAG) {
< 		memcpy(p, filefh, NFS_FHSIZE);
< 		p += (NFS_FHSIZE / 4);
< 	} else { /* NFSV3_FLAG */
< 		*p++ = htonl(filefh3_length);
< 		memcpy(p, filefh, filefh3_length);
< 		p += (filefh3_length / 4);
< 	}
---
> 	memcpy(p, filefh, NFS_FHSIZE);
> 	p += (NFS_FHSIZE / 4);
310c297
< 	len = (uint32_t *)p - (uint32_t *)&(rpc_pkt->u.call.data);
---
> 	len = (uint32_t *)p - (uint32_t *)&(data[0]);
312c299
< 	rpc_req(PROG_NFS, NFS_READLINK, rpc_pkt, len);
---
> 	rpc_req(PROG_NFS, NFS_READLINK, data, len);
319a307
> 	uint32_t data[1024];
323d310
< 	struct rpc_t *rpc_pkt = rpc_req_prep();
327c314
< 	p = rpc_pkt->u.call.data;
---
> 	p = &(data[0]);
330,350c317,323
< 	if (supported_nfs_versions & NFSV2_FLAG) {
< 		memcpy(p, dirfh, NFS_FHSIZE);
< 		p += (NFS_FHSIZE / 4);
< 		*p++ = htonl(fnamelen);
< 		if (fnamelen & 3)
< 			*(p + fnamelen / 4) = 0;
< 		memcpy(p, fname, fnamelen);
< 		p += (fnamelen + 3) / 4;
< 
< 		len = (uint32_t *)p - (uint32_t *)&(rpc_pkt->u.call.data);
< 
< 		rpc_req(PROG_NFS, NFS_LOOKUP, rpc_pkt, len);
< 	} else {  /* NFSV3_FLAG */
< 		*p++ = htonl(NFS_FHSIZE);	/* Dir handle length */
< 		memcpy(p, dirfh, NFS_FHSIZE);
< 		p += (NFS_FHSIZE / 4);
< 		*p++ = htonl(fnamelen);
< 		if (fnamelen & 3)
< 			*(p + fnamelen / 4) = 0;
< 		memcpy(p, fname, fnamelen);
< 		p += (fnamelen + 3) / 4;
---
> 	memcpy(p, dirfh, NFS_FHSIZE);
> 	p += (NFS_FHSIZE / 4);
> 	*p++ = htonl(fnamelen);
> 	if (fnamelen & 3)
> 		*(p + fnamelen / 4) = 0;
> 	memcpy(p, fname, fnamelen);
> 	p += (fnamelen + 3) / 4;
352c325
< 		len = (uint32_t *)p - (uint32_t *)&(rpc_pkt->u.call.data);
---
> 	len = (uint32_t *)p - (uint32_t *)&(data[0]);
354,355c327
< 		rpc_req(PROG_NFS, NFS3PROC_LOOKUP, rpc_pkt, len);
< 	}
---
> 	rpc_req(PROG_NFS, NFS_LOOKUP, data, len);
362a335
> 	uint32_t data[1024];
365d337
< 	struct rpc_t *rpc_pkt = rpc_req_prep();
367c339
< 	p = rpc_pkt->u.call.data;
---
> 	p = &(data[0]);
370,384c342,346
< 	if (supported_nfs_versions & NFSV2_FLAG) {
< 		memcpy(p, filefh, NFS_FHSIZE);
< 		p += (NFS_FHSIZE / 4);
< 		*p++ = htonl(offset);
< 		*p++ = htonl(readlen);
< 		*p++ = 0;
< 	} else { /* NFSV3_FLAG */
< 		*p++ = htonl(filefh3_length);
< 		memcpy(p, filefh, filefh3_length);
< 		p += (filefh3_length / 4);
< 		*p++ = htonl(0); /* offset is 64-bit long, so fill with 0 */
< 		*p++ = htonl(offset);
< 		*p++ = htonl(readlen);
< 		*p++ = 0;
< 	}
---
> 	memcpy(p, filefh, NFS_FHSIZE);
> 	p += (NFS_FHSIZE / 4);
> 	*p++ = htonl(offset);
> 	*p++ = htonl(readlen);
> 	*p++ = 0;
386c348
< 	len = (uint32_t *)p - (uint32_t *)&(rpc_pkt->u.call.data);
---
> 	len = (uint32_t *)p - (uint32_t *)&(data[0]);
388c350
< 	rpc_req(PROG_NFS, NFS_READ, rpc_pkt, len);
---
> 	rpc_req(PROG_NFS, NFS_READ, data, len);
400,403c362
< 		if (supported_nfs_versions & NFSV2_FLAG)
< 			rpc_lookup_req(PROG_MOUNT, 1);
< 		else  /* NFSV3_FLAG */
< 			rpc_lookup_req(PROG_MOUNT, 3);
---
> 		rpc_lookup_req(PROG_MOUNT, 1);
406,409c365
< 		if (supported_nfs_versions & NFSV2_FLAG)
< 			rpc_lookup_req(PROG_NFS, 2);
< 		else  /* NFSV3_FLAG */
< 			rpc_lookup_req(PROG_NFS, 3);
---
> 		rpc_lookup_req(PROG_NFS, 2);
437c393
< 	memcpy(&rpc_pkt.u.data[0], pkt, len);
---
> 	memcpy((unsigned char *)&rpc_pkt, pkt, len);
469c425
< 	memcpy(&rpc_pkt.u.data[0], pkt, len);
---
> 	memcpy((unsigned char *)&rpc_pkt, pkt, len);
483d438
< 	/*  NFSv2 and NFSv3 use same structure */
495c450
< 	memcpy(&rpc_pkt.u.data[0], pkt, len);
---
> 	memcpy((unsigned char *)&rpc_pkt, pkt, len);
519c474
< 	memcpy(&rpc_pkt.u.data[0], pkt, len);
---
> 	memcpy((unsigned char *)&rpc_pkt, pkt, len);
531c486,492
< 		case NFS_RPC_SUCCESS: /* Not an error */
---
> 		case 0: /* Not an error */
> 			break;
> 		case 2: /* Remote can't support NFS version */
> 			printf("*** ERROR: NFS version not supported: Requested: V%d, accepted: min V%d - max V%d\n",
> 			       2,
> 			       ntohl(rpc_pkt.u.reply.data[0]),
> 			       ntohl(rpc_pkt.u.reply.data[1]));
533,561d493
< 		case NFS_RPC_PROG_MISMATCH:
< 			/* Remote can't support NFS version */
< 			switch (ntohl(rpc_pkt.u.reply.data[0])) {
< 			/* Minimal supported NFS version */
< 			case 3:
< 				debug("*** Waring: NFS version not supported: Requested: V%d, accepted: min V%d - max V%d\n",
< 				      (supported_nfs_versions & NFSV2_FLAG) ?
< 						2 : 3,
< 				      ntohl(rpc_pkt.u.reply.data[0]),
< 				      ntohl(rpc_pkt.u.reply.data[1]));
< 				debug("Will retry with NFSv3\n");
< 				/* Clear NFSV2_FLAG from supported versions */
< 				supported_nfs_versions &= ~NFSV2_FLAG;
< 				return -NFS_RPC_PROG_MISMATCH;
< 			case 4:
< 			default:
< 				puts("*** ERROR: NFS version not supported");
< 				debug(": Requested: V%d, accepted: min V%d - max V%d\n",
< 				      (supported_nfs_versions & NFSV2_FLAG) ?
< 						2 : 3,
< 				      ntohl(rpc_pkt.u.reply.data[0]),
< 				      ntohl(rpc_pkt.u.reply.data[1]));
< 				puts("\n");
< 			}
< 			break;
< 		case NFS_RPC_PROG_UNAVAIL:
< 		case NFS_RPC_PROC_UNAVAIL:
< 		case NFS_RPC_GARBAGE_ARGS:
< 		case NFS_RPC_SYSTEM_ERR:
563,564c495,496
< 			debug("*** ERROR: accept state error (%d)\n",
< 			      ntohl(rpc_pkt.u.reply.astatus));
---
> 			printf("*** ERROR: accept state error (%d)\n",
> 			       ntohl(rpc_pkt.u.reply.astatus));
570,577c502
< 	if (supported_nfs_versions & NFSV2_FLAG) {
< 		memcpy(filefh, rpc_pkt.u.reply.data + 1, NFS_FHSIZE);
< 	} else {  /* NFSV3_FLAG */
< 		filefh3_length = ntohl(rpc_pkt.u.reply.data[1]);
< 		if (filefh3_length > NFS3_FHSIZE)
< 			filefh3_length  = NFS3_FHSIZE;
< 		memcpy(filefh, rpc_pkt.u.reply.data + 2, filefh3_length);
< 	}
---
> 	memcpy(filefh, rpc_pkt.u.reply.data + 1, NFS_FHSIZE);
582,609d506
< static int nfs3_get_attributes_offset(uint32_t *data)
< {
< 	if (ntohl(data[1]) != 0) {
< 		/* 'attributes_follow' flag is TRUE,
< 		 * so we have attributes on 21 dwords */
< 		/* Skip unused values :
< 			type;	32 bits value,
< 			mode;	32 bits value,
< 			nlink;	32 bits value,
< 			uid;	32 bits value,
< 			gid;	32 bits value,
< 			size;	64 bits value,
< 			used;	64 bits value,
< 			rdev;	64 bits value,
< 			fsid;	64 bits value,
< 			fileid;	64 bits value,
< 			atime;	64 bits value,
< 			mtime;	64 bits value,
< 			ctime;	64 bits value,
< 		*/
< 		return 22;
< 	} else {
< 		/* 'attributes_follow' flag is FALSE,
< 		 * so we don't have any attributes */
< 		return 1;
< 	}
< }
< 
614d510
< 	int nfsv3_data_offset = 0;
631,637c527
< 	if (!(supported_nfs_versions & NFSV2_FLAG)) { /* NFSV3_FLAG */
< 		nfsv3_data_offset =
< 			nfs3_get_attributes_offset(rpc_pkt.u.reply.data);
< 	}
< 
< 	/* new path length */
< 	rlen = ntohl(rpc_pkt.u.reply.data[1 + nfsv3_data_offset]);
---
> 	rlen = ntohl(rpc_pkt.u.reply.data[1]); /* new path length */
639c529
< 	if (*((char *)&(rpc_pkt.u.reply.data[2 + nfsv3_data_offset])) != '/') {
---
> 	if (*((char *)&(rpc_pkt.u.reply.data[2])) != '/') {
641d530
< 
644,645c533
< 		memcpy(nfs_path + pathlen,
< 		       (uchar *)&(rpc_pkt.u.reply.data[2 + nfsv3_data_offset]),
---
> 		memcpy(nfs_path + pathlen, (uchar *)&(rpc_pkt.u.reply.data[2]),
649,651c537
< 		memcpy(nfs_path,
< 		       (uchar *)&(rpc_pkt.u.reply.data[2 + nfsv3_data_offset]),
< 		       rlen);
---
> 		memcpy(nfs_path, (uchar *)&(rpc_pkt.u.reply.data[2]), rlen);
661d546
< 	uchar *data_ptr;
665c550
< 	memcpy(&rpc_pkt.u.data[0], pkt, sizeof(rpc_pkt.u.reply));
---
> 	memcpy((uchar *)&rpc_pkt, pkt, sizeof(rpc_pkt.u.reply));
689,707c574,577
< 	if (supported_nfs_versions & NFSV2_FLAG) {
< 		rlen = ntohl(rpc_pkt.u.reply.data[18]);
< 		data_ptr = (uchar *)&(rpc_pkt.u.reply.data[19]);
< 	} else {  /* NFSV3_FLAG */
< 		int nfsv3_data_offset =
< 			nfs3_get_attributes_offset(rpc_pkt.u.reply.data);
< 
< 		/* count value */
< 		rlen = ntohl(rpc_pkt.u.reply.data[1 + nfsv3_data_offset]);
< 		/* Skip unused values :
< 			EOF:		32 bits value,
< 			data_size:	32 bits value,
< 		*/
< 		data_ptr = (uchar *)
< 			&(rpc_pkt.u.reply.data[4 + nfsv3_data_offset]);
< 	}
< 
< 	if (store_block(data_ptr, nfs_offset, rlen))
< 			return -9999;
---
> 	rlen = ntohl(rpc_pkt.u.reply.data[18]);
> 	if (store_block((uchar *)pkt + sizeof(rpc_pkt.u.reply),
> 			nfs_offset, rlen))
> 		return -9999;
775c645
< 			debug("*** ERROR: Cannot umount\n");
---
> 			puts("*** ERROR: Cannot umount\n");
791,798d660
< 		} else if (reply == -NFS_RPC_PROG_MISMATCH &&
< 			   supported_nfs_versions != 0) {
< 			/* umount */
< 			nfs_state = STATE_UMOUNT_REQ;
< 			nfs_send();
< 			/* And retry with another supported version */
< 			nfs_state = STATE_PRCLOOKUP_PROG_MOUNT_REQ;
< 			nfs_send();
838,839d699
< 			if (rlen < 0)
< 				debug("NFS READ error (%d)\n", rlen);
858c718
< 		debug("*** ERROR: Fail allocate memory\n");
---
> 		puts("*** ERROR: Fail allocate memory\n");
863c723
< 		sprintf(nfs_path, "/nfsroot/%02X%02X%02X%02X.img",
---
> 		sprintf(default_filename, "/nfsroot/%02X%02X%02X%02X.img",
867a728
> 		strcpy(nfs_path, default_filename);
869,870c730,731
< 		debug("*** Warning: no boot file name; using '%s'\n",
< 		      nfs_path);
---
> 		printf("*** Warning: no boot file name; using '%s'\n",
> 		       nfs_path);
888c749
< 	debug("Using %s device\n", eth_get_name());
---
> 	printf("Using %s device\n", eth_get_name());
890,891c751,752
< 	debug("File transfer via NFS from server %pI4; our IP address is %pI4",
< 	      &nfs_server_ip, &net_ip);
---
> 	printf("File transfer via NFS from server %pI4; our IP address is %pI4",
> 	       &nfs_server_ip, &net_ip);
901,902c762,763
< 			debug("; sending through gateway %pI4",
< 			      &net_gateway);
---
> 			printf("; sending through gateway %pI4",
> 			       &net_gateway);
904c765
< 	debug("\nFilename '%s/%s'.", nfs_path, nfs_filename);
---
> 	printf("\nFilename '%s/%s'.", nfs_path, nfs_filename);
907,908c768,769
< 		debug(" Size is 0x%x Bytes = ",
< 		      net_boot_file_expected_size_in_blocks << 9);
---
> 		printf(" Size is 0x%x Bytes = ",
> 		       net_boot_file_expected_size_in_blocks << 9);
911c772,773
< 	debug("\nLoad address: 0x%lx\nLoading: *\b", load_addr);
---
> 	printf("\nLoad address: 0x%lx\n"
> 		"Loading: *\b", load_addr);
diff -r u-boot/net/nfs.h u-boot-2016.09-rc2/net/nfs.h
28,29d27
< #define NFS3PROC_LOOKUP 3
< 
31d28
< #define NFS3_FHSIZE     64
50,58c47
< /* Values for Accept State flag on RPC answers (See: rfc1831) */
< enum rpc_accept_stat {
< 	NFS_RPC_SUCCESS = 0,	/* RPC executed successfully */
< 	NFS_RPC_PROG_UNAVAIL = 1,	/* remote hasn't exported program */
< 	NFS_RPC_PROG_MISMATCH = 2,	/* remote can't support version # */
< 	NFS_RPC_PROC_UNAVAIL = 3,	/* program can't support procedure */
< 	NFS_RPC_GARBAGE_ARGS = 4,	/* procedure can't decode params */
< 	NFS_RPC_SYSTEM_ERR = 5	/* errors like memory allocation failure */
< };
---
> #define NFS_MAXLINKDEPTH 16
79c68
< 			uint32_t data[NFS_READ_SIZE / sizeof(uint32_t)];
---
> 			uint32_t data[19];
Only in u-boot: patch
Only in u-boot: sambooca
Only in u-boot: samboocacfgs
Only in u-boot/scripts/basic: fixdep
Only in u-boot/scripts/kconfig: conf
Only in u-boot/scripts/kconfig: mconf
Only in u-boot/scripts/kconfig: zconf.hash.c
Only in u-boot/scripts/kconfig: zconf.lex.c
Only in u-boot/scripts/kconfig: zconf.tab.c
Only in u-boot: spl
diff -r u-boot/tools/kwboot.c u-boot-2016.09-rc2/tools/kwboot.c
657a658,665
> 	/*
> 	 * Subtract mkimage header size from destination address
> 	 * as this header is not expected by the Marvell BootROM.
> 	 * This way, the execution address is identical to the
> 	 * one the image is compiled for (TEXT_BASE).
> 	 */
> 	hdr->destaddr = hdr->destaddr - sizeof(struct image_header);
> 
667,674d674
< 	} else {
< 		/*
< 		 * Subtract mkimage header size from destination address
< 		 * as this header is not expected by the Marvell BootROM.
< 		 * This way, the execution address is identical to the
< 		 * one the image is compiled for (TEXT_BASE).
< 		 */
< 		hdr->destaddr = hdr->destaddr - sizeof(struct image_header);
diff -r u-boot/tools/moveconfig.py u-boot-2016.09-rc2/tools/moveconfig.py
44c44
< It looks like one of the following:
---
> It looks like one of the followings:
182c182
< # (https://www.kernel.org/pub/tools/crosstool/files/bin/), except the following:
---
> # (https://www.kernel.org/pub/tools/crosstool/files/bin/), except the followings:
206,207c206
<     'x86': 'i386-linux-',
<     'xtensa': 'xtensa-linux-'
---
>     'x86': 'i386-linux-'
